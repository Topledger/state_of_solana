"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[351],{351:(e,t,r)=>{r.r(t),r.d(t,{default:()=>m});var l=r(95155),a=r(12115),n=r(41545),s=r(41995),c=r(79111),o=r(78398),i=r(77833),d=r(51078),u=r(7545),h=r(81838),x=r(52594);let f=e=>{let{className:t="w-4 h-4"}=e;return(0,l.jsx)("svg",{className:t,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,l.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})})},m=e=>{let{isModalOpen:t=!1,onModalClose:r=()=>{}}=e,[m,g]=(0,a.useState)([]),[p,b]=(0,a.useState)(!0),[v,y]=(0,a.useState)(null),[j,w]=(0,a.useState)([]),[N,S]=(0,a.useState)(!0),k=(0,a.useRef)(null),L=(0,a.useRef)(null),[A,C]=(0,a.useState)({visible:!1,data:null,x:0,y:0}),_=(0,a.useCallback)(async()=>{b(!0),y(null);try{let e=await (0,i.fetchSolChangeData)();0===e.length?(y("No data available for SOL change cohorts."),g([])):g(e)}catch(e){y(e instanceof Error?e.message:"Failed to load data."),g([])}finally{b(!1)}},[]);(0,a.useEffect)(()=>{_()},[_]),(0,a.useEffect)(()=>{t&&(S(!0),m.length>0?(w(m),S(!1)):(0,i.fetchSolChangeData)().then(e=>{w(e)}).catch(e=>{console.error("Error loading modal chart data:",e)}).finally(()=>{S(!1)}))},[t,m]);let O=e=>e>=1e6?"".concat((e/1e6).toFixed(1),"M"):e>=1e3?"".concat((e/1e3).toFixed(1),"K"):e.toString(),R=(e,t)=>{let r=t.reduce((e,t)=>e+t.Wallets,0);return r>0?e/r*100:0},E=e=>(0,o.A)({domain:e.map(e=>e.Sol_change_cohort),range:e.map(e=>i.a[e.Sol_change_cohort]||"#cccccc")}),W=function(e,t,r){let l=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(e&&t){let e=l?L.current:k.current;if(e){let l=e.getBoundingClientRect();C({visible:!0,data:t,x:r.clientX-l.left,y:r.clientY-l.top})}}else C(e=>({...e,visible:!1}))},M=function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=e?j:m;if(e?N:p)return(0,l.jsx)("div",{className:"flex justify-center items-center h-full",children:(0,l.jsx)(d.A,{size:"sm"})});if(v||0===t.length)return(0,l.jsxs)("div",{className:"flex flex-col justify-center items-center h-full",children:[(0,l.jsx)("p",{className:"text-red-400 mb-3 text-sm",children:v||"No data available"}),(0,l.jsx)(u.A,{onClick:e?()=>{S(!0),(0,i.fetchSolChangeData)().then(e=>{w(e)}).catch(e=>{console.error("Error loading modal chart data:",e)}).finally(()=>{S(!1)})}:_,children:(0,l.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,l.jsx)(f,{className:"w-3.5 h-3.5"}),(0,l.jsx)("span",{children:"Retry"})]})})]});let r=E(t);return t.reduce((e,t)=>e+t.Wallets,0),(0,l.jsxs)("div",{className:"relative h-full w-full",ref:e?L:k,children:[A.visible&&A.data&&(0,l.jsx)(h.A,{left:A.x,top:A.y,title:A.data.Sol_change_cohort,items:[{label:"Wallets",value:O(A.data.Wallets),color:i.a[A.data.Sol_change_cohort]},{label:"Percentage",value:"".concat(R(A.data.Wallets,t).toFixed(1),"%"),color:i.a[A.data.Sol_change_cohort]}],isModal:e}),(0,l.jsx)(c.A,{children:a=>{let{width:c,height:o}=a,i=c/2,d=o/2,u=Math.min(c,o)/2.5;return(0,l.jsx)("svg",{width:c,height:o,children:(0,l.jsx)(s.A,{top:d,left:i,children:(0,l.jsx)(n.A,{data:t,pieValue:e=>e.Wallets,outerRadius:u,innerRadius:.3*u,cornerRadius:3,padAngle:.005,children:a=>a.arcs.map((n,s)=>{let{data:c}=n,[o,i]=a.path.centroid(n),d=R(c.Wallets,t),u=d>5,h=r(c.Sol_change_cohort);return(0,l.jsxs)("g",{onMouseMove:t=>W(!0,c,t,e),onMouseLeave:()=>W(!1,null,null,e),children:[(0,l.jsx)("path",{d:a.path(n)||"",fill:h,stroke:"#000",strokeWidth:.5,strokeOpacity:.3}),u&&(0,l.jsx)("text",{fill:"white",x:o,y:i,dy:".33em",fontSize:10,textAnchor:"middle",pointerEvents:"none",children:"".concat(d.toFixed(0),"%")})]},"pie-arc-".concat(s))})})})})}})]})};return(0,l.jsxs)("div",{className:"h-full w-full relative",ref:k,children:[M(!1),t&&(0,l.jsx)(x.A,{isOpen:t,onClose:r,title:"SOL Balance Change Distribution",subtitle:"Wallets grouped by SOL balance change ranges",children:(0,l.jsx)("div",{className:"h-[60vh]",children:(0,l.jsxs)("div",{className:"flex h-full",children:[(0,l.jsx)("div",{className:"w-[75%] h-full pr-3 border-r border-gray-900 relative",children:M(!0)}),(0,l.jsx)("div",{className:"w-[25%] pl-3",children:(0,l.jsxs)("div",{className:"flex flex-col gap-5 pt-1 h-full overflow-hidden",children:[(0,l.jsxs)("div",{className:"flex justify-between items-center",children:[(0,l.jsx)("h4",{className:"text-xs font-semibold text-gray-300",children:"Change Cohorts"}),(0,l.jsx)("button",{onClick:()=>{let e=t?j:m,r=new Blob([["SOL Change Cohort,Wallets,Percentage",...e.map(t=>{let r=R(t.Wallets,e).toFixed(1);return['"'.concat(t.Sol_change_cohort,'"'),t.Wallets,"".concat(r,"%")].join(",")})].join("\n")],{type:"text/csv;charset=utf-8;"}),l=URL.createObjectURL(r),a=document.createElement("a");a.setAttribute("href",l),a.setAttribute("download","sol_change_cohorts_".concat(new Date().toISOString().split("T")[0],".csv")),document.body.appendChild(a),a.click(),document.body.removeChild(a)},className:"text-xs text-blue-400 hover:text-blue-300 transition-colors",children:"Download CSV"})]}),(0,l.jsx)("div",{className:"flex flex-col gap-2 max-h-[52vh] overflow-y-auto pr-1 [&::-webkit-scrollbar]:w-1.5  [&::-webkit-scrollbar-track]:bg-transparent  [&::-webkit-scrollbar-thumb]:bg-gray-700/40 [&::-webkit-scrollbar-thumb]:rounded-full [&::-webkit-scrollbar-thumb]:hover:bg-gray-600/60 scrollbar-thin scrollbar-track-transparent scrollbar-thumb-gray-700/40",children:function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=e?j:m;return(e?N:p)||0===t.length?(0,l.jsx)("div",{className:"flex flex-col gap-2",children:(0,l.jsxs)("div",{className:"flex items-start",children:[(0,l.jsx)("div",{className:"w-2.5 h-2.5 bg-blue-500 mr-2 rounded-sm mt-0.5 animate-pulse"}),(0,l.jsx)("span",{className:"text-[11px] text-gray-300",children:"Loading..."})]})}):(0,l.jsx)("div",{className:"flex flex-col gap-2 max-h-[60vh] overflow-y-auto overflow-x-hidden pr-1",children:t.map((e,r)=>(0,l.jsxs)("div",{className:"flex items-start",children:[(0,l.jsx)("div",{className:"w-2.5 h-2.5 mr-2 rounded-sm mt-0.5 flex-shrink-0",style:{background:i.a[e.Sol_change_cohort]}}),(0,l.jsx)("div",{className:"flex flex-col",children:(0,l.jsxs)("span",{className:"text-[11px] text-gray-300 break-words",children:[e.Sol_change_cohort," ",(0,l.jsxs)("span",{className:"text-gray-400",children:["(",R(e.Wallets,t).toFixed(1),"%)"]})]})})]},"legend-".concat(e.Sol_change_cohort,"-").concat(r)))})}(!0)})]})})]})})})]})}},7545:(e,t,r)=>{r.d(t,{A:()=>a});var l=r(95155);r(12115);let a=e=>{let{onClick:t,children:r,className:a="",disabled:n=!1}=e;return(0,l.jsx)("button",{onClick:t,disabled:n,className:"\n        px-2 py-1 \n        bg-gray-800/20 hover:bg-gray-700/20 \n        text-gray-200/80 \n        rounded \n        text-xs leading-relaxed tracking-wide\n        transition-colors duration-200 \n        border border-gray-700/40 \n        flex items-center justify-center\n        disabled:opacity-50 disabled:pointer-events-none\n        ".concat(a,"\n      "),children:r})}},41545:(e,t,r)=>{r.d(t,{A:()=>d});var l=r(12115),a=r(29300),n=r.n(a),s=r(41995),c=r(35083),o=["className","top","left","data","centroid","innerRadius","outerRadius","cornerRadius","startAngle","endAngle","padAngle","padRadius","pieSort","pieSortValues","pieValue","children","fill"];function i(){return(i=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var l in r)Object.prototype.hasOwnProperty.call(r,l)&&(e[l]=r[l])}return e}).apply(this,arguments)}function d(e){var t=e.className,r=e.top,a=e.left,d=e.data,u=e.centroid,h=e.innerRadius,x=e.outerRadius,f=e.cornerRadius,m=e.startAngle,g=e.endAngle,p=e.padAngle,b=e.padRadius,v=e.pieSort,y=e.pieSortValues,j=e.pieValue,w=e.children,N=e.fill,S=void 0===N?"":N,k=function(e,t){if(null==e)return{};var r,l,a={},n=Object.keys(e);for(l=0;l<n.length;l++)r=n[l],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,o),L=(0,c.JL)({innerRadius:void 0===h?0:h,outerRadius:x,cornerRadius:f,padRadius:b}),A=(0,c.rL)({startAngle:m,endAngle:g,padAngle:p,value:j,sort:v,sortValues:y}),C=A(void 0===d?[]:d);return w?l.createElement(l.Fragment,null,w({arcs:C,path:L,pie:A})):l.createElement(s.A,{className:"visx-pie-arcs-group",top:r,left:a},C.map(function(e,r){return l.createElement("g",{key:"pie-arc-"+r},l.createElement("path",i({className:n()("visx-pie-arc",t),d:L(e)||"",fill:null==S||"string"==typeof S?S:S(e)},k)),null==u?void 0:u(L.centroid(e),e))}))}},52594:(e,t,r)=>{r.d(t,{A:()=>o,B:()=>c});var l=r(95155),a=r(12115),n=r(47650),s=r(51078);let c=e=>{let{title:t,items:r,maxHeight:a=600,maxItems:n=28}=e,s=r.length>n;return(0,l.jsxs)("div",{className:"flex flex-col h-full",children:[t&&(0,l.jsx)("div",{className:"text-[10px] text-gray-400 mb-2 uppercase",children:t}),(0,l.jsx)("div",{style:{maxHeight:s?"".concat(a,"px"):"none"},className:"flex flex-col gap-3 pr-1 ".concat(s?"overflow-y-auto \n          [&::-webkit-scrollbar]:w-1.5 \n          [&::-webkit-scrollbar-track]:bg-transparent \n          [&::-webkit-scrollbar-thumb]:bg-gray-700/40\n          [&::-webkit-scrollbar-thumb]:rounded-full\n          [&::-webkit-scrollbar-thumb]:hover:bg-gray-600/60\n          scrollbar-thin scrollbar-track-transparent scrollbar-thumb-gray-700/40":""),children:r.map(e=>(0,l.jsxs)("div",{className:"flex items-center",children:[(0,l.jsx)("div",{className:"min-w-2 w-2 h-2 mr-1.5 rounded-sm mt-0 flex-shrink-0",style:{backgroundColor:e.color}}),(0,l.jsxs)("div",{className:"flex flex-col",children:[(0,l.jsx)("span",{className:"text-[11px] text-gray-300 leading-none",children:e.label}),e.value&&(0,l.jsx)("span",{className:"text-[10px] text-gray-500",children:e.value})]})]},e.id))})]})},o=e=>{let{isOpen:t,onClose:r,children:c,title:o,subtitle:i,isLoading:d=!1}=e,u=(0,a.useRef)(null);return((0,a.useEffect)(()=>{if(!t)return;let e=e=>{"Escape"===e.key&&r()};return document.addEventListener("keydown",e),document.body.style.overflow="hidden",()=>{document.removeEventListener("keydown",e),document.body.style.overflow=""}},[t,r]),t)?n.createPortal((0,l.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/80 backdrop-blur-sm modal-backdrop",children:(0,l.jsxs)("div",{ref:u,className:"relative bg-black/80 border border-gray-900 rounded-xl p-4 w-11/12 max-w-7xl flex flex-col shadow-xl",children:[(0,l.jsxs)("div",{className:"flex justify-between items-center mb-4 pb-3 border-b border-gray-900",children:[(0,l.jsxs)("div",{children:[o&&(0,l.jsx)("h2",{className:"text-[16px] font-medium text-gray-100",children:o}),i&&(0,l.jsx)("p",{className:"text-gray-500 text-[12px] tracking-wide mt-1",children:i})]}),(0,l.jsx)("button",{onClick:r,className:"bg-gray-800 hover:bg-gray-700 rounded-full p-1.5 text-gray-400 hover:text-white transition-colors","aria-label":"Close modal",children:(0,l.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:(0,l.jsx)("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})})]}),(0,l.jsxs)("div",{className:"flex-1 relative",children:[c,d&&(0,l.jsx)("div",{className:"absolute inset-0 flex items-center justify-center bg-black/60 backdrop-blur-sm z-10 rounded-md",children:(0,l.jsx)(s.A,{size:"md"})})]})]})}),document.body):null}},78398:(e,t,r)=>{r.d(t,{A:()=>n});var l=r(95442),a=(0,r(70222).A)("domain","range","reverse","unknown");function n(e){return a((0,l.A)(),e)}},81838:(e,t,r)=>{r.d(t,{A:()=>c});var l=r(95155);r(12115);let a=e=>{let{type:t,color:r}=e;return"circle"===t?(0,l.jsx)("div",{className:"h-2 w-2 rounded-full mr-1.5",style:{backgroundColor:r}}):(0,l.jsx)("div",{className:"h-2 w-2 rounded-sm mr-1.5",style:{backgroundColor:r}})},n=(e,t)=>{if(/^\d{4}-\d{2}-\d{2}/.test(e)||/^\d{2}\/\d{2}\/\d{4}/.test(e)){let r=new Date(e);if(!isNaN(r.getTime())){if("W"===t)return"Week of ".concat(r.toLocaleDateString("en-US",{month:"short",day:"2-digit",year:"numeric"}));if("M"===t)return r.toLocaleDateString("en-US",{month:"short",year:"numeric"});if("Q"===t){let e=Math.floor(r.getMonth()/3)+1;return"Q".concat(e,", ").concat(r.getFullYear())}else if("Y"===t)return r.getFullYear().toString();return r.toLocaleDateString("en-US",{month:"short",day:"2-digit",year:"numeric"})}}return/^[A-Za-z]{3}\s\d{4}$/.test(e)||/^Q[1-4]\s\d{4}$/.test(e)||/^\d{4}$/.test(e),e},s=(e,t)=>{if("string"==typeof e){if(t){let r={USD:"$",EUR:"€",GBP:"\xa3",JPY:"\xa5",CNY:"\xa5",SOL:"SOL"},l=r[t]||t;if("SOL"===t){if(e.includes("SOL"))return e;for(let[t,l]of Object.entries(r))if("SOL"!==t&&e.startsWith(l))return"".concat(e.substring(l.length)," SOL");return"".concat(e," SOL")}for(let[a,n]of Object.entries(r))if(e.startsWith(n)&&a!==t)return e.replace(n,l)}return e}if("number"==typeof e){if(t)switch(t){case"USD":return"$".concat(e.toLocaleString());case"EUR":return"€".concat(e.toLocaleString());case"GBP":return"\xa3".concat(e.toLocaleString());case"JPY":case"CNY":return"\xa5".concat(e.toLocaleString());case"SOL":return"".concat(e.toLocaleString()," SOL");default:return"".concat(t).concat(e.toLocaleString())}return e.toLocaleString()}return String(e)},c=e=>{let{title:t,items:r,top:c,left:o,isModal:i=!1,timeFilter:d,currencyFilter:u}=e,h=r.some(e=>e.axis),x=n(t,d);return(0,l.jsxs)("div",{className:"absolute z-10 pointer-events-none bg-gray-900/95 shadow-lg border border-gray-800 rounded-md p-2 text-xs min-w-[120px]",style:{top:"".concat(c,"px"),left:o>(i?500:250)?"".concat(o-160,"px"):"".concat(o+10,"px"),transform:"translateY(-100%)"},children:[(0,l.jsx)("div",{className:"text-gray-400 text-[10px] font-normal pb-1 mb-1 border-b border-gray-800",children:x}),(0,l.jsx)("div",{className:"space-y-1",children:r.map((e,t)=>(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsxs)("div",{className:"flex items-center text-gray-400",children:[(0,l.jsx)(a,{type:e.shape||"circle",color:e.color}),(0,l.jsx)("span",{className:"text-gray-400 font-normal ml-2",children:e.label}),h&&e.axis&&(0,l.jsxs)("span",{className:"ml-1 text-[9px] text-gray-500",children:["(",e.axis," axis)"]})]}),(0,l.jsx)("span",{className:"text-gray-300 font-normal ml-4",children:s(e.value,u)})]},"tooltip-item-".concat(t)))})]})}},95442:(e,t,r)=>{r.d(t,{A:()=>function e(){var t=new l,r=[],a=[],n=c;function o(e){let l=t.get(e);if(void 0===l){if(n!==c)return n;t.set(e,l=r.push(e)-1)}return a[l%a.length]}return o.domain=function(e){if(!arguments.length)return r.slice();for(let a of(r=[],t=new l,e))t.has(a)||t.set(a,r.push(a)-1);return o},o.range=function(e){return arguments.length?(a=Array.from(e),o):a.slice()},o.unknown=function(e){return arguments.length?(n=e,o):n},o.copy=function(){return e(r,a).unknown(n)},s.C.apply(o,arguments),o}});class l extends Map{constructor(e,t=n){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:t}}),null!=e)for(let[t,r]of e)this.set(t,r)}get(e){return super.get(a(this,e))}has(e){return super.has(a(this,e))}set(e,t){return super.set(function({_intern:e,_key:t},r){let l=t(r);return e.has(l)?e.get(l):(e.set(l,r),r)}(this,e),t)}delete(e){return super.delete(function({_intern:e,_key:t},r){let l=t(r);return e.has(l)&&(r=e.get(l),e.delete(l)),r}(this,e))}}function a({_intern:e,_key:t},r){let l=t(r);return e.has(l)?e.get(l):r}function n(e){return null!==e&&"object"==typeof e?e.valueOf():e}var s=r(28749);let c=Symbol("implicit")}}]);