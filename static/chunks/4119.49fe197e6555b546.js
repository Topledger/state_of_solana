"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4119,5561],{35561:(e,t,a)=>{async function n(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"M";try{let t=await fetch("https://analytics.topledger.xyz/tl/api/queries/12976/results?api_key=0pzEmBGojQAV7yWcJEbd0VhJ6FGpKAk04jztTwSp",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({parameters:{"Date Part":e}}),cache:"no-store"});if(!t.ok)throw Error("Failed to fetch transaction stats data: ".concat(t.status));return(await t.json()).query_result.data.rows.map(e=>({block_date:e.block_date,Total_Transactions:e.Total_Transactions,Total_Vote_Transactions:e.Total_Vote_Transactions,Total_Non_Vote_Transactions:e.Total_Non_Vote_Transactions,Succeesful_Transactions_perc:e.Succeesful_Transactions_perc,Successful_Non_Vote_Transactiosn_perc:e.Successful_Non_Vote_Transactiosn_perc})).sort((e,t)=>new Date(e.block_date).getTime()-new Date(t.block_date).getTime())}catch(e){throw console.error("Error fetching transaction stats data:",e),e}}function s(e){return null==e?"0.00%":"".concat(e.toFixed(2),"%")}function o(e){return null==e?"0":e>=1e9?"".concat((e/1e9).toFixed(2),"B"):e>=1e6?"".concat((e/1e6).toFixed(2),"M"):e>=1e3?"".concat((e/1e3).toFixed(2),"K"):e.toFixed(0)}a.d(t,{E:()=>s,Z:()=>o,fetchTxnStatsData:()=>n})},45191:(e,t,a)=>{a.d(t,{A:()=>r});var n=a(28749),s=a(95442),o=(0,a(70222).A)("domain","range","reverse","align","padding","round");function r(e){return o(function e(){var t,a,o=(0,s.A)().unknown(void 0),r=o.domain,c=o.range,l=0,i=1,u=!1,_=0,d=0,f=.5;function h(){var e=r().length,n=i<l,s=n?i:l,o=n?l:i;t=(o-s)/Math.max(1,e-_+2*d),u&&(t=Math.floor(t)),s+=(o-s-t*(e-_))*f,a=t*(1-_),u&&(s=Math.round(s),a=Math.round(a));var h=(function(e,t,a){e*=1,t*=1,a=(s=arguments.length)<2?(t=e,e=0,1):s<3?1:+a;for(var n=-1,s=0|Math.max(0,Math.ceil((t-e)/a)),o=Array(s);++n<s;)o[n]=e+n*a;return o})(e).map(function(e){return s+t*e});return c(n?h.reverse():h)}return delete o.unknown,o.domain=function(e){return arguments.length?(r(e),h()):r()},o.range=function(e){return arguments.length?([l,i]=e,l*=1,i*=1,h()):[l,i]},o.rangeRound=function(e){return[l,i]=e,l*=1,i*=1,u=!0,h()},o.bandwidth=function(){return a},o.step=function(){return t},o.round=function(e){return arguments.length?(u=!!e,h()):u},o.padding=function(e){return arguments.length?(_=Math.min(1,d=+e),h()):_},o.paddingInner=function(e){return arguments.length?(_=Math.min(1,e),h()):_},o.paddingOuter=function(e){return arguments.length?(d=+e,h()):d},o.align=function(e){return arguments.length?(f=Math.max(0,Math.min(1,e)),h()):f},o.copy=function(){return e(r(),[l,i]).round(u).paddingInner(_).paddingOuter(d).align(f)},n.C.apply(h(),arguments)}(),e)}},64119:(e,t,a)=>{a.r(t),a.d(t,{default:()=>E});var n=a(95155),s=a(12115),o=a(71734),r=a(13600),c=a(76167),l=a(30832),i=a(4904),u=a(45191),_=a(41995),d=a(72630),f=a(58888),h=a(50109),T=a(79111),p=a(35561),x=a(51078),m=a(7545),g=a(52594),b=a(37918),N=a(79701),S=a(2365),j=a(59722),k=a(73879),v=a(43356),V=a(57815),y=a(6828);let w=e=>{let{className:t="w-4 h-4"}=e;return(0,n.jsx)("svg",{className:t,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})})},A={Total_Vote_Transactions:y.z1,Total_Non_Vote_Transactions:y.wL,Succeesful_Transactions_perc:y.wv,Successful_Non_Vote_Transactiosn_perc:y.Zp},M={Total_Vote_Transactions:"Vote Transactions",Total_Non_Vote_Transactions:"Non-Vote Transactions",Succeesful_Transactions_perc:"Success Rate (%)",Successful_Non_Vote_Transactiosn_perc:"Non-Vote Success Rate (%)"},D=y.Dc,C=y.Vg,E=e=>{let{isModalOpen:t=!1,onModalClose:a=()=>{},timeView:y,onTimeViewChange:E}=e,[O,F]=(0,s.useState)([]),[R,L]=(0,s.useState)(!0),[z,P]=(0,s.useState)(null),[W,Q]=(0,s.useState)({Total_Vote_Transactions:!0,Total_Non_Vote_Transactions:!0,Succeesful_Transactions_perc:!0,Successful_Non_Vote_Transactiosn_perc:!0}),[Z,B]=(0,s.useState)([]),[G,I]=(0,s.useState)(!0),[Y,J]=(0,s.useState)(y),U=(0,s.useRef)(null),q=(0,s.useRef)(null),[H,K]=(0,s.useState)(!0),[X,$]=(0,s.useState)(!0),{tooltipData:ee,tooltipLeft:et,tooltipTop:ea,tooltipOpen:en,showTooltip:es,hideTooltip:eo}=(0,k.A)(),er=(0,s.useCallback)(async e=>{L(!0),P(null);try{let t=await (0,p.fetchTxnStatsData)(e);0===t.length?(P("No data available for transaction statistics."),F([])):F(t)}catch(e){P(e instanceof Error?e.message:"Failed to load data."),F([])}finally{L(!1)}},[]),ec=(0,s.useCallback)(async e=>{I(!0);try{let t=await (0,p.fetchTxnStatsData)(e);0===t.length?B([]):B(t)}catch(e){console.error("Error loading modal chart data:",e)}finally{I(!1)}},[]);(0,s.useEffect)(()=>{er(y)},[er,y]),(0,s.useEffect)(()=>{t&&(J(y),I(!0),O.length>0?(B(O),I(!1)):(0,p.fetchTxnStatsData)(y).then(e=>{B(e)}).catch(e=>{console.error("Error loading modal chart data:",e)}).finally(()=>{I(!1)}))},[t,O,y]);let el=(0,s.useCallback)((e,t)=>{let a=new Date(e);if("M"===t)return a.toLocaleDateString("en-US",{month:"short",year:"numeric"});if("Q"!==t)return a.getFullYear().toString();{let e=Math.floor(a.getMonth()/3)+1;return"Q".concat(e," ").concat(a.getFullYear())}},[]),ei=(0,s.useCallback)((e,t,a,n,s,o,r,c,l)=>{let i=((0,j.A)(e)||{x:0,y:0}).x-c.left;if(s.length>0){let e=s.map(e=>new Date(e.block_date).getTime()),a=t.invert(i).getTime(),o=0,r=Math.abs(e[0]-a);for(let t=1;t<e.length;t++){let n=Math.abs(e[t]-a);n<r&&(r=n,o=t)}let l=s[o],u=t(new Date(l.block_date)),_=n(Math.max(W.Succeesful_Transactions_perc&&l.Succeesful_Transactions_perc?l.Succeesful_Transactions_perc:0,W.Successful_Non_Vote_Transactiosn_perc&&l.Successful_Non_Vote_Transactiosn_perc?l.Successful_Non_Vote_Transactiosn_perc:0));es({tooltipData:l,tooltipLeft:u+c.left,tooltipTop:_+c.top})}},[es,W]),eu=e=>{if(Q(t=>({...t,[e]:!t[e]})),"Total_Vote_Transactions"===e||"Total_Non_Vote_Transactions"===e){let t="Total_Vote_Transactions"===e?"Total_Non_Vote_Transactions":"Total_Vote_Transactions";W[e]||W[t]?W[e]&&!W[t]&&K(!1):K(!0)}else if("Succeesful_Transactions_perc"===e||"Successful_Non_Vote_Transactiosn_perc"===e){let t="Succeesful_Transactions_perc"===e?"Successful_Non_Vote_Transactiosn_perc":"Succeesful_Transactions_perc";W[e]||W[t]?W[e]&&!W[t]&&$(!1):$(!0)}},e_=function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=e?Z:O,a=e?G:R,g=e?Y:y,b={top:20,right:60,bottom:50,left:e?80:60};return a?(0,n.jsx)("div",{className:"flex justify-center items-center h-full",children:(0,n.jsx)(x.A,{size:"sm"})}):z||0===t.length?(0,n.jsxs)("div",{className:"flex flex-col justify-center items-center h-full",children:[(0,n.jsx)("p",{className:"text-red-400 mb-3 text-sm",children:z||"No data available"}),(0,n.jsx)(m.A,{onClick:e?()=>ec(Y):()=>er(y),children:(0,n.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,n.jsx)(w,{className:"w-3.5 h-3.5"}),(0,n.jsx)("span",{children:"Retry"})]})})]}):(0,n.jsxs)("div",{className:"relative h-full w-full",ref:e?q:U,children:[(0,n.jsx)(T.A,{children:a=>{let{width:T,height:x}=a,m=T-b.left-b.right,j=x-b.top-b.bottom,k=(0,l.A)({domain:(0,N.A)(t,e=>new Date(e.block_date)),range:[0,m]}),y=(0,i.A)({domain:[0,1.1*(0,S.A)(t,e=>Math.max(W.Total_Vote_Transactions&&e.Total_Vote_Transactions?e.Total_Vote_Transactions:0,W.Total_Non_Vote_Transactions&&e.Total_Non_Vote_Transactions?e.Total_Non_Vote_Transactions:0))],range:[j,0],nice:!0}),w=(0,i.A)({domain:[0,100],range:[j,0],nice:!0}),M=Math.min((0,u.A)({domain:t.map(e=>e.block_date),range:[0,m],padding:.2}).bandwidth()/2,15);return(0,n.jsxs)("div",{children:[(0,n.jsx)("svg",{width:T,height:x,children:(0,n.jsxs)(_.A,{left:b.left,top:b.top,children:[(0,n.jsx)(h.A,{scale:y,width:m,height:j,stroke:C,numTicks:5}),t.map((e,t)=>{let a=k(new Date(e.block_date));return(0,n.jsxs)(s.Fragment,{children:[W.Total_Vote_Transactions&&(0,n.jsx)(o.A,{x:a-M-1,y:y(e.Total_Vote_Transactions||0),width:M,height:j-y(e.Total_Vote_Transactions||0),fill:A.Total_Vote_Transactions,opacity:.8}),W.Total_Non_Vote_Transactions&&(0,n.jsx)(o.A,{x:a+1,y:y(e.Total_Non_Vote_Transactions||0),width:M,height:j-y(e.Total_Non_Vote_Transactions||0),fill:A.Total_Non_Vote_Transactions,opacity:.8})]},"bars-".concat(t))}),W.Succeesful_Transactions_perc&&(0,n.jsx)(r.A,{data:t,x:e=>k(new Date(e.block_date)),y:e=>w(e.Succeesful_Transactions_perc||0),stroke:A.Succeesful_Transactions_perc,strokeWidth:2.5,strokeDasharray:"4,4",curve:c.G}),W.Successful_Non_Vote_Transactiosn_perc&&(0,n.jsx)(r.A,{data:t,x:e=>k(new Date(e.block_date)),y:e=>w(e.Successful_Non_Vote_Transactiosn_perc||0),stroke:A.Successful_Non_Vote_Transactiosn_perc,strokeWidth:2.5,strokeDasharray:"4,4",curve:c.G}),(0,n.jsx)(d.A,{top:j,scale:k,numTicks:e?10:5,stroke:D,tickStroke:D,tickLabelProps:()=>({fill:D,fontSize:10,textAnchor:"middle",dy:"0.5em"}),tickFormat:e=>e instanceof Date?el(e.toISOString(),g):""}),H&&(0,n.jsx)(f.A,{scale:y,numTicks:5,stroke:D,tickStroke:D,tickLabelProps:()=>({fill:D,fontSize:10,textAnchor:"end",dx:"-0.5em",dy:"0.3em"}),tickFormat:e=>(0,p.Z)("number"==typeof e?e:Number(e))}),X&&(0,n.jsx)(_.A,{left:m,children:(0,n.jsx)(f.A,{scale:w,numTicks:5,stroke:D,tickStroke:D,tickLabelProps:()=>({fill:D,fontSize:10,textAnchor:"start",dx:"0.5em",dy:"0.3em"}),tickFormat:e=>"".concat(e,"%")})}),(0,n.jsx)("rect",{x:0,y:0,width:m,height:j,fill:"transparent",onMouseMove:a=>ei(a,k,y,w,t,T,x,b,e),onMouseLeave:()=>eo()}),en&&ee&&(0,n.jsxs)(n.Fragment,{children:[W.Succeesful_Transactions_perc&&(0,n.jsx)("circle",{cx:k(new Date(ee.block_date)),cy:w(ee.Succeesful_Transactions_perc||0),r:4,fill:A.Succeesful_Transactions_perc,stroke:"white",strokeWidth:2,pointerEvents:"none"}),W.Successful_Non_Vote_Transactiosn_perc&&(0,n.jsx)("circle",{cx:k(new Date(ee.block_date)),cy:w(ee.Successful_Non_Vote_Transactiosn_perc||0),r:4,fill:A.Successful_Non_Vote_Transactiosn_perc,stroke:"white",strokeWidth:2,pointerEvents:"none"})]})]})}),(0,n.jsx)("div",{className:"text-center text-gray-400 text-xs mt-2",children:"Date"}),(0,n.jsx)("div",{className:"absolute text-gray-400 text-xs",style:{left:0,top:"50%",transform:"rotate(-90deg) translateX(50%)",transformOrigin:"left center"},children:"Number of Transactions"}),X&&(0,n.jsx)("div",{className:"absolute text-gray-400 text-xs",style:{right:0,top:"50%",transform:"rotate(90deg) translateX(-50%)",transformOrigin:"right center"},children:"Success Rate (%)"}),en&&ee&&(0,n.jsxs)(V.A,{top:ea,left:et,style:{...v.k,background:"#1F2937",border:"none",borderRadius:"0.5rem",color:"white",padding:"0.75rem",boxShadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06)"},children:[(0,n.jsx)("div",{className:"text-sm font-medium mb-2",children:el(ee.block_date,g)}),W.Total_Vote_Transactions&&(0,n.jsxs)("div",{className:"flex items-center gap-1 mb-1",children:[(0,n.jsx)("div",{className:"w-2 h-2 rounded-sm",style:{backgroundColor:A.Total_Vote_Transactions}}),(0,n.jsxs)("span",{className:"text-xs",children:["Vote Txns: ",(0,p.Z)(ee.Total_Vote_Transactions)]})]}),W.Total_Non_Vote_Transactions&&(0,n.jsxs)("div",{className:"flex items-center gap-1 mb-1",children:[(0,n.jsx)("div",{className:"w-2 h-2 rounded-sm",style:{backgroundColor:A.Total_Non_Vote_Transactions}}),(0,n.jsxs)("span",{className:"text-xs",children:["Non-Vote Txns: ",(0,p.Z)(ee.Total_Non_Vote_Transactions)]})]}),W.Succeesful_Transactions_perc&&(0,n.jsxs)("div",{className:"flex items-center gap-1 mb-1",children:[(0,n.jsx)("div",{className:"w-2 h-2 rounded-full",style:{backgroundColor:A.Succeesful_Transactions_perc}}),(0,n.jsxs)("span",{className:"text-xs",children:["Success Rate: ",(0,p.E)(ee.Succeesful_Transactions_perc)]})]}),W.Successful_Non_Vote_Transactiosn_perc&&(0,n.jsxs)("div",{className:"flex items-center gap-1",children:[(0,n.jsx)("div",{className:"w-2 h-2 rounded-full",style:{backgroundColor:A.Successful_Non_Vote_Transactiosn_perc}}),(0,n.jsxs)("span",{className:"text-xs",children:["Non-Vote Success: ",(0,p.E)(ee.Successful_Non_Vote_Transactiosn_perc)]})]})]},Math.random())]})}}),e&&(0,n.jsx)("div",{className:"flex flex-wrap gap-4 mt-4 justify-center",children:Object.entries(M).map(e=>{let[t,a]=e;return(0,n.jsxs)("button",{className:"flex items-center gap-1 px-2 py-1 rounded-md text-xs transition ".concat(W[t]?"bg-gray-800":"bg-gray-900 opacity-50"),onClick:()=>eu(t),children:[(0,n.jsx)("div",{className:"w-3 h-3 ".concat(t.includes("perc")?"rounded-full border border-current bg-transparent":"rounded-sm"),style:{backgroundColor:t.includes("perc")?"transparent":A[t],borderColor:t.includes("perc")?A[t]:"transparent"}}),(0,n.jsx)("span",{children:a})]},t)})})]})};return(0,n.jsxs)("div",{className:"h-full w-full relative",ref:U,children:[e_(!1),t&&(0,n.jsx)(g.A,{isOpen:t,onClose:a,title:"Transaction Statistics",subtitle:"Transaction volumes and success rates over time",children:(0,n.jsxs)("div",{className:"h-[70vh]",children:[(0,n.jsxs)("div",{className:"flex justify-between mb-4",children:[(0,n.jsx)(b.A,{value:Y,onChange:e=>{J(e),ec(e)},options:[{value:"M",label:"M"},{value:"Q",label:"Q"},{value:"Y",label:"Y"}]}),(0,n.jsx)("button",{onClick:()=>{let e=t?Z:O,a=t?Y:y,n=new Blob([["Date,Total Transactions,Vote Transactions,Non-Vote Transactions,Success Rate (%),Non-Vote Success Rate (%)",...e.map(e=>[el(e.block_date,a),e.Total_Transactions,e.Total_Vote_Transactions,e.Total_Non_Vote_Transactions,e.Succeesful_Transactions_perc,e.Successful_Non_Vote_Transactiosn_perc].join(","))].join("\n")],{type:"text/csv;charset=utf-8;"}),s=URL.createObjectURL(n),o=document.createElement("a");o.setAttribute("href",s),o.setAttribute("download","solana_txn_stats_".concat(a,"_").concat(new Date().toISOString().split("T")[0],".csv")),document.body.appendChild(o),o.click(),document.body.removeChild(o)},className:"px-4 py-2 bg-gray-800 hover:bg-gray-700 text-xs rounded-md text-blue-400 hover:text-blue-300 transition-colors",children:"Download CSV"})]}),(0,n.jsx)("div",{className:"h-[calc(100%-3rem)]",children:e_(!0)})]})})]})}},71734:(e,t,a)=>{a.d(t,{A:()=>l});var n=a(12115),s=a(29300),o=a.n(s),r=["className","innerRef"];function c(){return(c=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function l(e){var t=e.className,a=e.innerRef,s=function(e,t){if(null==e)return{};var a,n,s={},o=Object.keys(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||(s[a]=e[a]);return s}(e,r);return n.createElement("rect",c({ref:a,className:o()("visx-bar",t)},s))}}}]);