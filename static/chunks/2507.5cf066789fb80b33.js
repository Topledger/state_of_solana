"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2341,2507],{12341:(e,t,n)=>{n.d(t,{Gy:()=>a,fetchDexVolumeData:()=>i,formatCurrency:()=>l});let r={USDC:"#2775ca",USDT:"#26a17b",USDe:"#8a2be2",USDY:"#f5ac37",EURC:"#0052ff",EUROe:"#3b82f6",PYUSD:"#0070ba",FDUSD:"#00a3e0",AUSD:"#f43f5e",USDS:"#10b981",sUSD:"#64748b",USDG:"#fbbf24"},a=e=>r[e]||"#6b7280",l=e=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",notation:"compact",compactDisplay:"short",maximumFractionDigits:1}).format(e);async function i(){try{let e=await fetch("https://analytics.topledger.xyz/tl/api/queries/12795/results.json?api_key=xIeiFus6bymtdn5zq2EGXVHr9XcapwmMXoLdvW7R");if(!e.ok)throw Error("API request failed with status ".concat(e.status));return(await e.json()).query_result.data.rows.map(e=>({month:e.month,mint:e.mint,Dex_Volume:e.Dex_Volume||0,date:new Date(e.month)})).sort((e,t)=>{if(e.date&&t.date){let n=e.date.getTime()-t.date.getTime();if(0!==n)return n}return e.mint.localeCompare(t.mint)})}catch(e){throw console.error("Error fetching DEX volume data:",e),e}}},45191:(e,t,n)=>{n.d(t,{A:()=>i});var r=n(28749),a=n(95442),l=(0,n(70222).A)("domain","range","reverse","align","padding","round");function i(e){return l(function e(){var t,n,l=(0,a.A)().unknown(void 0),i=l.domain,o=l.range,s=0,c=1,u=!1,h=0,d=0,f=.5;function m(){var e=i().length,r=c<s,a=r?c:s,l=r?s:c;t=(l-a)/Math.max(1,e-h+2*d),u&&(t=Math.floor(t)),a+=(l-a-t*(e-h))*f,n=t*(1-h),u&&(a=Math.round(a),n=Math.round(n));var m=(function(e,t,n){e*=1,t*=1,n=(a=arguments.length)<2?(t=e,e=0,1):a<3?1:+n;for(var r=-1,a=0|Math.max(0,Math.ceil((t-e)/n)),l=Array(a);++r<a;)l[r]=e+r*n;return l})(e).map(function(e){return a+t*e});return o(r?m.reverse():m)}return delete l.unknown,l.domain=function(e){return arguments.length?(i(e),m()):i()},l.range=function(e){return arguments.length?([s,c]=e,s*=1,c*=1,m()):[s,c]},l.rangeRound=function(e){return[s,c]=e,s*=1,c*=1,u=!0,m()},l.bandwidth=function(){return n},l.step=function(){return t},l.round=function(e){return arguments.length?(u=!!e,m()):u},l.padding=function(e){return arguments.length?(h=Math.min(1,d=+e),m()):h},l.paddingInner=function(e){return arguments.length?(h=Math.min(1,e),m()):h},l.paddingOuter=function(e){return arguments.length?(d=+e,m()):d},l.align=function(e){return arguments.length?(f=Math.max(0,Math.min(1,e)),m()):f},l.copy=function(){return e(i(),[s,c]).round(u).paddingInner(h).paddingOuter(d).align(f)},r.C.apply(m(),arguments)}(),e)}},78398:(e,t,n)=>{n.d(t,{A:()=>l});var r=n(95442),a=(0,n(70222).A)("domain","range","reverse","unknown");function l(e){return a((0,r.A)(),e)}},81838:(e,t,n)=>{n.d(t,{A:()=>o});var r=n(95155);n(12115);let a=e=>{let{type:t,color:n}=e;return"circle"===t?(0,r.jsx)("div",{className:"h-2 w-2 rounded-full mr-1.5",style:{backgroundColor:n}}):(0,r.jsx)("div",{className:"h-2 w-2 rounded-sm mr-1.5",style:{backgroundColor:n}})},l=(e,t)=>{if(/^\d{4}-\d{2}-\d{2}/.test(e)||/^\d{2}\/\d{2}\/\d{4}/.test(e)){let n=new Date(e);if(!isNaN(n.getTime())){if("W"===t)return"Week of ".concat(n.toLocaleDateString("en-US",{month:"short",day:"2-digit",year:"numeric"}));if("M"===t)return n.toLocaleDateString("en-US",{month:"short",year:"numeric"});if("Q"===t){let e=Math.floor(n.getMonth()/3)+1;return"Q".concat(e,", ").concat(n.getFullYear())}else if("Y"===t)return n.getFullYear().toString();return n.toLocaleDateString("en-US",{month:"short",day:"2-digit",year:"numeric"})}}return/^[A-Za-z]{3}\s\d{4}$/.test(e)||/^Q[1-4]\s\d{4}$/.test(e)||/^\d{4}$/.test(e),e},i=(e,t)=>{if("string"==typeof e){if(t){let n={USD:"$",EUR:"€",GBP:"\xa3",JPY:"\xa5",CNY:"\xa5",SOL:"SOL"},r=n[t]||t;if("SOL"===t){if(e.includes("SOL"))return e;for(let[t,r]of Object.entries(n))if("SOL"!==t&&e.startsWith(r))return"".concat(e.substring(r.length)," SOL");return"".concat(e," SOL")}for(let[a,l]of Object.entries(n))if(e.startsWith(l)&&a!==t)return e.replace(l,r)}return e}if("number"==typeof e){if(t)switch(t){case"USD":return"$".concat(e.toLocaleString());case"EUR":return"€".concat(e.toLocaleString());case"GBP":return"\xa3".concat(e.toLocaleString());case"JPY":case"CNY":return"\xa5".concat(e.toLocaleString());case"SOL":return"".concat(e.toLocaleString()," SOL");default:return"".concat(t).concat(e.toLocaleString())}return e.toLocaleString()}return String(e)},o=e=>{let{title:t,items:n,top:o,left:s,isModal:c=!1,timeFilter:u,currencyFilter:h}=e,d=n.some(e=>e.axis),f=l(t,u);return(0,r.jsxs)("div",{className:"absolute z-10 pointer-events-none bg-gray-900/95 shadow-lg border border-gray-800 rounded-md p-2 text-xs min-w-[120px]",style:{top:"".concat(o,"px"),left:s>(c?500:250)?"".concat(s-160,"px"):"".concat(s+10,"px"),transform:"translateY(-100%)"},children:[(0,r.jsx)("div",{className:"text-gray-400 text-[10px] font-normal pb-1 mb-1 border-b border-gray-800",children:f}),(0,r.jsx)("div",{className:"space-y-1",children:n.map((e,t)=>(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center text-gray-400",children:[(0,r.jsx)(a,{type:e.shape||"circle",color:e.color}),(0,r.jsx)("span",{className:"text-gray-400 font-normal ml-2",children:e.label}),d&&e.axis&&(0,r.jsxs)("span",{className:"ml-1 text-[9px] text-gray-500",children:["(",e.axis," axis)"]})]}),(0,r.jsx)("span",{className:"text-gray-300 font-normal ml-4",children:i(e.value,h)})]},"tooltip-item-".concat(t)))})]})}},92507:(e,t,n)=>{n.r(t),n.d(t,{default:()=>S});var r=n(95155),a=n(12115),l=n(79111),i=n(41995),o=n(50109),s=n(72630),c=n(58888),u=n(45191),h=n(4904),d=n(78398),f=n(51078),m=n(7545),g=n(81838),x=n(52594),p=n(96565),v=n(42028),b=n(12341);let y=e=>{let{className:t="w-4 h-4"}=e;return(0,r.jsx)("svg",{className:t,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})})},S=e=>{let{isModalOpen:t=!1,onModalClose:n=()=>{},legendsChanged:S}=e,[j,w]=(0,a.useState)([]),[D,k]=(0,a.useState)([]),[A,N]=(0,a.useState)([]),[L,C]=(0,a.useState)(!0),[M,E]=(0,a.useState)(null),[O,U]=(0,a.useState)([]),_=(0,a.useRef)(null),V=(0,a.useRef)(null),[Y,F]=(0,a.useState)(!1),[G,R]=(0,a.useState)(null),[W,P]=(0,a.useState)(!1),[T,B]=(0,a.useState)(null),[X,z]=(0,a.useState)({visible:!1,month:"",items:[],left:0,top:0}),I=(0,a.useCallback)(e=>{let t={};e.forEach(e=>{let{month:n,mint:r,Dex_Volume:a,date:l}=e;t[n]||(t[n]={month:n,date:l}),t[n][r]=a||0});let n=[...new Set(e.map(e=>e.mint))].filter(e=>null!==e);U(n);let r=Object.values(t).sort((e,t)=>e.date instanceof Date&&t.date instanceof Date?e.date.getTime()-t.date.getTime():0);return r.forEach(e=>{let t=0;n.forEach(n=>{let r=e[n];t+=r||0}),e.total=t}),r},[]),q=(0,a.useCallback)(async()=>{C(!0),E(null);try{let e=await (0,b.fetchDexVolumeData)();if(0===e.length)E("No DEX volume data available");else{w(e);let t=I(e);if(k(t),N(t),F(!1),R(null),S){let t={};e.forEach(e=>{t[e.mint]||(t[e.mint]=0),t[e.mint]+=e.Dex_Volume||0});let n=Object.entries(t).sort((e,t)=>t[1]-e[1]).map(e=>{let[t,n]=e;return{label:t,color:(0,b.Gy)(t),value:n}});S(n)}}}catch(e){E(e instanceof Error?e.message:"Failed to load data.")}finally{C(!1)}},[S,I]);(0,a.useEffect)(()=>{q()},[q]),(0,a.useEffect)(()=>{if(0===D.length){A.length>0&&N([]);return}if(!G&&Y)return void N(D);if(!G||!Y){A.length!==D.length&&N(D);return}let[e,t]=G,n=D.filter(n=>{let r=n.date instanceof Date?n.date:new Date(n.date);return r>=e&&r<=t});N(n.length>0?n:D)},[G,D,Y,A.length]),(0,a.useEffect)(()=>{t&&(B(G),P(Y))},[t,G,Y]);let $=(0,a.useCallback)(e=>{if(!e||0===D.length)return D;let[t,n]=e,r=D.filter(e=>{let r=e.date instanceof Date?e.date:new Date(e.date);return r>=t&&r<=n});return r.length>0?r:D},[D]),H=(0,a.useCallback)(function(e){var t;let n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=null==(t=(n?V:_).current)?void 0:t.getBoundingClientRect();if(!r)return;let a=e.clientX-r.left,l=n?W:Y,i=n?T:G,o=l?n?$(i):A:D;if(0===o.length)return;let s={right:20,left:80},c=(r.width-s.left-s.right)/o.length,u=Math.floor((a-s.left)/c);if(u<0||u>=o.length){X.visible&&z(e=>({...e,visible:!1}));return}let h=o[u];if(!X.visible||X.month!==h.month){let t=O.filter(e=>h[e]>0).map(e=>({mint:e,value:h[e],color:(0,b.Gy)(e)})).sort((e,t)=>t.value-e.value);z({visible:!0,month:h.month,items:t,left:a,top:e.clientY-r.top})}},[D,A,Y,X.visible,X.month,O,W,T,G,$]),Q=(0,a.useCallback)(()=>{X.visible&&z(e=>({...e,visible:!1}))},[X.visible]),J=e=>new Date(e).toLocaleDateString("en-US",{month:"short",year:"numeric"}),Z=e=>{let t=new Date(e);return"".concat(t.getMonth()+1,"/").concat(t.getFullYear().toString().substr(2,2))},K=(0,a.useCallback)(e=>{if(!e){Y&&(R(null),F(!1));return}let{x0:t,x1:n}=e;R([new Date(t),new Date(n)]),Y||F(!0)},[Y]),ee=(0,a.useCallback)(e=>{if(!e){W&&(B(null),P(!1));return}let{x0:t,x1:n}=e;B([new Date(t),new Date(n)]),W||P(!0)},[W]),et=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(L)return(0,r.jsx)("div",{className:"flex justify-center items-center h-full",children:(0,r.jsx)(f.A,{size:"sm"})});if(M||0===D.length)return(0,r.jsxs)("div",{className:"flex flex-col justify-center items-center h-full",children:[(0,r.jsx)("div",{className:"text-gray-400/80 text-xs mb-2",children:M||"No data available"}),(0,r.jsx)(m.A,{onClick:q,children:(0,r.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,r.jsx)(y,{className:"w-3.5 h-3.5"}),(0,r.jsx)("span",{children:"Refresh"})]})})]});let a=n?T:G,x=(n?W:Y)?n?$(a):A:D;return(0,r.jsxs)("div",{className:"flex flex-col h-full",children:[X.visible&&X.items.length>0&&(0,r.jsx)(g.A,{title:J(X.month),items:X.items.map(e=>({color:e.color,label:e.mint,value:(0,b.formatCurrency)(e.value),shape:"square"})),top:X.top,left:X.left,isModal:n}),(0,r.jsx)("div",{className:"h-[85%] w-full overflow-hidden relative",ref:n?V:_,onMouseMove:e=>H(e,n),onMouseLeave:Q,children:(0,r.jsx)(l.A,{children:e=>{let{width:t,height:n}=e;if(t<10||n<10)return null;let a={top:20,right:20,bottom:50,left:80},l=t-a.left-a.right,f=n-a.top-a.bottom,m=(0,u.A)({domain:x.map(e=>e.month),padding:.3,range:[0,l]}),g=(()=>{let e=l<500?5:10;if(x.length<=e)return x.map(e=>e.month);{let t=Math.ceil(x.length/(e-1));return x.filter((e,n)=>n%t==0||n===x.length-1).map(e=>e.month)}})(),p=Math.max(...x.map(e=>e.total||0)),v=(0,h.A)({domain:[0,1.1*p],range:[f,0],nice:!0});(0,d.A)({domain:O,range:O.map(b.Gy)});let y=[...O].sort((e,t)=>{let n=x.reduce((t,n)=>t+(n[e]||0),0);return x.reduce((e,n)=>e+(n[t]||0),0)-n}),S=m.bandwidth();return(0,r.jsx)("svg",{width:t,height:n,children:(0,r.jsxs)(i.A,{left:a.left,top:a.top,children:[(0,r.jsx)(o.A,{scale:v,width:l,stroke:"#1f2937",strokeOpacity:.5,strokeDasharray:"2,3"}),x.map((e,t)=>{let n=m(e.month)||0,a=f,l=[];return y.filter(t=>e[t]>0).sort((t,n)=>e[t]-e[n]).forEach(i=>{let o=f-v(e[i]||0);a-=o,l.push((0,r.jsx)("rect",{x:n,y:a,width:S,height:o,fill:(0,b.Gy)(i),rx:2,className:"transition-opacity duration-200 ".concat(X.month===e.month?"opacity-100":"opacity-80")},"bar-".concat(t,"-").concat(i)))}),(0,r.jsx)(i.A,{children:l},"month-".concat(t))}),(0,r.jsx)(s.A,{top:f,scale:m,stroke:"#374151",strokeWidth:.5,tickStroke:"transparent",hideAxisLine:!1,tickLength:0,tickValues:g,tickFormat:Z,tickLabelProps:()=>({fill:"#6b7280",fontSize:11,fontWeight:300,textAnchor:"middle",dy:"0.5em"})}),(0,r.jsx)(c.A,{scale:v,stroke:"#374151",strokeWidth:.5,tickStroke:"transparent",tickLength:0,hideZero:!0,numTicks:5,tickFormat:e=>(0,b.formatCurrency)(e),tickLabelProps:()=>({fill:"#6b7280",fontSize:11,fontWeight:300,letterSpacing:"0.05em",textAnchor:"end",dy:"0.33em",dx:"-0.5em"})})]})})}})}),(0,r.jsx)("div",{className:"h-[15%] w-full mt-1",children:(0,r.jsx)(l.A,{children:e=>{let{width:t,height:a}=e;return t<=0||a<=0?null:(0,r.jsx)(v.A,{data:j,isModal:n,activeBrushDomain:n?T:G,onBrushChange:n?ee:K,onClearBrush:()=>{n?(B(null),P(!1)):(R(null),F(!1))},getDate:e=>e.date?e.date.toISOString():e.month,getValue:e=>e.Dex_Volume,lineColor:"#2775ca",margin:{top:5,right:20,bottom:10,left:80}})}})})]})};return(0,r.jsxs)("div",{className:"h-full w-full relative",children:[et(0,0),(0,r.jsx)(x.A,{isOpen:t,onClose:n,title:"Stablecoin DEX Volume",subtitle:"Monthly DEX volume for stablecoins on Solana",children:(0,r.jsx)("div",{className:"h-[70vh]",children:(0,r.jsxs)("div",{className:"flex h-full",children:[(0,r.jsx)("div",{className:"w-[90%] h-full pr-3 border-r border-gray-900",children:et(0,0,!0)}),(0,r.jsxs)("div",{className:"w-[10%] h-full pl-3 flex flex-col justify-start items-start",children:[(0,r.jsx)("div",{className:"text-[10px] text-gray-400 mb-2",children:"STABLECOINS"}),L?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(p.A,{label:"Loading...",color:"#2775ca",isLoading:!0}),(0,r.jsx)(p.A,{label:"Loading...",color:"#26a17b",isLoading:!0}),(0,r.jsx)(p.A,{label:"Loading...",color:"#fa7a35",isLoading:!0})]}):(0,r.jsx)("div",{className:"flex flex-col gap-1 overflow-y-auto max-h-[500px] pr-1",children:O.sort((e,t)=>{let n=j.filter(t=>t.mint===e).reduce((e,t)=>e+(t.Dex_Volume||0),0);return j.filter(e=>e.mint===t).reduce((e,t)=>e+(t.Dex_Volume||0),0)-n}).map(e=>{let t=j.filter(t=>t.mint===e).reduce((e,t)=>e+(t.Dex_Volume||0),0);return(0,r.jsx)(p.A,{label:e,color:(0,b.Gy)(e),shape:"square",tooltipText:(0,b.formatCurrency)(t)},e)})})]})]})})})]})}},95442:(e,t,n)=>{n.d(t,{A:()=>function e(){var t=new r,n=[],a=[],l=o;function s(e){let r=t.get(e);if(void 0===r){if(l!==o)return l;t.set(e,r=n.push(e)-1)}return a[r%a.length]}return s.domain=function(e){if(!arguments.length)return n.slice();for(let a of(n=[],t=new r,e))t.has(a)||t.set(a,n.push(a)-1);return s},s.range=function(e){return arguments.length?(a=Array.from(e),s):a.slice()},s.unknown=function(e){return arguments.length?(l=e,s):l},s.copy=function(){return e(n,a).unknown(l)},i.C.apply(s,arguments),s}});class r extends Map{constructor(e,t=l){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:t}}),null!=e)for(let[t,n]of e)this.set(t,n)}get(e){return super.get(a(this,e))}has(e){return super.has(a(this,e))}set(e,t){return super.set(function({_intern:e,_key:t},n){let r=t(n);return e.has(r)?e.get(r):(e.set(r,n),n)}(this,e),t)}delete(e){return super.delete(function({_intern:e,_key:t},n){let r=t(n);return e.has(r)&&(n=e.get(r),e.delete(r)),n}(this,e))}}function a({_intern:e,_key:t},n){let r=t(n);return e.has(r)?e.get(r):n}function l(e){return null!==e&&"object"==typeof e?e.valueOf():e}var i=n(28749);let o=Symbol("implicit")}}]);