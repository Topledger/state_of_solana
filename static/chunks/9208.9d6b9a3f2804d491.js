"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9208],{7545:(e,t,l)=>{l.d(t,{A:()=>r});var a=l(95155);l(12115);let r=e=>{let{onClick:t,children:l,className:r="",disabled:n=!1}=e;return(0,a.jsx)("button",{onClick:t,disabled:n,className:"\n        px-2 py-1 \n        bg-gray-800/20 hover:bg-gray-700/20 \n        text-gray-200/80 \n        rounded \n        text-xs leading-relaxed tracking-wide\n        transition-colors duration-200 \n        border border-gray-700/40 \n        flex items-center justify-center\n        disabled:opacity-50 disabled:pointer-events-none\n        ".concat(r,"\n      "),children:l})}},39208:(e,t,l)=>{l.r(t),l.d(t,{default:()=>m});var a=l(95155),r=l(12115),n=l(41545),s=l(41995),c=l(79111),i=l(78398),o=l(49616),d=l(51078),u=l(7545),h=l(81838),x=l(52594);let f=e=>{let{className:t="w-4 h-4"}=e;return(0,a.jsx)("svg",{className:t,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})})},m=e=>{let{isModalOpen:t=!1,onModalClose:l=()=>{}}=e,[m,g]=(0,r.useState)([]),[p,b]=(0,r.useState)(!0),[v,y]=(0,r.useState)(null),[j,w]=(0,r.useState)([]),[N,k]=(0,r.useState)(!0),S=(0,r.useRef)(null),C=(0,r.useRef)(null),[A,L]=(0,r.useState)({visible:!1,data:null,x:0,y:0}),R=(0,r.useCallback)(async()=>{b(!0),y(null);try{let e=await (0,o.fetchWalletBalanceData)();0===e.length?(y("No data available for wallet balances."),g([])):g(e)}catch(e){y(e instanceof Error?e.message:"Failed to load data."),g([])}finally{b(!1)}},[]);(0,r.useEffect)(()=>{R()},[R]),(0,r.useEffect)(()=>{t&&(k(!0),m.length>0?(w(m),k(!1)):(0,o.fetchWalletBalanceData)().then(e=>{w(e)}).catch(e=>{console.error("Error loading modal chart data:",e)}).finally(()=>{k(!1)}))},[t,m]);let O=e=>e>=1e6?"".concat((e/1e6).toFixed(1),"M"):e>=1e3?"".concat((e/1e3).toFixed(1),"K"):e.toString(),B=(e,t)=>{let l=t.reduce((e,t)=>e+t.Wallets,0);return l>0?e/l*100:0},W=e=>(0,i.A)({domain:e.map(e=>e.Balance_Cohort),range:e.map(e=>o.Cb[e.Balance_Cohort]||"#cccccc")}),E=function(e,t,l){let a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(e&&t){let e=a?C.current:S.current;if(e){let a=e.getBoundingClientRect();L({visible:!0,data:t,x:l.clientX-a.left,y:l.clientY-a.top})}}else L(e=>({...e,visible:!1}))},_=function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=e?j:m;if(e?N:p)return(0,a.jsx)("div",{className:"flex justify-center items-center h-full",children:(0,a.jsx)(d.A,{size:"sm"})});if(v||0===t.length)return(0,a.jsxs)("div",{className:"flex flex-col justify-center items-center h-full",children:[(0,a.jsx)("p",{className:"text-red-400 mb-3 text-sm",children:v||"No data available"}),(0,a.jsx)(u.A,{onClick:e?()=>{k(!0),(0,o.fetchWalletBalanceData)().then(e=>{w(e)}).catch(e=>{console.error("Error loading modal chart data:",e)}).finally(()=>{k(!1)})}:R,children:(0,a.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,a.jsx)(f,{className:"w-3.5 h-3.5"}),(0,a.jsx)("span",{children:"Retry"})]})})]});let l=W(t);return t.reduce((e,t)=>e+t.Wallets,0),(0,a.jsxs)("div",{className:"relative h-full w-full",ref:e?C:S,children:[A.visible&&A.data&&(0,a.jsx)(h.A,{left:A.x,top:A.y,title:A.data.Balance_Cohort,items:[{label:"Wallets",value:O(A.data.Wallets),color:o.Cb[A.data.Balance_Cohort]},{label:"Percentage",value:"".concat(B(A.data.Wallets,t).toFixed(1),"%"),color:o.Cb[A.data.Balance_Cohort]}],isModal:e}),(0,a.jsx)(c.A,{children:r=>{let{width:c,height:i}=r,o=c/2,d=i/2,u=Math.min(c,i)/2.5;return(0,a.jsx)("svg",{width:c,height:i,children:(0,a.jsx)(s.A,{top:d,left:o,children:(0,a.jsx)(n.A,{data:t,pieValue:e=>e.Wallets,outerRadius:u,innerRadius:.3*u,cornerRadius:3,padAngle:.005,children:r=>r.arcs.map((n,s)=>{let{data:c}=n,[i,o]=r.path.centroid(n),d=B(c.Wallets,t),u=d>5,h=l(c.Balance_Cohort);return(0,a.jsxs)("g",{onMouseMove:t=>E(!0,c,t,e),onMouseLeave:()=>E(!1,null,null,e),children:[(0,a.jsx)("path",{d:r.path(n)||"",fill:h,stroke:"#000",strokeWidth:.5,strokeOpacity:.3}),u&&(0,a.jsx)("text",{fill:"white",x:i,y:o,dy:".33em",fontSize:10,textAnchor:"middle",pointerEvents:"none",children:"".concat(d.toFixed(0),"%")})]},"pie-arc-".concat(s))})})})})}})]})};return(0,a.jsxs)("div",{className:"h-full w-full relative",ref:S,children:[_(!1),t&&(0,a.jsx)(x.A,{isOpen:t,onClose:l,title:"Wallet Balance Distribution",subtitle:"Wallets grouped by SOL balance",children:(0,a.jsx)("div",{className:"h-[60vh]",children:(0,a.jsxs)("div",{className:"flex h-full",children:[(0,a.jsx)("div",{className:"w-[75%] h-full pr-3 border-r border-gray-900 relative",children:_(!0)}),(0,a.jsx)("div",{className:"w-[25%] pl-3",children:(0,a.jsxs)("div",{className:"flex flex-col gap-5 pt-1 h-full overflow-hidden",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("h4",{className:"text-xs font-semibold text-gray-300",children:"Balance Cohorts"}),(0,a.jsx)("button",{onClick:()=>{let e=t?j:m,l=new Blob([["Balance Cohort,Wallets,Percentage",...e.map(t=>{let l=B(t.Wallets,e).toFixed(1);return['"'.concat(t.Balance_Cohort,'"'),t.Wallets,"".concat(l,"%")].join(",")})].join("\n")],{type:"text/csv;charset=utf-8;"}),a=URL.createObjectURL(l),r=document.createElement("a");r.setAttribute("href",a),r.setAttribute("download","wallet_balance_cohorts_".concat(new Date().toISOString().split("T")[0],".csv")),document.body.appendChild(r),r.click(),document.body.removeChild(r)},className:"text-xs text-blue-400 hover:text-blue-300 transition-colors",children:"Download CSV"})]}),(0,a.jsx)("div",{className:"flex flex-col gap-2 max-h-[52vh] overflow-y-auto pr-1 [&::-webkit-scrollbar]:w-1.5  [&::-webkit-scrollbar-track]:bg-transparent  [&::-webkit-scrollbar-thumb]:bg-gray-700/40 [&::-webkit-scrollbar-thumb]:rounded-full [&::-webkit-scrollbar-thumb]:hover:bg-gray-600/60 scrollbar-thin scrollbar-track-transparent scrollbar-thumb-gray-700/40",children:function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=e?j:m;return(e?N:p)||0===t.length?(0,a.jsx)("div",{className:"flex flex-col gap-2",children:(0,a.jsxs)("div",{className:"flex items-start",children:[(0,a.jsx)("div",{className:"w-2.5 h-2.5 bg-blue-500 mr-2 rounded-sm mt-0.5 animate-pulse"}),(0,a.jsx)("span",{className:"text-[11px] text-gray-300",children:"Loading..."})]})}):(0,a.jsx)("div",{className:"flex flex-col gap-2 max-h-[60vh] overflow-y-auto overflow-x-hidden pr-1",children:t.map((e,l)=>(0,a.jsxs)("div",{className:"flex items-start",children:[(0,a.jsx)("div",{className:"w-2.5 h-2.5 mr-2 rounded-sm mt-0.5 flex-shrink-0",style:{background:o.Cb[e.Balance_Cohort]}}),(0,a.jsx)("div",{className:"flex flex-col",children:(0,a.jsxs)("span",{className:"text-[11px] text-gray-300 break-words",children:[e.Balance_Cohort," ",(0,a.jsxs)("span",{className:"text-gray-400",children:["(",B(e.Wallets,t).toFixed(1),"%)"]})]})})]},"legend-".concat(e.Balance_Cohort,"-").concat(l)))})}(!0)})]})})]})})})]})}},41545:(e,t,l)=>{l.d(t,{A:()=>d});var a=l(12115),r=l(29300),n=l.n(r),s=l(41995),c=l(35083),i=["className","top","left","data","centroid","innerRadius","outerRadius","cornerRadius","startAngle","endAngle","padAngle","padRadius","pieSort","pieSortValues","pieValue","children","fill"];function o(){return(o=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var l=arguments[t];for(var a in l)Object.prototype.hasOwnProperty.call(l,a)&&(e[a]=l[a])}return e}).apply(this,arguments)}function d(e){var t=e.className,l=e.top,r=e.left,d=e.data,u=e.centroid,h=e.innerRadius,x=e.outerRadius,f=e.cornerRadius,m=e.startAngle,g=e.endAngle,p=e.padAngle,b=e.padRadius,v=e.pieSort,y=e.pieSortValues,j=e.pieValue,w=e.children,N=e.fill,k=void 0===N?"":N,S=function(e,t){if(null==e)return{};var l,a,r={},n=Object.keys(e);for(a=0;a<n.length;a++)l=n[a],t.indexOf(l)>=0||(r[l]=e[l]);return r}(e,i),C=(0,c.JL)({innerRadius:void 0===h?0:h,outerRadius:x,cornerRadius:f,padRadius:b}),A=(0,c.rL)({startAngle:m,endAngle:g,padAngle:p,value:j,sort:v,sortValues:y}),L=A(void 0===d?[]:d);return w?a.createElement(a.Fragment,null,w({arcs:L,path:C,pie:A})):a.createElement(s.A,{className:"visx-pie-arcs-group",top:l,left:r},L.map(function(e,l){return a.createElement("g",{key:"pie-arc-"+l},a.createElement("path",o({className:n()("visx-pie-arc",t),d:C(e)||"",fill:null==k||"string"==typeof k?k:k(e)},S)),null==u?void 0:u(C.centroid(e),e))}))}},52594:(e,t,l)=>{l.d(t,{A:()=>i,B:()=>c});var a=l(95155),r=l(12115),n=l(47650),s=l(51078);let c=e=>{let{title:t,items:l,maxHeight:r=600,maxItems:n=28}=e,s=l.length>n;return(0,a.jsxs)("div",{className:"flex flex-col h-full",children:[t&&(0,a.jsx)("div",{className:"text-[10px] text-gray-400 mb-2 uppercase",children:t}),(0,a.jsx)("div",{style:{maxHeight:s?"".concat(r,"px"):"none"},className:"flex flex-col gap-3 pr-1 ".concat(s?"overflow-y-auto \n          [&::-webkit-scrollbar]:w-1.5 \n          [&::-webkit-scrollbar-track]:bg-transparent \n          [&::-webkit-scrollbar-thumb]:bg-gray-700/40\n          [&::-webkit-scrollbar-thumb]:rounded-full\n          [&::-webkit-scrollbar-thumb]:hover:bg-gray-600/60\n          scrollbar-thin scrollbar-track-transparent scrollbar-thumb-gray-700/40":""),children:l.map(e=>(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"min-w-2 w-2 h-2 mr-1.5 rounded-sm mt-0 flex-shrink-0",style:{backgroundColor:e.color}}),(0,a.jsxs)("div",{className:"flex flex-col",children:[(0,a.jsx)("span",{className:"text-[11px] text-gray-300 leading-none",children:e.label}),e.value&&(0,a.jsx)("span",{className:"text-[10px] text-gray-500",children:e.value})]})]},e.id))})]})},i=e=>{let{isOpen:t,onClose:l,children:c,title:i,subtitle:o,isLoading:d=!1}=e,u=(0,r.useRef)(null);return((0,r.useEffect)(()=>{if(!t)return;let e=e=>{"Escape"===e.key&&l()};return document.addEventListener("keydown",e),document.body.style.overflow="hidden",()=>{document.removeEventListener("keydown",e),document.body.style.overflow=""}},[t,l]),t)?n.createPortal((0,a.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/80 backdrop-blur-sm modal-backdrop",children:(0,a.jsxs)("div",{ref:u,className:"relative bg-black/80 border border-gray-900 rounded-xl p-4 w-11/12 max-w-7xl flex flex-col shadow-xl",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-4 pb-3 border-b border-gray-900",children:[(0,a.jsxs)("div",{children:[i&&(0,a.jsx)("h2",{className:"text-[16px] font-medium text-gray-100",children:i}),o&&(0,a.jsx)("p",{className:"text-gray-500 text-[12px] tracking-wide mt-1",children:o})]}),(0,a.jsx)("button",{onClick:l,className:"bg-gray-800 hover:bg-gray-700 rounded-full p-1.5 text-gray-400 hover:text-white transition-colors","aria-label":"Close modal",children:(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:(0,a.jsx)("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})})]}),(0,a.jsxs)("div",{className:"flex-1 relative",children:[c,d&&(0,a.jsx)("div",{className:"absolute inset-0 flex items-center justify-center bg-black/60 backdrop-blur-sm z-10 rounded-md",children:(0,a.jsx)(s.A,{size:"md"})})]})]})}),document.body):null}},78398:(e,t,l)=>{l.d(t,{A:()=>n});var a=l(95442),r=(0,l(70222).A)("domain","range","reverse","unknown");function n(e){return r((0,a.A)(),e)}},81838:(e,t,l)=>{l.d(t,{A:()=>c});var a=l(95155);l(12115);let r=e=>{let{type:t,color:l}=e;return"circle"===t?(0,a.jsx)("div",{className:"h-2 w-2 rounded-full mr-1.5",style:{backgroundColor:l}}):(0,a.jsx)("div",{className:"h-2 w-2 rounded-sm mr-1.5",style:{backgroundColor:l}})},n=(e,t)=>{if(/^\d{4}-\d{2}-\d{2}/.test(e)||/^\d{2}\/\d{2}\/\d{4}/.test(e)){let l=new Date(e);if(!isNaN(l.getTime())){if("W"===t)return"Week of ".concat(l.toLocaleDateString("en-US",{month:"short",day:"2-digit",year:"numeric"}));if("M"===t)return l.toLocaleDateString("en-US",{month:"short",year:"numeric"});if("Q"===t){let e=Math.floor(l.getMonth()/3)+1;return"Q".concat(e,", ").concat(l.getFullYear())}else if("Y"===t)return l.getFullYear().toString();return l.toLocaleDateString("en-US",{month:"short",day:"2-digit",year:"numeric"})}}return/^[A-Za-z]{3}\s\d{4}$/.test(e)||/^Q[1-4]\s\d{4}$/.test(e)||/^\d{4}$/.test(e),e},s=(e,t)=>{if("string"==typeof e){if(t){let l={USD:"$",EUR:"€",GBP:"\xa3",JPY:"\xa5",CNY:"\xa5",SOL:"SOL"},a=l[t]||t;if("SOL"===t){if(e.includes("SOL"))return e;for(let[t,a]of Object.entries(l))if("SOL"!==t&&e.startsWith(a))return"".concat(e.substring(a.length)," SOL");return"".concat(e," SOL")}for(let[r,n]of Object.entries(l))if(e.startsWith(n)&&r!==t)return e.replace(n,a)}return e}if("number"==typeof e){if(t)switch(t){case"USD":return"$".concat(e.toLocaleString());case"EUR":return"€".concat(e.toLocaleString());case"GBP":return"\xa3".concat(e.toLocaleString());case"JPY":case"CNY":return"\xa5".concat(e.toLocaleString());case"SOL":return"".concat(e.toLocaleString()," SOL");default:return"".concat(t).concat(e.toLocaleString())}return e.toLocaleString()}return String(e)},c=e=>{let{title:t,items:l,top:c,left:i,isModal:o=!1,timeFilter:d,currencyFilter:u}=e,h=l.some(e=>e.axis),x=n(t,d);return(0,a.jsxs)("div",{className:"absolute z-10 pointer-events-none bg-gray-900/95 shadow-lg border border-gray-800 rounded-md p-2 text-xs min-w-[120px]",style:{top:"".concat(c,"px"),left:i>(o?500:250)?"".concat(i-160,"px"):"".concat(i+10,"px"),transform:"translateY(-100%)"},children:[(0,a.jsx)("div",{className:"text-gray-400 text-[10px] font-normal pb-1 mb-1 border-b border-gray-800",children:x}),(0,a.jsx)("div",{className:"space-y-1",children:l.map((e,t)=>(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center text-gray-400",children:[(0,a.jsx)(r,{type:e.shape||"circle",color:e.color}),(0,a.jsx)("span",{className:"text-gray-400 font-normal ml-2",children:e.label}),h&&e.axis&&(0,a.jsxs)("span",{className:"ml-1 text-[9px] text-gray-500",children:["(",e.axis," axis)"]})]}),(0,a.jsx)("span",{className:"text-gray-300 font-normal ml-4",children:s(e.value,u)})]},"tooltip-item-".concat(t)))})]})}},95442:(e,t,l)=>{l.d(t,{A:()=>function e(){var t=new a,l=[],r=[],n=c;function i(e){let a=t.get(e);if(void 0===a){if(n!==c)return n;t.set(e,a=l.push(e)-1)}return r[a%r.length]}return i.domain=function(e){if(!arguments.length)return l.slice();for(let r of(l=[],t=new a,e))t.has(r)||t.set(r,l.push(r)-1);return i},i.range=function(e){return arguments.length?(r=Array.from(e),i):r.slice()},i.unknown=function(e){return arguments.length?(n=e,i):n},i.copy=function(){return e(l,r).unknown(n)},s.C.apply(i,arguments),i}});class a extends Map{constructor(e,t=n){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:t}}),null!=e)for(let[t,l]of e)this.set(t,l)}get(e){return super.get(r(this,e))}has(e){return super.has(r(this,e))}set(e,t){return super.set(function({_intern:e,_key:t},l){let a=t(l);return e.has(a)?e.get(a):(e.set(a,l),l)}(this,e),t)}delete(e){return super.delete(function({_intern:e,_key:t},l){let a=t(l);return e.has(a)&&(l=e.get(a),e.delete(a)),l}(this,e))}}function r({_intern:e,_key:t},l){let a=t(l);return e.has(a)?e.get(a):l}function n(e){return null!==e&&"object"==typeof e?e.valueOf():e}var s=l(28749);let c=Symbol("implicit")}}]);