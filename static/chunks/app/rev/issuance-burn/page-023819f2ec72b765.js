(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2724],{45191:(e,t,a)=>{"use strict";a.d(t,{A:()=>n});var r=a(28749),l=a(95442),s=(0,a(70222).A)("domain","range","reverse","align","padding","round");function n(e){return s(function e(){var t,a,s=(0,l.A)().unknown(void 0),n=s.domain,i=s.range,o=0,c=1,u=!1,d=0,h=0,g=.5;function m(){var e=n().length,r=c<o,l=r?c:o,s=r?o:c;t=(s-l)/Math.max(1,e-d+2*h),u&&(t=Math.floor(t)),l+=(s-l-t*(e-d))*g,a=t*(1-d),u&&(l=Math.round(l),a=Math.round(a));var m=(function(e,t,a){e*=1,t*=1,a=(l=arguments.length)<2?(t=e,e=0,1):l<3?1:+a;for(var r=-1,l=0|Math.max(0,Math.ceil((t-e)/a)),s=Array(l);++r<l;)s[r]=e+r*a;return s})(e).map(function(e){return l+t*e});return i(r?m.reverse():m)}return delete s.unknown,s.domain=function(e){return arguments.length?(n(e),m()):n()},s.range=function(e){return arguments.length?([o,c]=e,o*=1,c*=1,m()):[o,c]},s.rangeRound=function(e){return[o,c]=e,o*=1,c*=1,u=!0,m()},s.bandwidth=function(){return a},s.step=function(){return t},s.round=function(e){return arguments.length?(u=!!e,m()):u},s.padding=function(e){return arguments.length?(d=Math.min(1,h=+e),m()):d},s.paddingInner=function(e){return arguments.length?(d=Math.min(1,e),m()):d},s.paddingOuter=function(e){return arguments.length?(h=+e,m()):h},s.align=function(e){return arguments.length?(g=Math.max(0,Math.min(1,e)),m()):g},s.copy=function(){return e(n(),[o,c]).round(u).paddingInner(d).paddingOuter(h).align(g)},r.C.apply(m(),arguments)}(),e)}},46602:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>ek});var r=a(95155),l=a(12115),s=a(53728),n=a(79111),i=a(41995),o=a(50109),c=a(45191),u=a(4904),d=a(72630),h=a(58888),g=a(76167),m=a(13600);let f="fJpv71SeTrORlyPx2dVbdTt07HrwuKbUobmb7Uzj",x="https://analytics.topledger.xyz/tl/api",p={COMPLETE:3,FAILED:4};async function v(e){try{console.log("Fetching issuance data for currency: ".concat(e));let t=await N(e);if(t.length>0)return console.log("Using cached data while fresh data is being fetched in the background"),setTimeout(()=>S(e),100),t;let a="".concat(x,"/queries/13212/results?api_key=").concat(f);console.log("API URL: ".concat(a));let r=await fetch(a,{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({parameters:{currency:e},max_age:86400}),cache:"no-cache"});if(console.log("Response status: ".concat(r.status)),!r.ok){let e=await r.text();throw console.error("API error (".concat(r.status,"): ").concat(e)),Error("API request failed: ".concat(r.status," - ").concat(e))}let l=await r.json();if(l.job){if(console.log("Received job response with status: ".concat(l.job.status)),l.job.status===p.COMPLETE&&l.job.query_result_id)return console.log("Job complete, fetching results with query_result_id: ".concat(l.job.query_result_id)),await b(l.job.query_result_id);if(l.job.status===p.FAILED||l.job.error)throw console.error("Job failed with error: ".concat(l.job.error||"Unknown error")),Error("API job failed: ".concat(l.job.error||"Unknown error"));throw console.log("Job is still processing"),S(e,l.job.id),Error("Data is still processing. Please try again later.")}if(l.query_result&&l.query_result.data&&Array.isArray(l.query_result.data.rows))return console.log("Found data in standard query_result.data.rows structure"),w(l.query_result.data.rows);throw console.error("Unable to extract data from API response:",l),Error("Invalid data format received from API")}catch(e){throw console.error("Error fetching issuance data:",e),e}}async function b(e){try{let t="".concat(x,"/query_results/").concat(e,"?api_key=").concat(f);console.log("Fetching result by ID: ".concat(t));let a=await fetch(t);if(!a.ok)throw Error("No data available for this period. ".concat(a.status));let r=await a.json();if(console.log("Query result data:",r),r.query_result&&r.query_result.data&&Array.isArray(r.query_result.data.rows))return w(r.query_result.data.rows);throw Error("Invalid query result format")}catch(e){throw console.error("Error fetching query result:",e),e}}function w(e){let t=e.filter(e=>e.backfilling_epoch_date);console.log("Processing ".concat(t.length," valid data points"));let a=t.map(e=>({date:e.backfilling_epoch_date||"",gross_sol_issuance:parseFloat(e.gross_sol_issuance||0),net_sol_issuance:parseFloat(e.net_sol_issuance||0),sol_burn:parseFloat(e.sol_burn||0),staking_reward:parseFloat(e.staking_reward||0),voting_reward:parseFloat(e.voting_reward||0),jito_labs_commission:parseFloat(e.jito_labs_commission||0),burn_ratio:parseFloat(e.burn_ratio||0),block_height:e.block_height?parseInt(e.block_height):void 0}));return a.sort((e,t)=>new Date(e.date).getTime()-new Date(t.date).getTime()),console.log("Transformed ".concat(a.length," data points")),console.log("Date range: ".concat(a[0].date," to ").concat(a[a.length-1].date)),a}function j(e,t){return"USD"===t?"$".concat(Math.abs(e).toLocaleString(void 0,{maximumFractionDigits:2})):"".concat(Math.abs(e).toLocaleString(void 0,{maximumFractionDigits:2})," SOL")}let k=e=>"".concat((100*e).toFixed(2),"%"),y=e=>{try{let t=new Date(e);if(isNaN(t.getTime()))return e;return t.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})}catch(t){return e}};async function N(e){try{console.log("Attempting to fetch cached data");let t="".concat(x,"/queries/13212/results?api_key=").concat(f),a=await fetch(t,{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({parameters:{currency:e},max_age:86400})});if(!a.ok)return[];let r=await a.json();if(r.query_result&&r.query_result.data&&Array.isArray(r.query_result.data.rows))return console.log("Found cached data"),w(r.query_result.data.rows);return[]}catch(e){return console.error("Error fetching cached data:",e),[]}}async function S(e,t){try{if(console.log("Starting background data refresh"),t)try{let e="".concat(x,"/jobs/").concat(t,"?api_key=").concat(f),a=0;for(;a<60;){a++,console.log("Background poll attempt ".concat(a,"/").concat(60));let t=await fetch(e);if(!t.ok)continue;let r=await t.json();if(r.job&&r.job.status===p.COMPLETE&&r.job.query_result_id){console.log("Background job completed successfully"),await b(r.job.query_result_id);return}if(r.job&&(r.job.status===p.FAILED||r.job.error))return void console.error("Background job failed:",r.job.error||"Unknown error");await new Promise(e=>setTimeout(e,1e4))}console.log("Background polling reached max attempts without completion")}catch(e){console.error("Error during background polling:",e)}else{console.log("Initiating new background data fetch request");try{let t="".concat(x,"/queries/13212/results?api_key=").concat(f),a=await fetch(t,{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({parameters:{currency:e},max_age:0})});if(!a.ok)return;let r=await a.json();r.query_result&&r.query_result.data&&Array.isArray(r.query_result.data.rows)?console.log("Background fetch completed successfully"):r.job&&r.job.id&&S(e,r.job.id)}catch(e){console.error("Error during background fetch:",e)}}}catch(e){console.error("Error in background refresh:",e)}}var _=a(51078),L=a(81838),A=a(7545),C=a(52594),D=a(42028);let T=e=>{let{className:t="w-4 h-4"}=e;return(0,r.jsx)("svg",{className:t,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})})},M={axisLines:"#374151",tickLabels:"#6b7280",grossIssuance:"#60a5fa",netIssuance:"#a78bfa",grid:"#1f2937"},E=e=>{if(0===e.length)return M;let t=["gross_sol_issuance","net_sol_issuance"],a={};t.forEach(t=>{a[t]=e.reduce((e,a)=>e+(Math.abs(Number(a[t]))||0),0)});let r=[...t].sort((e,t)=>a[t]-a[e]),l=["#60a5fa","#a78bfa"],s={};return r.forEach((e,t)=>{s[e]=l[t%l.length]}),{...M,grossIssuance:s.gross_sol_issuance||M.grossIssuance,netIssuance:s.net_sol_issuance||M.netIssuance}},P=e=>{let t=e?E(e):M;return{gross:t.grossIssuance,net:t.netIssuance}},O=e=>[{key:"gross_sol_issuance",displayName:"Gross Issuance",shape:"square",color:e.gross},{key:"net_sol_issuance",displayName:"Net Issuance",shape:"circle",color:e.net}],R=(e,t)=>e&&0!==e.length?O(t):[],B=e=>{var t;let{currency:a,isModalOpen:f=!1,onModalClose:x=()=>{}}=e,[p,b]=(0,l.useState)([]),[w,k]=(0,l.useState)(!0),[N,S]=(0,l.useState)(null),[M,O]=(0,l.useState)([]),[B,I]=(0,l.useState)(null),[F,q]=(0,l.useState)(!1),[W,U]=(0,l.useState)([]),[z,G]=(0,l.useState)(!0),[Y,J]=(0,l.useState)(null),[V,H]=(0,l.useState)(a),[$,Z]=(0,l.useState)(null),[Q,X]=(0,l.useState)(!1),[K,ee]=(0,l.useState)([]),et=(0,l.useRef)(null),ea=(0,l.useRef)(null),[er,el]=(0,l.useState)({visible:!1,dataPoint:null,left:0,top:0}),es=(0,l.useCallback)(async()=>{k(!0),S(null);try{let e=await v(a);0===e.length?(S("No data available."),b([]),O([])):(b(e),O(e),q(!0),I(null))}catch(t){console.error("[Chart] Error loading chart data:",t);let e="Failed to load data.";t instanceof Error&&(e=t.message||e),S(e),b([]),O([])}finally{k(!1)}},[a]),en=(0,l.useCallback)(async()=>{G(!0),J(null);try{let e=await v(V);0===e.length?(J("No data available."),U([]),ee([])):(U(e),ee(e),X(!0),Z(null))}catch(t){console.error("[Chart] Error loading modal chart data:",t);let e="Failed to load data.";t instanceof Error&&(e=t.message||e),J(e),U([]),ee([])}finally{G(!1)}},[V]);(0,l.useEffect)(()=>{es()},[es]);let ei=(0,l.useCallback)(e=>{if(!e){F&&(I(null),q(!1));return}let{x0:t,x1:a}=e,r=new Date(t),l=new Date(a);!(isNaN(r.getTime())||isNaN(l.getTime()))&&(I([r,l]),F||q(!0))},[F]),eo=(0,l.useCallback)(e=>{if(!e){Q&&(Z(null),X(!1));return}let{x0:t,x1:a}=e,r=new Date(t),l=new Date(a);!(isNaN(r.getTime())||isNaN(l.getTime()))&&(Z([r,l]),Q||X(!0))},[Q]);(0,l.useEffect)(()=>{if(0===p.length){M.length>0&&O([]);return}if(!B&&F)return void O(p);if(!B||!F){M.length!==p.length&&O(p);return}let[e,t]=B,a=e.getTime(),r=t.getTime(),l=p.filter(e=>{let t=new Date(e.date).getTime();return t>=a&&t<=r});O(l.length>0?l:p)},[B,p,F]),(0,l.useEffect)(()=>{if(0===W.length){K.length>0&&ee([]);return}if(!$&&Q)return void ee(W);if(!$||!Q){K.length!==W.length&&ee(W);return}let[e,t]=$,a=e.getTime(),r=t.getTime(),l=W.filter(e=>{let t=new Date(e.date).getTime();return t>=a&&t<=r});ee(l.length>0?l:W)},[$,W,Q]);let ec=(0,l.useCallback)(function(e){var t,a;let r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],l=null==(t=(r?ea:et).current)?void 0:t.getBoundingClientRect();if(!l)return;let s=e.clientX-l.left,n=e.clientY-l.top,i={left:45},o=l.width-i.left-20;if(s<i.left||s>o+i.left){er.visible&&el(e=>({...e,visible:!1}));return}let c=r?Q?K:W:F?M:p,u=Math.floor((s-i.left)/(o/c.length));if(u>=0&&u<c.length){let e=c[u];er.visible&&(null==(a=er.dataPoint)?void 0:a.date)===e.date||el({visible:!0,dataPoint:e,left:s,top:n})}},[p,M,W,K,F,Q,er.visible,null==(t=er.dataPoint)?void 0:t.date]),eu=(0,l.useCallback)(()=>{er.visible&&el(e=>({...e,visible:!1}))},[er.visible]);(0,l.useEffect)(()=>{f||H(a)},[a,f]),(0,l.useEffect)(()=>{f&&(H(a),p.length>0?(U(p),ee(p),G(!1),J(null),X(!0),Z(null)):en())},[f,a,p,en]),(0,l.useEffect)(()=>{f&&en()},[V,f,en]);let ed=(0,l.useCallback)(e=>{H(e)},[]),eh=function(e,t){let l=arguments.length>2&&void 0!==arguments[2]&&arguments[2],s=l?V:a,f=l?W:p,x=l?Q?K:W:F?M:p,v=l?z:w,b=l?Y:N,k=l?Q:F,S=E(x);return v?(0,r.jsx)("div",{className:"flex justify-center items-center h-full",children:(0,r.jsx)(_.A,{size:"sm"})}):b||0===f.length?(0,r.jsxs)("div",{className:"flex flex-col justify-center items-center h-full",children:[(0,r.jsx)("div",{className:"text-gray-400/80 text-xs mb-2",children:b||"No data available"}),(0,r.jsx)(A.A,{onClick:l?en:es,children:(0,r.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,r.jsx)(T,{className:"w-3.5 h-3.5"}),(0,r.jsx)("span",{children:"Refresh"})]})})]}):(0,r.jsxs)("div",{className:"flex flex-col h-full",children:[er.visible&&er.dataPoint&&(0,r.jsx)(L.A,{title:y(er.dataPoint.date),items:[{color:S.grossIssuance,label:"Gross Issuance",value:j(er.dataPoint.gross_sol_issuance,s),shape:"square"},{color:S.netIssuance,label:"Net Issuance",value:j(er.dataPoint.net_sol_issuance,s),shape:"circle"}],top:er.top,left:er.left}),(0,r.jsx)("div",{className:"h-[85%] w-full overflow-hidden relative",ref:l?ea:et,onMouseMove:e=>ec(e,l),onMouseLeave:eu,children:(0,r.jsx)(n.A,{debounceTime:10,children:e=>{let{width:t,height:a}=e,l={top:5,right:25,bottom:30,left:45},n=t-l.left-l.right,f=a-l.top-l.bottom,p=x.map(e=>new Date(e.date)),v=(0,c.A)({domain:p,range:[0,n],padding:.3}),b=x.flatMap(e=>[e.gross_sol_issuance,e.net_sol_issuance]),w=Math.min(...b),j=Math.max(...b),y=0;w<0&&(y=1.1*w);let N=(0,u.A)({domain:[y,1.1*j],range:[f,0],nice:!0});return(0,r.jsx)("svg",{width:t,height:a,className:"overflow-visible",children:(0,r.jsxs)(i.A,{left:l.left,top:l.top,children:[(0,r.jsx)(o.A,{scale:N,width:n,stroke:S.grid,strokeDasharray:"2,3",strokeOpacity:.5,numTicks:5}),k&&(0,r.jsx)("text",{x:0,y:-8,fontSize:8,fill:S.grossIssuance,textAnchor:"start",children:"Filtered: ".concat(x.length," item").concat(1!==x.length?"s":"")}),(0,r.jsx)("line",{x1:0,x2:n,y1:N(0),y2:N(0),stroke:S.axisLines,strokeWidth:1,strokeOpacity:.3}),(0,r.jsx)(m.A,{data:x,x:e=>{var t;return(null!=(t=v(new Date(e.date)))?t:0)+v.bandwidth()/2},y:e=>N(e.gross_sol_issuance),stroke:S.grossIssuance,strokeWidth:1.5,curve:g.G}),(0,r.jsx)(m.A,{data:x,x:e=>{var t;return(null!=(t=v(new Date(e.date)))?t:0)+v.bandwidth()/2},y:e=>N(e.net_sol_issuance),stroke:S.netIssuance,strokeWidth:1.5,curve:g.G}),(0,r.jsx)(d.A,{top:f,scale:v,tickFormat:e=>e.toLocaleDateString("en-US",{month:"short",day:"numeric"}),stroke:S.axisLines,strokeWidth:.5,tickStroke:"transparent",tickLength:0,hideZero:!0,numTicks:Math.min(5,x.length),tickLabelProps:()=>({fill:S.tickLabels,fontSize:11,fontWeight:300,letterSpacing:"0.05em",textAnchor:"middle",dy:"0.5em"})}),(0,r.jsx)(h.A,{scale:N,stroke:S.axisLines,strokeWidth:.5,tickStroke:"transparent",tickLength:0,numTicks:5,tickFormat:e=>{let t=Number(e)/1e6,a=Number.isInteger(t)||Math.abs(t)>=10?Math.round(t).toString():t.toFixed(1);return"USD"===s?"$".concat(a,"M"):"".concat(a,"M SOL")},tickLabelProps:()=>({fill:S.tickLabels,fontSize:11,fontWeight:300,letterSpacing:"0.05em",textAnchor:"end",dx:"-0.6em",dy:"0.25em"})})]})})}})}),(0,r.jsx)("div",{className:"h-[15%] w-full mt-1",children:(0,r.jsx)(D.A,{data:l?W:p,isModal:l,activeBrushDomain:l?$:B,onBrushChange:l?eo:ei,onClearBrush:l?()=>{Z(null),X(!1)}:()=>{I(null),q(!1)},getDate:e=>e.date,getValue:e=>e.gross_sol_issuance,lineColor:S.grossIssuance,margin:{top:5,right:25,bottom:10,left:45}})})]})};return(0,r.jsxs)("div",{className:"h-full w-full relative",children:[eh(0,0),(0,r.jsxs)(C.A,{isOpen:f,onClose:x,title:"SOL Issuance",subtitle:"Tracking gross and net SOL issuance over time",children:[(0,r.jsx)("div",{className:"flex items-center justify-start pl-1 py-0 mb-3",children:(0,r.jsx)(s.A,{currency:V,onChange:e=>ed(e),isCompact:!0})}),(0,r.jsx)("div",{className:"h-px bg-gray-900 w-full mb-3"}),(0,r.jsx)("div",{className:"h-[60vh]",children:(0,r.jsxs)("div",{className:"flex h-full",children:[(0,r.jsx)("div",{className:"w-[90%] h-full pr-3 border-r border-gray-900",children:eh(0,0,!0)}),(0,r.jsx)("div",{className:"w-[10%] pl-3",children:(0,r.jsx)("div",{className:"flex flex-col gap-4 pt-4",children:!z&&W.length>0?(0,r.jsx)("div",{className:"flex flex-col gap-2",children:R(W,P(W)).map(e=>(0,r.jsxs)("div",{className:"flex items-start",children:[(0,r.jsx)("div",{className:"w-2.5 h-2.5 rounded-sm mr-1.5",style:{backgroundColor:e.color}}),(0,r.jsx)("span",{className:"text-[11px] text-gray-200",children:e.displayName})]},e.key))}):(0,r.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,r.jsxs)("div",{className:"flex items-start",children:[(0,r.jsx)("div",{className:"w-2.5 h-2.5 bg-blue-500 mr-2 rounded-sm mt-0.5 animate-pulse"}),(0,r.jsx)("span",{className:"text-[11px] text-gray-300",children:"Loading..."})]}),(0,r.jsxs)("div",{className:"flex items-start",children:[(0,r.jsx)("div",{className:"w-2.5 h-2.5 bg-purple-500 mr-2 rounded-full mt-0.5 animate-pulse"}),(0,r.jsx)("span",{className:"text-[11px] text-gray-300",children:"Loading..."})]})]})})})]})})]})]})},I=e=>{let{className:t="w-4 h-4"}=e;return(0,r.jsx)("svg",{className:t,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})})},F={axisLines:"#374151",tickLabels:"#6b7280",solBurn:"#f43f5e",stakingReward:"#34d399",votingReward:"#facc15",grid:"#1f2937"},q=e=>{if(0===e.length)return F;let t=["sol_burn","staking_reward","voting_reward"],a={};t.forEach(t=>{a[t]=e.reduce((e,a)=>e+(Math.abs(Number(a[t]))||0),0)});let r=[...t].sort((e,t)=>a[t]-a[e]),l=["#f43f5e","#34d399","#facc15"],s={};return r.forEach((e,t)=>{s[e]=l[t%l.length]}),{...F,solBurn:s.sol_burn||F.solBurn,stakingReward:s.staking_reward||F.stakingReward,votingReward:s.voting_reward||F.votingReward}},W=e=>{let t=e?q(e):F;return{burn:t.solBurn,staking:t.stakingReward,voting:t.votingReward}},U=e=>[{key:"sol_burn",displayName:"SOL Burn",shape:"square",color:e.burn},{key:"staking_reward",displayName:"Staking Rewards",shape:"circle",color:e.staking},{key:"voting_reward",displayName:"Voting Rewards",shape:"circle",color:e.voting}],z=(e,t)=>e&&0!==e.length?U(t):[],G=e=>{var t;let{currency:a,isModalOpen:f=!1,onModalClose:x=()=>{}}=e,[p,b]=(0,l.useState)([]),[w,k]=(0,l.useState)(!0),[N,S]=(0,l.useState)(null),[T,M]=(0,l.useState)([]),[E,P]=(0,l.useState)(null),[O,R]=(0,l.useState)(!1),[B,U]=(0,l.useState)([]),[G,Y]=(0,l.useState)(!0),[J,V]=(0,l.useState)(null),[H,$]=(0,l.useState)(a),[Z,Q]=(0,l.useState)(null),[X,K]=(0,l.useState)(!1),[ee,et]=(0,l.useState)([]),ea=(0,l.useRef)(null),er=(0,l.useRef)(null),[el,es]=(0,l.useState)({visible:!1,dataPoint:null,left:0,top:0}),en=(0,l.useCallback)(async()=>{k(!0),S(null);try{let e=await v(a);0===e.length?(S("No data available."),b([]),M([])):(b(e),M(e),R(!0),P(null))}catch(t){console.error("[RewardsAndBurnChart] Error loading chart data:",t);let e="Failed to load data.";t instanceof Error&&(e=t.message||e),S(e),b([]),M([])}finally{k(!1)}},[a]),ei=(0,l.useCallback)(async()=>{Y(!0),V(null);try{let e=await v(H);0===e.length?(V("No data available."),U([]),et([])):(U(e),et(e),K(!0),Q(null))}catch(t){console.error("[RewardsAndBurnChart] Error loading modal chart data:",t);let e="Failed to load data.";t instanceof Error&&(e=t.message||e),V(e),U([]),et([])}finally{Y(!1)}},[H]);(0,l.useEffect)(()=>{en()},[en]);let eo=(0,l.useCallback)(e=>{if(!e){O&&(P(null),R(!1));return}let{x0:t,x1:a}=e,r=new Date(t),l=new Date(a);!(isNaN(r.getTime())||isNaN(l.getTime()))&&(P([r,l]),O||R(!0))},[O]),ec=(0,l.useCallback)(e=>{if(!e){X&&(Q(null),K(!1));return}let{x0:t,x1:a}=e,r=new Date(t),l=new Date(a);!(isNaN(r.getTime())||isNaN(l.getTime()))&&(Q([r,l]),X||K(!0))},[X]);(0,l.useEffect)(()=>{if(0===p.length){T.length>0&&M([]);return}if(!E&&O)return void M(p);if(!E||!O){T.length!==p.length&&M(p);return}let[e,t]=E,a=e.getTime(),r=t.getTime(),l=p.filter(e=>{let t=new Date(e.date).getTime();return t>=a&&t<=r});M(l.length>0?l:p)},[E,p,O]),(0,l.useEffect)(()=>{if(0===B.length){ee.length>0&&et([]);return}if(!Z&&X)return void et(B);if(!Z||!X){ee.length!==B.length&&et(B);return}let[e,t]=Z,a=e.getTime(),r=t.getTime(),l=B.filter(e=>{let t=new Date(e.date).getTime();return t>=a&&t<=r});et(l.length>0?l:B)},[Z,B,X]);let eu=(0,l.useCallback)(function(e){var t,a;let r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],l=null==(t=(r?er:ea).current)?void 0:t.getBoundingClientRect();if(!l)return;let s=e.clientX-l.left,n=e.clientY-l.top,i={left:45},o=l.width-i.left-20;if(s<i.left||s>o+i.left){el.visible&&es(e=>({...e,visible:!1}));return}let c=r?X?ee:B:O?T:p,u=Math.floor((s-i.left)/(o/c.length));if(u>=0&&u<c.length){let e=c[u];el.visible&&(null==(a=el.dataPoint)?void 0:a.date)===e.date||es({visible:!0,dataPoint:e,left:s,top:n})}},[p,T,B,ee,O,X,el.visible,null==(t=el.dataPoint)?void 0:t.date]),ed=(0,l.useCallback)(()=>{el.visible&&es(e=>({...e,visible:!1}))},[el.visible]);(0,l.useEffect)(()=>{f||$(a)},[a,f]),(0,l.useEffect)(()=>{f&&($(a),p.length>0?(U(p),et(p),Y(!1),V(null),K(!0),Q(null)):ei())},[f,a,p,ei]),(0,l.useEffect)(()=>{f&&ei()},[H,f,ei]);let eh=(0,l.useCallback)(e=>{$(e)},[]),eg=function(e,t){let l=arguments.length>2&&void 0!==arguments[2]&&arguments[2],s=l?H:a,f=l?B:p,x=l?X?ee:B:O?T:p,v=l?G:w,b=l?J:N,k=l?X:O,S=q(x);return v?(0,r.jsx)("div",{className:"flex justify-center items-center h-full",children:(0,r.jsx)(_.A,{size:"sm"})}):b||0===f.length?(0,r.jsxs)("div",{className:"flex flex-col justify-center items-center h-full",children:[(0,r.jsx)("div",{className:"text-gray-400/80 text-xs mb-2",children:b||"No data available"}),(0,r.jsx)(A.A,{onClick:l?ei:en,children:(0,r.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,r.jsx)(I,{className:"w-3.5 h-3.5"}),(0,r.jsx)("span",{children:"Refresh"})]})})]}):(0,r.jsxs)("div",{className:"flex flex-col h-full",children:[el.visible&&el.dataPoint&&(0,r.jsx)(L.A,{title:y(el.dataPoint.date),items:[{color:S.solBurn,label:"SOL Burn",value:j(el.dataPoint.sol_burn,s),shape:"square"},{color:S.stakingReward,label:"Staking Reward",value:j(el.dataPoint.staking_reward,s),shape:"circle"},{color:S.votingReward,label:"Voting Reward",value:j(el.dataPoint.voting_reward,s),shape:"circle"}],top:el.top,left:el.left}),(0,r.jsx)("div",{className:"h-[85%] w-full overflow-hidden relative",ref:l?er:ea,onMouseMove:e=>eu(e,l),onMouseLeave:ed,children:(0,r.jsx)(n.A,{children:e=>{let{width:t,height:a}=e;if(t<=0||a<=0)return null;let l={top:5,right:25,bottom:30,left:45},n=t-l.left-l.right,f=a-l.top-l.bottom;if(n<=0||f<=0)return null;let p=x.map(e=>new Date(e.date)),v=(0,c.A)({domain:p,range:[0,n],padding:.3}),b=Math.max(...x.flatMap(e=>[e.sol_burn,e.staking_reward,e.voting_reward])),w=(0,u.A)({domain:[0,1.1*b],range:[f,0],nice:!0});return(0,r.jsx)("svg",{width:t,height:a,className:"overflow-visible",children:(0,r.jsxs)(i.A,{left:l.left,top:l.top,children:[(0,r.jsx)(o.A,{scale:w,width:n,stroke:F.grid,strokeDasharray:"2,3",strokeOpacity:.5,numTicks:5}),k&&(0,r.jsx)("text",{x:0,y:-8,fontSize:8,fill:S.solBurn,textAnchor:"start",children:"Filtered: ".concat(x.length," item").concat(1!==x.length?"s":"")}),(0,r.jsx)("line",{x1:0,x2:n,y1:w(0),y2:w(0),stroke:F.axisLines,strokeWidth:1,strokeOpacity:.3}),(0,r.jsx)(m.A,{data:x,x:e=>{var t;return(null!=(t=v(new Date(e.date)))?t:0)+v.bandwidth()/2},y:e=>w(e.sol_burn),stroke:S.solBurn,strokeWidth:1.5,curve:g.G}),(0,r.jsx)(m.A,{data:x,x:e=>{var t;return(null!=(t=v(new Date(e.date)))?t:0)+v.bandwidth()/2},y:e=>w(e.staking_reward),stroke:S.stakingReward,strokeWidth:1.5,curve:g.G}),(0,r.jsx)(m.A,{data:x,x:e=>{var t;return(null!=(t=v(new Date(e.date)))?t:0)+v.bandwidth()/2},y:e=>w(e.voting_reward),stroke:S.votingReward,strokeWidth:1.5,curve:g.G}),(0,r.jsx)(d.A,{top:f,scale:v,tickFormat:e=>e.toLocaleDateString("en-US",{month:"short",day:"numeric"}),stroke:F.axisLines,strokeWidth:.5,tickStroke:"transparent",tickLength:0,hideZero:!0,numTicks:Math.min(5,x.length),tickLabelProps:()=>({fill:F.tickLabels,fontSize:11,fontWeight:300,letterSpacing:"0.05em",textAnchor:"middle",dy:"0.5em"})}),(0,r.jsx)(h.A,{scale:w,stroke:F.axisLines,strokeWidth:.5,tickStroke:"transparent",tickLength:0,numTicks:5,tickFormat:e=>{let t=Number(e)/1e6,a=Number.isInteger(t)||Math.abs(t)>=10?Math.round(t).toString():t.toFixed(1);return"USD"===s?"$".concat(a,"M"):"".concat(a,"M")},tickLabelProps:()=>({fill:F.tickLabels,fontSize:11,fontWeight:300,letterSpacing:"0.05em",textAnchor:"end",dx:"-0.6em",dy:"0.25em"})})]})})}})}),(0,r.jsx)("div",{className:"h-[15%] w-full mt-1",children:(0,r.jsx)(D.A,{data:l?B:p,isModal:l,activeBrushDomain:l?Z:E,onBrushChange:l?ec:eo,onClearBrush:l?()=>{Q(null),K(!1)}:()=>{P(null),R(!1)},getDate:e=>e.date,getValue:e=>e.sol_burn,lineColor:S.solBurn,margin:{top:5,right:25,bottom:10,left:45}})})]})};return(0,r.jsxs)("div",{className:"h-full w-full relative",children:[eg(0,0),(0,r.jsxs)(C.A,{isOpen:f,onClose:x,title:"SOL Rewards & Burn",subtitle:"Tracking SOL burn and rewards across the network",children:[(0,r.jsx)("div",{className:"flex items-center justify-start pl-1 py-0 mb-3",children:(0,r.jsx)(s.A,{currency:H,onChange:e=>eh(e),isCompact:!0})}),(0,r.jsx)("div",{className:"h-px bg-gray-900 w-full mb-3"}),(0,r.jsx)("div",{className:"h-[60vh]",children:(0,r.jsxs)("div",{className:"flex h-full",children:[(0,r.jsx)("div",{className:"w-[90%] h-full pr-3 border-r border-gray-900",children:eg(0,0,!0)}),(0,r.jsx)("div",{className:"w-[10%] pl-3",children:(0,r.jsx)("div",{className:"flex flex-col gap-4 pt-4",children:!G&&B.length>0?(0,r.jsx)("div",{className:"flex flex-col gap-2",children:z(B,W(B)).map(e=>(0,r.jsxs)("div",{className:"flex items-start",children:[(0,r.jsx)("div",{className:"w-2.5 h-2.5 mr-2 ".concat("circle"===e.shape?"rounded-full":"rounded-sm"," mt-0.5"),style:{background:e.color}}),(0,r.jsx)("span",{className:"text-[11px] text-gray-300",children:e.displayName})]},e.key))}):(0,r.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,r.jsxs)("div",{className:"flex items-start",children:[(0,r.jsx)("div",{className:"w-2.5 h-2.5 bg-red-500 mr-2 rounded-sm mt-0.5 animate-pulse"}),(0,r.jsx)("span",{className:"text-[11px] text-gray-300",children:"Loading..."})]}),(0,r.jsxs)("div",{className:"flex items-start",children:[(0,r.jsx)("div",{className:"w-2.5 h-2.5 bg-green-500 mr-2 rounded-full mt-0.5 animate-pulse"}),(0,r.jsx)("span",{className:"text-[11px] text-gray-300",children:"Loading..."})]}),(0,r.jsxs)("div",{className:"flex items-start",children:[(0,r.jsx)("div",{className:"w-2.5 h-2.5 bg-yellow-500 mr-2 rounded-full mt-0.5 animate-pulse"}),(0,r.jsx)("span",{className:"text-[11px] text-gray-300",children:"Loading..."})]})]})})})]})})]})]})},Y=e=>{let{className:t="w-4 h-4"}=e;return(0,r.jsx)("svg",{className:t,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})})},J={axisLines:"#374151",tickLabels:"#6b7280",jitoLabsCommission:"#f97316",stakingReward:"#34d399",votingReward:"#facc15",grossIssuance:"#60a5fa",grid:"#1f2937"},V=e=>[{key:"jito_labs_commission",displayName:"Jito Labs Commission",shape:"square",color:e.jito},{key:"staking_reward",displayName:"Staking Reward",shape:"circle",color:e.staking},{key:"voting_reward",displayName:"Voting Reward",shape:"triangle",color:e.voting},{key:"gross_sol_issuance",displayName:"Gross Issuance",shape:"square",color:e.gross}],H=(e,t)=>e&&0!==e.length?V(t):[],$=e=>{var t;let{currency:a,isModalOpen:f=!1,onModalClose:x=()=>{}}=e,[p,b]=(0,l.useState)([]),[w,k]=(0,l.useState)(!0),[N,S]=(0,l.useState)(null),[T,M]=(0,l.useState)([]),[E,P]=(0,l.useState)(null),[O,R]=(0,l.useState)(!1),[B,I]=(0,l.useState)([]),[F,q]=(0,l.useState)(!0),[W,U]=(0,l.useState)(null),[z,G]=(0,l.useState)(a),[V,$]=(0,l.useState)(null),[Z,Q]=(0,l.useState)(!1),[X,K]=(0,l.useState)([]),ee=(0,l.useRef)(null),et=(0,l.useRef)(null),[ea,er]=(0,l.useState)({visible:!1,dataPoint:null,left:0,top:0}),el=(0,l.useCallback)(async()=>{k(!0),S(null);try{let e=await v(a);0===e.length?(S("No data available."),b([]),M([])):(b(e),M(e),R(!0),P(null))}catch(t){console.error("[IssuanceBreakdownChart] Error loading chart data:",t);let e="Failed to load data.";t instanceof Error&&(e=t.message||e),S(e),b([]),M([])}finally{k(!1)}},[a]),es=(0,l.useCallback)(async()=>{q(!0),U(null);try{let e=await v(z);0===e.length?(U("No data available."),I([]),K([])):(I(e),K(e),Q(!0),$(null))}catch(t){console.error("[IssuanceBreakdownChart] Error loading modal chart data:",t);let e="Failed to load data.";t instanceof Error&&(e=t.message||e),U(e),I([]),K([])}finally{q(!1)}},[z]);(0,l.useEffect)(()=>{el()},[el]);let en=(0,l.useCallback)(e=>{if(!e){O&&(P(null),R(!1));return}let{x0:t,x1:a}=e,r=new Date(t),l=new Date(a);!(isNaN(r.getTime())||isNaN(l.getTime()))&&(P([r,l]),O||R(!0))},[O]),ei=(0,l.useCallback)(e=>{if(!e){Z&&($(null),Q(!1));return}let{x0:t,x1:a}=e,r=new Date(t),l=new Date(a);!(isNaN(r.getTime())||isNaN(l.getTime()))&&($([r,l]),Z||Q(!0))},[Z]);(0,l.useEffect)(()=>{if(0===p.length){T.length>0&&M([]);return}if(!E&&O)return void M(p);if(!E||!O){T.length!==p.length&&M(p);return}let[e,t]=E,a=e.getTime(),r=t.getTime(),l=p.filter(e=>{let t=new Date(e.date).getTime();return t>=a&&t<=r});M(l.length>0?l:p)},[E,p,O]),(0,l.useEffect)(()=>{if(0===B.length){X.length>0&&K([]);return}if(!V&&Z)return void K(B);if(!V||!Z){X.length!==B.length&&K(B);return}let[e,t]=V,a=e.getTime(),r=t.getTime(),l=B.filter(e=>{let t=new Date(e.date).getTime();return t>=a&&t<=r});K(l.length>0?l:B)},[V,B,Z]);let eo=(0,l.useCallback)(function(e){var t,a;let r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],l=null==(t=(r?et:ee).current)?void 0:t.getBoundingClientRect();if(!l)return;let s=e.clientX-l.left,n=e.clientY-l.top,i={left:45},o=l.width-i.left-20;if(s<i.left||s>o+i.left){ea.visible&&er(e=>({...e,visible:!1}));return}let c=r?Z?X:B:O?T:p,u=Math.floor((s-i.left)/(o/c.length));if(u>=0&&u<c.length){let e=c[u];ea.visible&&(null==(a=ea.dataPoint)?void 0:a.date)===e.date||er({visible:!0,dataPoint:e,left:s,top:n})}},[p,T,B,X,O,Z,ea.visible,null==(t=ea.dataPoint)?void 0:t.date]),ec=(0,l.useCallback)(()=>{ea.visible&&er(e=>({...e,visible:!1}))},[ea.visible]);(0,l.useEffect)(()=>{f||G(a)},[a,f]),(0,l.useEffect)(()=>{f&&(G(a),p.length>0?(I(p),K(p),q(!1),U(null),Q(!0),$(null)):es())},[f,a,p,es]),(0,l.useEffect)(()=>{f&&es()},[z,f,es]);let eu=(0,l.useCallback)(e=>{G(e)},[]),ed=function(e,t){let l=arguments.length>2&&void 0!==arguments[2]&&arguments[2],s=l?z:a,f=l?B:p,x=l?Z?X:B:O?T:p,v=l?F:w,b=l?W:N,k=l?Z:O;return v?(0,r.jsx)("div",{className:"flex justify-center items-center h-full",children:(0,r.jsx)(_.A,{size:"sm"})}):b||0===f.length?(0,r.jsxs)("div",{className:"flex flex-col justify-center items-center h-full",children:[(0,r.jsx)("div",{className:"text-gray-400/80 text-xs mb-2",children:b||"No data available"}),(0,r.jsx)(A.A,{onClick:l?es:el,children:(0,r.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,r.jsx)(Y,{className:"w-3.5 h-3.5"}),(0,r.jsx)("span",{children:"Refresh"})]})})]}):(0,r.jsxs)("div",{className:"flex flex-col h-full",children:[ea.visible&&ea.dataPoint&&(0,r.jsx)(L.A,{title:y(ea.dataPoint.date),items:[{color:J.jitoLabsCommission,label:"Jito Labs Commission",value:j(ea.dataPoint.jito_labs_commission,s),shape:"square"},{color:J.stakingReward,label:"Staking Reward",value:j(ea.dataPoint.staking_reward,s),shape:"circle"},{color:J.votingReward,label:"Voting Reward",value:j(ea.dataPoint.voting_reward,s),shape:"square"},{color:J.grossIssuance,label:"Gross Issuance",value:j(ea.dataPoint.gross_sol_issuance,s),shape:"square"}],top:ea.top,left:ea.left}),(0,r.jsx)("div",{className:"h-[85%] w-full overflow-hidden relative",ref:l?et:ee,onMouseMove:e=>eo(e,l),onMouseLeave:ec,children:(0,r.jsx)(n.A,{children:e=>{let{width:t,height:a}=e;if(t<=0||a<=0)return null;let l={top:5,right:25,bottom:30,left:45},n=t-l.left-l.right,f=a-l.top-l.bottom;if(n<=0||f<=0)return null;let p=x.map(e=>new Date(e.date)),v=(0,c.A)({domain:p,range:[0,n],padding:.3}),b=Math.max(...x.flatMap(e=>[e.jito_labs_commission,e.staking_reward,e.voting_reward,e.gross_sol_issuance])),w=(0,u.A)({domain:[0,1.1*b],range:[f,0],nice:!0});return(0,r.jsx)("svg",{width:t,height:a,className:"overflow-visible",children:(0,r.jsxs)(i.A,{left:l.left,top:l.top,children:[(0,r.jsx)(o.A,{scale:w,width:n,stroke:J.grid,strokeDasharray:"2,3",strokeOpacity:.5,numTicks:5}),k&&(0,r.jsx)("text",{x:0,y:-8,fontSize:8,fill:J.grossIssuance,textAnchor:"start",children:"Filtered: ".concat(x.length," item").concat(1!==x.length?"s":"")}),(0,r.jsx)("line",{x1:0,x2:n,y1:w(0),y2:w(0),stroke:J.axisLines,strokeWidth:1,strokeOpacity:.3}),(0,r.jsx)(m.A,{data:x,x:e=>{var t;return(null!=(t=v(new Date(e.date)))?t:0)+v.bandwidth()/2},y:e=>w(e.jito_labs_commission),stroke:J.jitoLabsCommission,strokeWidth:1.5,curve:g.G}),(0,r.jsx)(m.A,{data:x,x:e=>{var t;return(null!=(t=v(new Date(e.date)))?t:0)+v.bandwidth()/2},y:e=>w(e.staking_reward),stroke:J.stakingReward,strokeWidth:1.5,curve:g.G}),(0,r.jsx)(m.A,{data:x,x:e=>{var t;return(null!=(t=v(new Date(e.date)))?t:0)+v.bandwidth()/2},y:e=>w(e.voting_reward),stroke:J.votingReward,strokeWidth:1.5,curve:g.G}),(0,r.jsx)(m.A,{data:x,x:e=>{var t;return(null!=(t=v(new Date(e.date)))?t:0)+v.bandwidth()/2},y:e=>w(e.gross_sol_issuance),stroke:J.grossIssuance,strokeWidth:1.5,curve:g.G}),(0,r.jsx)(d.A,{top:f,scale:v,tickFormat:e=>e.toLocaleDateString("en-US",{month:"short",day:"numeric"}),stroke:J.axisLines,strokeWidth:.5,tickStroke:"transparent",tickLength:0,hideZero:!0,numTicks:Math.min(5,x.length),tickLabelProps:()=>({fill:J.tickLabels,fontSize:11,fontWeight:300,letterSpacing:"0.05em",textAnchor:"middle",dy:"0.5em"})}),(0,r.jsx)(h.A,{scale:w,stroke:J.axisLines,strokeWidth:.5,tickStroke:"transparent",tickLength:0,numTicks:5,tickFormat:e=>{let t=Number(e)/1e6,a=Number.isInteger(t)||Math.abs(t)>=10?Math.round(t).toString():t.toFixed(1);return"USD"===s?"$".concat(a,"M"):"".concat(a,"M")},tickLabelProps:()=>({fill:J.tickLabels,fontSize:11,fontWeight:300,letterSpacing:"0.05em",textAnchor:"end",dx:"-0.6em",dy:"0.25em"})})]})})}})}),(0,r.jsx)("div",{className:"h-[15%] w-full mt-1",children:(0,r.jsx)(D.A,{data:l?B:p,isModal:l,activeBrushDomain:l?V:E,onBrushChange:l?ei:en,onClearBrush:l?()=>{$(null),Q(!1)}:()=>{P(null),R(!1)},getDate:e=>e.date,getValue:e=>e.gross_sol_issuance,lineColor:J.grossIssuance,margin:{top:5,right:25,bottom:10,left:45}})})]})};return(0,r.jsxs)("div",{className:"h-full w-full relative",children:[ed(0,0),(0,r.jsxs)(C.A,{isOpen:f,onClose:x,title:"SOL Issuance Breakdown",subtitle:"Comparing all SOL issuance components",children:[(0,r.jsx)("div",{className:"flex items-center justify-start pl-1 py-0 mb-3",children:(0,r.jsx)(s.A,{currency:z,onChange:e=>eu(e),isCompact:!0})}),(0,r.jsx)("div",{className:"h-px bg-gray-900 w-full mb-3"}),(0,r.jsx)("div",{className:"h-[60vh]",children:(0,r.jsxs)("div",{className:"flex h-full",children:[(0,r.jsx)("div",{className:"w-[90%] h-full pr-3 border-r border-gray-900",children:ed(0,0,!0)}),(0,r.jsx)("div",{className:"w-[10%] pl-3",children:(0,r.jsx)("div",{className:"flex flex-col gap-4 pt-4",children:!F&&B.length>0?(0,r.jsx)("div",{className:"flex flex-col gap-2",children:H(B,{jito:J.jitoLabsCommission,staking:J.stakingReward,voting:J.votingReward,gross:J.grossIssuance}).map(e=>(0,r.jsxs)("div",{className:"flex items-start",children:[(0,r.jsx)("div",{className:"w-2.5 h-2.5 mr-2 ".concat("circle"===e.shape?"rounded-full":"triangle"===e.shape?"transform rotate-45":"rounded-sm"," mt-0.5"),style:{background:e.color}}),(0,r.jsx)("span",{className:"text-[11px] text-gray-300",children:e.displayName})]},e.key))}):(0,r.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,r.jsxs)("div",{className:"flex items-start",children:[(0,r.jsx)("div",{className:"w-2.5 h-2.5 bg-orange-500 mr-2 rounded-sm mt-0.5 animate-pulse"}),(0,r.jsx)("span",{className:"text-[11px] text-gray-300",children:"Loading..."})]}),(0,r.jsxs)("div",{className:"flex items-start",children:[(0,r.jsx)("div",{className:"w-2.5 h-2.5 bg-green-500 mr-2 rounded-full mt-0.5 animate-pulse"}),(0,r.jsx)("span",{className:"text-[11px] text-gray-300",children:"Loading..."})]}),(0,r.jsxs)("div",{className:"flex items-start",children:[(0,r.jsx)("div",{className:"w-2.5 h-2.5 bg-yellow-500 mr-2 transform rotate-45 mt-0.5 animate-pulse"}),(0,r.jsx)("span",{className:"text-[11px] text-gray-300",children:"Loading..."})]}),(0,r.jsxs)("div",{className:"flex items-start",children:[(0,r.jsx)("div",{className:"w-2.5 h-2.5 bg-blue-500 mr-2 rounded-sm mt-0.5 animate-pulse"}),(0,r.jsx)("span",{className:"text-[11px] text-gray-300",children:"Loading..."})]})]})})})]})})]})]})},Z=e=>{let{className:t="w-4 h-4"}=e;return(0,r.jsx)("svg",{className:t,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})})},Q={axisLines:"#374151",tickLabels:"#6b7280",burnRatio:"#f43f5e",grid:"#1f2937"},X=e=>[{key:"burn_ratio",displayName:"Burn Ratio",shape:"square",color:e.burnRatio}],K=(e,t)=>e&&0!==e.length?X(t):[],ee=e=>{var t;let{currency:a,isModalOpen:f=!1,onModalClose:x=()=>{}}=e,[p,b]=(0,l.useState)([]),[w,j]=(0,l.useState)(!0),[N,S]=(0,l.useState)(null),[T,M]=(0,l.useState)([]),[E,P]=(0,l.useState)(null),[O,R]=(0,l.useState)(!1),[B,I]=(0,l.useState)([]),[F,q]=(0,l.useState)(!0),[W,U]=(0,l.useState)(null),[z,G]=(0,l.useState)(a),[Y,J]=(0,l.useState)(null),[V,H]=(0,l.useState)(!1),[$,X]=(0,l.useState)([]),ee=(0,l.useRef)(null),et=(0,l.useRef)(null),[ea,er]=(0,l.useState)({visible:!1,dataPoint:null,left:0,top:0}),el=(0,l.useCallback)(async()=>{j(!0),S(null);try{let e=await v(a);0===e.length?(S("No data available."),b([]),M([])):(b(e),M(e),R(!0),P(null))}catch(t){console.error("[Chart] Error loading chart data:",t);let e="Failed to load data.";t instanceof Error&&(e=t.message||e),S(e),b([]),M([])}finally{j(!1)}},[a]),es=(0,l.useCallback)(async()=>{q(!0),U(null);try{let e=await v(z);0===e.length?(U("No data available."),I([]),X([])):(I(e),X(e),H(!0),J(null))}catch(t){console.error("[Chart] Error loading modal chart data:",t);let e="Failed to load data.";t instanceof Error&&(e=t.message||e),U(e),I([]),X([])}finally{q(!1)}},[z]);(0,l.useEffect)(()=>{el()},[el]);let en=(0,l.useCallback)(e=>{if(!e){O&&(P(null),R(!1));return}let{x0:t,x1:a}=e,r=new Date(t),l=new Date(a);!(isNaN(r.getTime())||isNaN(l.getTime()))&&(P([r,l]),O||R(!0))},[O]),ei=(0,l.useCallback)(e=>{if(!e){V&&(J(null),H(!1));return}let{x0:t,x1:a}=e,r=new Date(t),l=new Date(a);!(isNaN(r.getTime())||isNaN(l.getTime()))&&(J([r,l]),V||H(!0))},[V]);(0,l.useEffect)(()=>{if(0===p.length){T.length>0&&M([]);return}if(!E&&O)return void M(p);if(!E||!O){T.length!==p.length&&M(p);return}let[e,t]=E,a=e.getTime(),r=t.getTime(),l=p.filter(e=>{let t=new Date(e.date).getTime();return t>=a&&t<=r});M(l.length>0?l:p)},[E,p,O]),(0,l.useEffect)(()=>{if(0===B.length){$.length>0&&X([]);return}if(!Y&&V)return void X(B);if(!Y||!V){$.length!==B.length&&X(B);return}let[e,t]=Y,a=e.getTime(),r=t.getTime(),l=B.filter(e=>{let t=new Date(e.date).getTime();return t>=a&&t<=r});X(l.length>0?l:B)},[Y,B,V]);let eo=(0,l.useCallback)(function(e){var t,a;let r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],l=null==(t=(r?et:ee).current)?void 0:t.getBoundingClientRect();if(!l)return;let s=e.clientX-l.left,n=e.clientY-l.top,i={left:45},o=l.width-i.left-20;if(s<i.left||s>o+i.left){ea.visible&&er(e=>({...e,visible:!1}));return}let c=r?V?$:B:O?T:p,u=Math.floor((s-i.left)/(o/c.length));if(u>=0&&u<c.length){let e=c[u];ea.visible&&(null==(a=ea.dataPoint)?void 0:a.date)===e.date||er({visible:!0,dataPoint:e,left:s,top:n})}},[p,T,B,$,O,V,ea.visible,null==(t=ea.dataPoint)?void 0:t.date]),ec=(0,l.useCallback)(()=>{ea.visible&&er(e=>({...e,visible:!1}))},[ea.visible]);(0,l.useEffect)(()=>{f||G(a)},[a,f]),(0,l.useEffect)(()=>{f&&(G(a),p.length>0?(I(p),X(p),q(!1),U(null),H(!0),J(null)):es())},[f,a,p,es]),(0,l.useEffect)(()=>{f&&es()},[z,f,es]);let eu=(0,l.useCallback)(e=>{G(e)},[]),ed=function(e,t){let a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],l=a?B:p,s=a?V?$:B:O?T:p,f=a?F:w,x=a?W:N,v=a?V:O;return f?(0,r.jsx)("div",{className:"flex justify-center items-center h-full",children:(0,r.jsx)(_.A,{size:"sm"})}):x||0===l.length?(0,r.jsxs)("div",{className:"flex flex-col justify-center items-center h-full",children:[(0,r.jsx)("div",{className:"text-gray-400/80 text-xs mb-2",children:x||"No data available"}),(0,r.jsx)(A.A,{onClick:a?es:el,children:(0,r.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,r.jsx)(Z,{className:"w-3.5 h-3.5"}),(0,r.jsx)("span",{children:"Refresh"})]})})]}):(0,r.jsxs)("div",{className:"flex flex-col h-full",children:[ea.visible&&ea.dataPoint&&(0,r.jsx)(L.A,{title:y(ea.dataPoint.date),items:[{color:Q.burnRatio,label:"Burn Ratio",value:k(ea.dataPoint.burn_ratio),shape:"square"}],top:ea.top,left:ea.left}),(0,r.jsx)("div",{className:"h-[85%] w-full overflow-hidden relative",ref:a?et:ee,onMouseMove:e=>eo(e,a),onMouseLeave:ec,children:(0,r.jsx)(n.A,{children:e=>{let{width:t,height:a}=e;if(t<10||a<10)return(0,r.jsx)("div",{style:{width:"100%",height:"100%"}});let l={top:5,right:25,bottom:30,left:45},n=t-l.left-l.right,f=a-l.top-l.bottom;if(n<=0||f<=0)return null;let x=s.map(e=>new Date(e.date)),p=(0,c.A)({domain:x,range:[0,n],padding:.3}),b=s.map(e=>e.burn_ratio),w=Math.max(...b),j=Math.min(0,...b),k=(0,u.A)({domain:[j,1.1*w],range:[f,0],nice:!0});return(0,r.jsx)("svg",{width:t,height:a,className:"overflow-visible",children:(0,r.jsxs)(i.A,{left:l.left,top:l.top,children:[(0,r.jsx)(o.A,{scale:k,width:n,stroke:Q.grid,strokeDasharray:"2,3",strokeOpacity:.5,numTicks:5}),v&&(0,r.jsx)("text",{x:0,y:-8,fontSize:8,fill:Q.burnRatio,textAnchor:"start",children:"Filtered: ".concat(s.length," item").concat(1!==s.length?"s":"")}),(0,r.jsx)(m.A,{data:s,x:e=>{var t;return(null!=(t=p(new Date(e.date)))?t:0)+p.bandwidth()/2},y:e=>k(e.burn_ratio),stroke:Q.burnRatio,strokeWidth:2,curve:g.G}),(0,r.jsx)("line",{x1:0,x2:n,y1:k(0),y2:k(0),stroke:Q.axisLines,strokeWidth:1,strokeOpacity:.5}),(0,r.jsx)(d.A,{top:f,scale:p,tickFormat:e=>e.toLocaleDateString("en-US",{month:"short",day:"numeric"}),stroke:Q.axisLines,strokeWidth:.5,tickStroke:"transparent",tickLength:0,hideZero:!0,numTicks:Math.min(5,s.length),tickLabelProps:()=>({fill:Q.tickLabels,fontSize:11,fontWeight:300,letterSpacing:"0.05em",textAnchor:"middle",dy:"0.5em"})}),(0,r.jsx)(h.A,{scale:k,stroke:Q.axisLines,strokeWidth:.5,tickStroke:"transparent",tickLength:0,numTicks:5,tickFormat:e=>"".concat(Math.round(Number(e)),"%"),tickLabelProps:()=>({fill:Q.tickLabels,fontSize:11,fontWeight:300,letterSpacing:"0.05em",textAnchor:"end",dx:"-0.6em",dy:"0.25em"})})]})})}})}),(0,r.jsx)("div",{className:"h-[15%] w-full mt-1",children:(0,r.jsx)(D.A,{data:a?B:p,isModal:a,activeBrushDomain:a?Y:E,onBrushChange:a?ei:en,onClearBrush:a?()=>{J(null),H(!1)}:()=>{P(null),R(!1)},getDate:e=>e.date,getValue:e=>e.burn_ratio,lineColor:Q.burnRatio,margin:{top:5,right:25,bottom:10,left:45}})})]})};return(0,r.jsxs)("div",{className:"h-full w-full relative",children:[ed(0,0),(0,r.jsxs)(C.A,{isOpen:f,onClose:x,title:"SOL Burn Ratio",subtitle:"Percentage of SOL burned relative to issuance",children:[(0,r.jsx)("div",{className:"flex items-center justify-start pl-1 py-0 mb-3",children:(0,r.jsx)(s.A,{currency:z,onChange:e=>eu(e),isCompact:!0})}),(0,r.jsx)("div",{className:"h-px bg-gray-900 w-full mb-3"}),(0,r.jsx)("div",{className:"h-[60vh]",children:(0,r.jsxs)("div",{className:"flex h-full",children:[(0,r.jsx)("div",{className:"w-[90%] h-full pr-3 border-r border-gray-900",children:ed(0,0,!0)}),(0,r.jsx)("div",{className:"w-[10%] pl-3",children:(0,r.jsx)("div",{className:"flex flex-col gap-4 pt-4",children:!F&&B.length>0?(0,r.jsx)("div",{className:"flex flex-col gap-2",children:K(B,{burnRatio:Q.burnRatio}).map(e=>(0,r.jsxs)("div",{className:"flex items-start",children:[(0,r.jsx)("div",{className:"w-2.5 h-2.5 mr-2 rounded-sm mt-0.5",style:{background:e.color}}),(0,r.jsx)("span",{className:"text-[11px] text-gray-300",children:e.displayName})]},e.key))}):(0,r.jsx)("div",{className:"flex flex-col gap-2",children:(0,r.jsxs)("div",{className:"flex items-start",children:[(0,r.jsx)("div",{className:"w-2.5 h-2.5 bg-red-500 mr-2 rounded-sm mt-0.5 animate-pulse"}),(0,r.jsx)("span",{className:"text-[11px] text-gray-300",children:"Loading..."})]})})})})]})})]})]})};var et=a(74537),ea=a(71734);let er=e=>{let t="USD"===e?15e5:1500,a=[],r=new Date("2022-01-01"),l=Math.floor((new Date().getTime()-r.getTime())/864e5),s=Math.max(1,Math.floor(l/60)),n=0;for(let i=0;i<l;i+=s){let s=new Date(r);s.setDate(r.getDate()+i);let o=s.toISOString().split("T")[0],c=t*(1+i/l)*(.3*Math.sin(i/30*Math.PI)+.7)*(.7+.6*Math.random());n+=c,a.push({date:o,currency:e,sol_burn:c,cumulative_sol_burn:n})}let i=new Date().toISOString().split("T")[0];if(a.length>0&&a[a.length-1].date!==i){let t=1.05*a[a.length-1].sol_burn;n+=t,a.push({date:i,currency:e,sol_burn:t,cumulative_sol_burn:n})}return a};async function el(e){try{console.log("Fetching SOL burn data with currency: ".concat(e));let t=await fetch("".concat("https://analytics.topledger.xyz/tl/api/queries/13230/results","?api_key=").concat("OUAKufVU3UKpwQd06ZUu3lYqrEM2W7cowtH5IoGV"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({parameters:{currency:e}})});if(!t.ok)throw console.error("API request failed with status ".concat(t.status)),Error("API request failed with status ".concat(t.status));let a=await t.json();if(console.log("Raw API response:",JSON.stringify(a).substring(0,200)+"..."),!a.query_result||!a.query_result.data||!a.query_result.data.rows)throw console.error("Unexpected API response structure"),Error("API response missing expected data structure");let r=a.query_result.data.rows;if(console.log("Received ".concat(r.length," rows of data")),0===r.length)return console.warn("No data returned from API, using fallback data"),er(e);console.log("First row of data:",r[0]);let l=r.map(t=>({date:t.date||"",currency:e,sol_burn:Number(t.sol_burn||0),cumulative_sol_burn:Number(t.cumulative_sol_burn||0)})).sort((e,t)=>{let a=new Date(e.date),r=new Date(t.date);return isNaN(a.getTime())||isNaN(r.getTime())?0:a.getTime()-r.getTime()});console.log("Processed ".concat(l.length," data points"));let s=l.filter(e=>e.date&&!isNaN(new Date(e.date).getTime())&&(e.sol_burn>0||e.cumulative_sol_burn>0));if(console.log("Final dataset has ".concat(s.length," valid points")),0===s.length)return console.warn("No valid data points after filtering, using fallback data"),er(e);return s}catch(t){return console.error("Error fetching SOL burn data:",t),er(e)}}let es=e=>{let{className:t="w-4 h-4"}=e;return(0,r.jsx)("svg",{className:t,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})})},en=(e,t)=>"USD"===t?"$".concat((e/1e6).toFixed(2),"M"):"".concat((e/1e3).toFixed(2),"k"),ei={axisLines:"#374151",tickLabels:"#6b7280",burnBar:"#ef4444",cumulativeLine:"#ec4899",grid:"#1f2937"},eo=e=>{if(0===e.length)return ei;let t=["sol_burn","cumulative_sol_burn"],a={};t.forEach(t=>{a[t]=e.reduce((e,a)=>e+(Math.abs(Number(a[t]))||0),0)});let r=[...t].sort((e,t)=>a[t]-a[e]),l=["#ef4444","#ec4899"],s={};return r.forEach((e,t)=>{s[e]=l[t%l.length]}),{...ei,burnBar:s.sol_burn||ei.burnBar,cumulativeLine:s.cumulative_sol_burn||ei.cumulativeLine}},ec=e=>[{key:"sol_burn",displayName:"SOL Burn",shape:"square",color:e.burn},{key:"cumulative_sol_burn",displayName:"Cumulative SOL Burn",shape:"circle",color:e.cumulative}],eu=e=>{var t;let{currency:a,isModalOpen:s=!1,onModalClose:f=()=>{}}=e,[x,p]=(0,l.useState)([]),[v,b]=(0,l.useState)(!0),[w,j]=(0,l.useState)(null),[k,y]=(0,l.useState)([]),[N,S]=(0,l.useState)(null),[T,M]=(0,l.useState)(!1),[E,P]=(0,l.useState)([]),[O,R]=(0,l.useState)(!0),[B,I]=(0,l.useState)(null),[F,q]=(0,l.useState)(null),[W,U]=(0,l.useState)(!1),[z,G]=(0,l.useState)([]),[Y,J]=(0,l.useState)({visible:!1,dataPoint:null,left:0,top:0}),V=(0,l.useRef)(null),H=(0,l.useRef)(null),$=(0,l.useRef)(null),Z=(0,l.useRef)(!0),Q=(0,l.useRef)(null),X=(0,l.useRef)(!0),K=(0,l.useCallback)(async()=>{b(!0),j(null);try{console.log("Fetching SOL burn data...");let e=await el(a);if(e.length>0?(console.log("Data received successfully!"),console.log("Sample data:",e.slice(0,2)),console.log("Data length:",e.length),console.log("First 5 dates:",e.slice(0,5).map(e=>e.date))):console.warn("API returned empty data array"),0===e.length)j("No data available from API. Please try again later."),p([]);else{let t=[...e].sort((e,t)=>{try{let a=new Date(e.date),r=new Date(t.date);if(!isNaN(a.getTime())&&!isNaN(r.getTime()))return a.getTime()-r.getTime();return 0}catch(e){return 0}});console.log("Processed data length:",t.length),0===t.length?(j("No valid data points available."),p([])):(console.log("Final data sample:",t.slice(0,3)),p(t),y(t),M(!0),S(null))}}catch(t){console.error("[Chart] Error loading chart data:",t);let e="Failed to load data.";t instanceof Error&&(e="".concat(e," Error: ").concat(t.message)),j(e),p([]),y([])}finally{b(!1)}},[a]),ee=(0,l.useCallback)(async()=>{R(!0),I(null);try{console.log("Fetching modal SOL burn data...");let e=await el(a);if(0===e.length)I("No data available from API. Please try again later."),P([]),G([]);else{let t=[...e].sort((e,t)=>{try{let a=new Date(e.date),r=new Date(t.date);if(!isNaN(a.getTime())&&!isNaN(r.getTime()))return a.getTime()-r.getTime();return 0}catch(e){return 0}});0===t.length?(I("No valid data points available."),P([]),G([])):(P(t),G(t),U(!0),q(null))}}catch(t){console.error("[Chart] Error loading modal chart data:",t);let e="Failed to load data.";t instanceof Error&&(e="".concat(e," Error: ").concat(t.message)),I(e),P([]),G([])}finally{R(!1)}},[a]);(0,l.useEffect)(()=>{K()},[K]);let er=(0,l.useCallback)(e=>{if(!e){T&&(S(null),M(!1)),$.current&&(clearTimeout($.current),$.current=null,Z.current=!0);return}let{x0:t,x1:a}=e,r=new Date(t),l=new Date(a);!(isNaN(r.getTime())||isNaN(l.getTime()))&&(S([r,l]),T||M(!0))},[T]),eu=(0,l.useCallback)(e=>{if(!e){W&&(q(null),U(!1)),Q.current&&(clearTimeout(Q.current),Q.current=null,X.current=!0);return}let{x0:t,x1:a}=e,r=new Date(t),l=new Date(a);!(isNaN(r.getTime())||isNaN(l.getTime()))&&(q([r,l]),W||U(!0))},[W]);(0,l.useEffect)(()=>{if(0===x.length){k.length>0&&y([]);return}if(!N&&T)return void y(x);if(!N||!T){k.length!==x.length&&y(x);return}if(!Z.current)return;let[e,t]=N,a=e.getTime(),r=t.getTime(),l=x.filter(e=>{try{let t=new Date(e.date).getTime();return!isNaN(t)&&t>=a&&t<=r}catch(e){return!1}});y(l.length>0?l:x),Z.current=!1,$.current&&clearTimeout($.current),$.current=setTimeout(()=>{Z.current=!0},100)},[N,x,T]),(0,l.useEffect)(()=>{if(0===E.length){z.length>0&&G([]);return}if(!F&&W)return void G(E);if(!F||!W){z.length!==E.length&&G(E);return}if(!X.current)return;let[e,t]=F,a=e.getTime(),r=t.getTime(),l=E.filter(e=>{try{let t=new Date(e.date).getTime();return!isNaN(t)&&t>=a&&t<=r}catch(e){return!1}});G(l.length>0?l:E),X.current=!1,Q.current&&clearTimeout(Q.current),Q.current=setTimeout(()=>{X.current=!0},100)},[F,E,W]);let ed=(0,l.useCallback)(function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=t?H.current:V.current;if(!a)return;let r=a.getBoundingClientRect(),l=e.clientX-r.left,s=e.clientY-r.top,n={left:45},i=r.width-n.left-20;if(l<n.left||l>i+n.left){Y.visible&&J(e=>({...e,visible:!1}));return}let o=t?W?z:E:T?k:x,c=Math.floor((l-n.left)/(i/o.length));if(c>=0&&c<o.length){var u;let e=o[c];Y.visible&&(null==(u=Y.dataPoint)?void 0:u.date)===e.date||J({visible:!0,dataPoint:e,left:l,top:s})}},[x,k,E,z,T,W,Y.visible,null==(t=Y.dataPoint)?void 0:t.date]),eh=(0,l.useCallback)(()=>{Y.visible&&J(e=>({...e,visible:!1}))},[Y.visible]);(0,l.useEffect)(()=>()=>{$.current&&clearTimeout($.current),Q.current&&clearTimeout(Q.current)},[]),(0,l.useEffect)(()=>{s&&(x.length>0?(P(x),G(x),R(!1),I(null),U(!0),q(null)):ee())},[s,x,ee]);let eg=function(e,t){let l=arguments.length>2&&void 0!==arguments[2]&&arguments[2],s=l?E:x,f=l?W?z:E:T?k:x,p=l?O:v,b=l?B:w,j=l?W:T,y=l?()=>{q(null),U(!1)}:()=>{S(null),M(!1)},C=eo(f);return p?(0,r.jsx)("div",{className:"flex justify-center items-center h-full",children:(0,r.jsx)(_.A,{size:"sm"})}):b||0===s.length?(0,r.jsxs)("div",{className:"flex flex-col justify-center items-center h-full",children:[(0,r.jsx)("div",{className:"text-gray-400/80 text-xs mb-2 text-center max-w-xs",children:b||"No data available"}),(0,r.jsx)("div",{className:"text-gray-500/60 text-[10px] mb-3",children:"Try changing the currency or refreshing the data"}),(0,r.jsx)(A.A,{onClick:l?ee:()=>K(),children:(0,r.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,r.jsx)(es,{className:"w-3.5 h-3.5"}),(0,r.jsx)("span",{children:"Refresh"})]})})]}):(0,r.jsxs)("div",{className:"flex flex-col h-full",children:[Y.visible&&Y.dataPoint&&(0,r.jsx)(L.A,{title:(()=>{try{let e=new Date(Y.dataPoint.date);if(!isNaN(e.getTime()))return e.toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"});return Y.dataPoint.date}catch(e){return Y.dataPoint.date}})(),items:[{color:C.burnBar,label:"SOL Burn",value:en(Y.dataPoint.sol_burn,a),shape:"square"},{color:C.cumulativeLine,label:"Cumulative Burn",value:en(Y.dataPoint.cumulative_sol_burn,a),shape:"circle"}],top:Y.top,left:Y.left,isModal:l}),(0,r.jsx)("div",{className:"h-[85%] w-full overflow-hidden relative",onMouseMove:e=>ed(e,l),onMouseLeave:eh,ref:l?H:V,children:(0,r.jsx)(n.A,{children:e=>{let{width:t,height:l}=e;if(t<=0||l<=0)return null;let s={top:5,right:25,bottom:30,left:45},n=t-s.left-s.right,x=l-s.top-s.bottom;if(n<=0||x<=0)return null;let p=Array.from(new Set(f.map(e=>e.date))).filter(e=>!!e).sort((e,t)=>{try{return new Date(e).getTime()-new Date(t).getTime()}catch(e){return 0}}),v=p;if(p.length>20){let e=p[0],t=p[p.length-1];if(p.length>100){let a={};p.forEach(e=>{try{let t=new Date(e);if(!isNaN(t.getTime())){let r="".concat(t.getFullYear(),"-").concat(t.getMonth()+1);a[r]||(a[r]=[]),a[r].push(e)}}catch(e){}}),(v=Object.values(a).map(e=>e[0])).includes(e)||v.unshift(e),v.includes(t)||v.push(t),v.sort((e,t)=>new Date(e).getTime()-new Date(t).getTime())}else{let a=Math.ceil(p.length/15);v=[e];for(let e=a;e<p.length-1;e+=a)v.push(p[e]);v[v.length-1]!==t&&v.push(t)}}let b=(0,c.A)({domain:v,range:[0,n],padding:.3}),w=Math.max(1e4,...f.map(e=>e.sol_burn)),k=Math.max(1e4,...f.map(e=>e.cumulative_sol_burn)),y=(0,u.A)({domain:[0,1.1*w],range:[x,0],nice:!0}),N=(0,u.A)({domain:[0,1.1*k],range:[x,0],nice:!0}),S=e=>{if(v.includes(e.date))return(b(e.date)||0)+b.bandwidth()/2;try{let t=new Date(e.date).getTime(),a=v.reduce((e,a)=>{let r=new Date(e).getTime(),l=new Date(a).getTime();return Math.abs(l-t)<Math.abs(r-t)?a:e},v[0]);return(b(a)||0)+b.bandwidth()/2}catch(t){return f.indexOf(e)/f.length*n}};return(0,r.jsx)("svg",{width:t,height:l,className:"overflow-visible",children:(0,r.jsxs)(i.A,{left:s.left,top:s.top,children:[(0,r.jsx)(o.A,{scale:y,width:n,stroke:ei.grid,strokeDasharray:"2,3",strokeOpacity:.5,numTicks:5}),j&&(0,r.jsx)("text",{x:0,y:-8,fontSize:8,fill:ei.cumulativeLine,textAnchor:"start",children:"Filtered: ".concat(f.length," item").concat(1!==f.length?"s":"")}),f.map((e,t)=>{var a;let l=b(e.date),s=b.bandwidth(),n=Math.max(0,x-y(e.sol_burn));return!v.includes(e.date)||void 0===l||n<=0?null:(0,r.jsx)(ea.A,{x:l,y:x-n,width:s,height:n,fill:C.burnBar,opacity:(null==(a=Y.dataPoint)?void 0:a.date)===e.date?1:.7},"bar-".concat(t))}),(0,r.jsx)(m.A,{data:f,x:e=>{try{let t=new Date(e.date).getTime(),a=new Date(p[0]).getTime(),r=new Date(p[p.length-1]).getTime();if(a===r)return n/2;let l=(t-a)/(r-a)*n;return Math.max(0,Math.min(n,l))}catch(t){return S(e)}},y:e=>N(e.cumulative_sol_burn),stroke:C.cumulativeLine,strokeWidth:1.5,curve:g.G}),(0,r.jsx)(d.A,{top:x,scale:b,tickFormat:e=>{try{let t=new Date(e);if(!isNaN(t.getTime())){let e=new Date().getFullYear();if(v.length<=6)return t.toLocaleDateString("en-US",{month:"short",day:"numeric",year:t.getFullYear()!==e?"2-digit":void 0});return t.toLocaleDateString("en-US",{month:"short",year:t.getFullYear()!==e?"2-digit":void 0})}return e}catch(t){return e}},stroke:ei.axisLines,strokeWidth:.5,tickStroke:"transparent",tickLength:0,hideZero:!0,tickLabelProps:()=>({fill:ei.tickLabels,fontSize:10,fontWeight:300,letterSpacing:"0.03em",textAnchor:"middle",dy:"0.5em",angle:45,transform:"translate(-10, 10)"}),numTicks:Math.min(10,v.length)}),(0,r.jsx)(h.A,{scale:y,stroke:ei.axisLines,strokeWidth:.5,tickStroke:"transparent",tickLength:0,numTicks:5,tickFormat:e=>en(Number(e),a),tickLabelProps:()=>({fill:ei.tickLabels,fontSize:11,fontWeight:300,letterSpacing:"0.05em",textAnchor:"end",dx:"-0.6em",dy:"0.25em"})}),(0,r.jsx)(et.A,{left:n,scale:N,stroke:ei.axisLines,strokeWidth:.5,tickStroke:"transparent",tickLength:0,numTicks:5,tickFormat:e=>en(Number(e),a),tickLabelProps:()=>({fill:ei.tickLabels,fontSize:11,fontWeight:300,letterSpacing:"0.05em",textAnchor:"start",dx:"0.5em",dy:"0.25em"})})]})})}})}),(0,r.jsx)("div",{className:"h-[15%] w-full mt-1",children:(0,r.jsx)(D.A,{data:l?E:x,isModal:l,activeBrushDomain:l?F:N,onBrushChange:l?eu:er,onClearBrush:y,getDate:e=>{try{return new Date(e.date).toISOString()}catch(t){return e.date||""}},getValue:e=>Math.max(.1,e.sol_burn),lineColor:C.burnBar,margin:{top:5,right:25,bottom:10,left:45}})})]})};return(0,r.jsxs)("div",{className:"h-full w-full relative",children:[eg(0,0),(0,r.jsxs)(C.A,{isOpen:s,onClose:f,title:"SOL Burn Analysis",subtitle:"Tracking SOL burn over time and cumulative total",children:[(0,r.jsx)("div",{className:"h-px bg-gray-900 w-full mb-3"}),(0,r.jsx)("div",{className:"h-[60vh]",children:(0,r.jsxs)("div",{className:"flex h-full",children:[(0,r.jsx)("div",{className:"w-[90%] h-full pr-3 border-r border-gray-900",children:eg(0,0,!0)}),(0,r.jsx)("div",{className:"w-[10%] pl-3",children:(0,r.jsx)("div",{className:"flex flex-col gap-4 pt-4",children:!O&&E.length>0?(0,r.jsx)("div",{className:"flex flex-col gap-2",children:ec({burn:ei.burnBar,cumulative:ei.cumulativeLine}).map(e=>(0,r.jsxs)("div",{className:"flex items-start",children:[(0,r.jsx)("div",{className:"w-2.5 h-2.5 mr-2 ".concat("circle"===e.shape?"rounded-full":"rounded-sm"," mt-0.5"),style:{background:e.color}}),(0,r.jsx)("span",{className:"text-[11px] text-gray-300",children:e.displayName})]},e.key))}):(0,r.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,r.jsxs)("div",{className:"flex items-start",children:[(0,r.jsx)("div",{className:"w-2.5 h-2.5 bg-red-500 mr-2 rounded-sm mt-0.5 animate-pulse"}),(0,r.jsx)("span",{className:"text-[11px] text-gray-300",children:"Loading..."})]}),(0,r.jsxs)("div",{className:"flex items-start",children:[(0,r.jsx)("div",{className:"w-2.5 h-2.5 bg-pink-500 mr-2 rounded-full mt-0.5 animate-pulse"}),(0,r.jsx)("span",{className:"text-[11px] text-gray-300",children:"Loading..."})]})]})})})]})})]})]})};var ed=a(21903),eh=a(96565);let eg=P(),em=W(),ef={jito:J.jitoLabsCommission,staking:J.stakingReward,voting:J.votingReward,gross:J.grossIssuance},ex={burnRatio:Q.burnRatio},ep=(e=>{let t=e?eo(e):ei;return{burn:t.burnBar,cumulative:t.cumulativeLine}})(),ev=O(eg),eb=U(em);V(ef);let ew=X(ex),ej=ec(ep);function ek(){let[e,t]=(0,l.useState)("USD"),[a,n]=(0,l.useState)("USD"),[i,o]=(0,l.useState)("USD"),[c,u]=(0,l.useState)("USD"),[d,h]=(0,l.useState)("USD"),[g,m]=(0,l.useState)(!1),[f,x]=(0,l.useState)(!1),[p,v]=(0,l.useState)(!1),[b,w]=(0,l.useState)(!1),[j,k]=(0,l.useState)(!1),[y,N]=(0,l.useState)({issuance:!1,rewards:!1,breakdown:!1,burnRatio:!1,solBurn:!1}),S=e=>{N(t=>({...t,[e]:!0}));try{console.log("Downloading ".concat(e," data as CSV")),setTimeout(()=>{N(t=>({...t,[e]:!1}))},1e3)}catch(t){console.error("Error downloading ".concat(e," data:"),t),N(t=>({...t,[e]:!1}))}};return(0,r.jsx)("div",{className:"space-y-6",children:(0,r.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4 mb-4",children:[(0,r.jsx)(ed.A,{title:"SOL Issuance",description:"Gross and net SOL issuance over time",accentColor:"blue",onExpandClick:()=>m(!0),onDownloadClick:()=>S("issuance"),isDownloading:y.issuance,filterBar:(0,r.jsx)(s.A,{currency:e,onChange:e=>t(e),isCompact:!0}),legend:ev.map(e=>(0,r.jsx)(eh.A,{label:e.displayName,color:e.color,shape:"circle"===e.shape?"circle":"square"},e.key)),children:(0,r.jsx)(B,{currency:e,isModalOpen:g,onModalClose:()=>m(!1)})}),(0,r.jsx)(ed.A,{title:"SOL Rewards & Burns",description:"Staking rewards, voting rewards, and burns",accentColor:"purple",onExpandClick:()=>x(!0),onDownloadClick:()=>S("rewards"),isDownloading:y.rewards,filterBar:(0,r.jsx)(s.A,{currency:a,onChange:e=>n(e),isCompact:!0}),legend:eb.map(e=>(0,r.jsx)(eh.A,{label:e.displayName,color:e.color,shape:"circle"===e.shape?"circle":"square"},e.key)),children:(0,r.jsx)(G,{currency:a,isModalOpen:f,onModalClose:()=>x(!1)})}),(0,r.jsx)(ed.A,{title:"SOL Issuance Breakdown",description:"Breakdown of different components of issuance",accentColor:"green",onExpandClick:()=>v(!0),onDownloadClick:()=>S("breakdown"),isDownloading:y.breakdown,filterBar:(0,r.jsx)(s.A,{currency:i,onChange:e=>o(e),isCompact:!0}),legend:(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(eh.A,{label:"Jito Commission",color:ef.jito,shape:"square"}),(0,r.jsx)(eh.A,{label:"Staking Rewards",color:ef.staking,shape:"square"}),(0,r.jsx)(eh.A,{label:"Voting Rewards",color:ef.voting,shape:"square"}),(0,r.jsx)(eh.A,{label:"Gross Issuance",color:ef.gross,shape:"square"})]}),children:(0,r.jsx)($,{currency:i,isModalOpen:p,onModalClose:()=>v(!1)})}),(0,r.jsx)(ed.A,{title:"SOL Burn Ratio",description:"Percentage of SOL burned relative to issuance",accentColor:"orange",onExpandClick:()=>w(!0),onDownloadClick:()=>S("burnRatio"),isDownloading:y.burnRatio,filterBar:(0,r.jsx)(s.A,{currency:c,onChange:e=>u(e),isCompact:!0}),legend:ew.map(e=>(0,r.jsx)(eh.A,{label:e.displayName,color:e.color,shape:"circle"===e.shape?"circle":"square"},e.key)),children:(0,r.jsx)(ee,{currency:c,isModalOpen:b,onModalClose:()=>w(!1)})}),(0,r.jsx)(ed.A,{title:"SOL Burn Trends",description:"Daily SOL burn and cumulative burn amount",accentColor:"orange",onExpandClick:()=>k(!0),onDownloadClick:()=>S("solBurn"),isDownloading:y.solBurn,filterBar:(0,r.jsx)(s.A,{currency:d,onChange:e=>h(e),isCompact:!0}),legend:ej.map(e=>(0,r.jsx)(eh.A,{label:e.displayName,color:e.color,shape:"circle"===e.shape?"circle":"square"},e.key)),children:(0,r.jsx)(eu,{currency:d,isModalOpen:j,onModalClose:()=>k(!1)})})]})})}},49145:(e,t,a)=>{Promise.resolve().then(a.bind(a,46602))},74537:(e,t,a)=>{"use strict";a.d(t,{A:()=>d});var r=a(12115),l=a(29300),s=a.n(l),n=a(14945),i=a(2758),o=["axisClassName","labelOffset","tickLength","tickLabelProps"];function c(){return(c=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e}).apply(this,arguments)}var u={dx:"0.25em",dy:"0.25em",fill:"#222",fontFamily:"Arial",fontSize:10,textAnchor:"start"};function d(e){var t=e.axisClassName,a=e.labelOffset,l=e.tickLength,d=e.tickLabelProps,h=function(e,t){if(null==e)return{};var a,r,l={},s=Object.keys(e);for(r=0;r<s.length;r++)a=s[r],t.indexOf(a)>=0||(l[a]=e[a]);return l}(e,o),g="function"==typeof d?d:c({},u,d);return r.createElement(n.A,c({axisClassName:s()("visx-axis-right",t),labelOffset:void 0===a?36:a,orientation:i.A.right,tickLabelProps:g,tickLength:void 0===l?8:l},h))}},81838:(e,t,a)=>{"use strict";a.d(t,{A:()=>i});var r=a(95155);a(12115);let l=e=>{let{type:t,color:a}=e;return"circle"===t?(0,r.jsx)("div",{className:"h-2 w-2 rounded-full mr-1.5",style:{backgroundColor:a}}):(0,r.jsx)("div",{className:"h-2 w-2 rounded-sm mr-1.5",style:{backgroundColor:a}})},s=(e,t)=>{if(/^\d{4}-\d{2}-\d{2}/.test(e)||/^\d{2}\/\d{2}\/\d{4}/.test(e)){let a=new Date(e);if(!isNaN(a.getTime())){if("W"===t)return"Week of ".concat(a.toLocaleDateString("en-US",{month:"short",day:"2-digit",year:"numeric"}));if("M"===t)return a.toLocaleDateString("en-US",{month:"short",year:"numeric"});if("Q"===t){let e=Math.floor(a.getMonth()/3)+1;return"Q".concat(e,", ").concat(a.getFullYear())}else if("Y"===t)return a.getFullYear().toString();return a.toLocaleDateString("en-US",{month:"short",day:"2-digit",year:"numeric"})}}return/^[A-Za-z]{3}\s\d{4}$/.test(e)||/^Q[1-4]\s\d{4}$/.test(e)||/^\d{4}$/.test(e),e},n=(e,t)=>{if("string"==typeof e){if(t){let a={USD:"$",EUR:"€",GBP:"\xa3",JPY:"\xa5",CNY:"\xa5",SOL:"SOL"},r=a[t]||t;if("SOL"===t){if(e.includes("SOL"))return e;for(let[t,r]of Object.entries(a))if("SOL"!==t&&e.startsWith(r))return"".concat(e.substring(r.length)," SOL");return"".concat(e," SOL")}for(let[l,s]of Object.entries(a))if(e.startsWith(s)&&l!==t)return e.replace(s,r)}return e}if("number"==typeof e){if(t)switch(t){case"USD":return"$".concat(e.toLocaleString());case"EUR":return"€".concat(e.toLocaleString());case"GBP":return"\xa3".concat(e.toLocaleString());case"JPY":case"CNY":return"\xa5".concat(e.toLocaleString());case"SOL":return"".concat(e.toLocaleString()," SOL");default:return"".concat(t).concat(e.toLocaleString())}return e.toLocaleString()}return String(e)},i=e=>{let{title:t,items:a,top:i,left:o,isModal:c=!1,timeFilter:u,currencyFilter:d}=e,h=a.some(e=>e.axis),g=s(t,u);return(0,r.jsxs)("div",{className:"absolute z-10 pointer-events-none bg-gray-900/95 shadow-lg border border-gray-800 rounded-md p-2 text-xs min-w-[120px]",style:{top:"".concat(i,"px"),left:o>(c?500:250)?"".concat(o-160,"px"):"".concat(o+10,"px"),transform:"translateY(-100%)"},children:[(0,r.jsx)("div",{className:"text-gray-400 text-[10px] font-normal pb-1 mb-1 border-b border-gray-800",children:g}),(0,r.jsx)("div",{className:"space-y-1",children:a.map((e,t)=>(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center text-gray-400",children:[(0,r.jsx)(l,{type:e.shape||"circle",color:e.color}),(0,r.jsx)("span",{className:"text-gray-400 font-normal ml-2",children:e.label}),h&&e.axis&&(0,r.jsxs)("span",{className:"ml-1 text-[9px] text-gray-500",children:["(",e.axis," axis)"]})]}),(0,r.jsx)("span",{className:"text-gray-300 font-normal ml-4",children:n(e.value,d)})]},"tooltip-item-".concat(t)))})]})}},95442:(e,t,a)=>{"use strict";a.d(t,{A:()=>function e(){var t=new r,a=[],l=[],s=i;function o(e){let r=t.get(e);if(void 0===r){if(s!==i)return s;t.set(e,r=a.push(e)-1)}return l[r%l.length]}return o.domain=function(e){if(!arguments.length)return a.slice();for(let l of(a=[],t=new r,e))t.has(l)||t.set(l,a.push(l)-1);return o},o.range=function(e){return arguments.length?(l=Array.from(e),o):l.slice()},o.unknown=function(e){return arguments.length?(s=e,o):s},o.copy=function(){return e(a,l).unknown(s)},n.C.apply(o,arguments),o}});class r extends Map{constructor(e,t=s){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:t}}),null!=e)for(let[t,a]of e)this.set(t,a)}get(e){return super.get(l(this,e))}has(e){return super.has(l(this,e))}set(e,t){return super.set(function({_intern:e,_key:t},a){let r=t(a);return e.has(r)?e.get(r):(e.set(r,a),a)}(this,e),t)}delete(e){return super.delete(function({_intern:e,_key:t},a){let r=t(a);return e.has(r)&&(a=e.get(r),e.delete(r)),a}(this,e))}}function l({_intern:e,_key:t},a){let r=t(a);return e.has(r)?e.get(r):a}function s(e){return null!==e&&"object"==typeof e?e.valueOf():e}var n=a(28749);let i=Symbol("implicit")}},e=>{var t=t=>e(e.s=t);e.O(0,[4410,5083,166,1182,5955,4685,3414,8441,1684,7358],()=>t(49145)),_N_E=e.O()}]);