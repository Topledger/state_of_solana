(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1221],{1136:(e,t,n)=>{"use strict";n.d(t,{f:()=>r});let l=(e,t)=>{if(!e){console.error("No data available for CSV export"),alert("No data available for export");return}let n=new Blob([e],{type:"text/csv;charset=utf-8;"}),l=URL.createObjectURL(n),r=document.createElement("a");r.href=l,r.setAttribute("download",t),document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(l),console.log("".concat(t," downloaded successfully"))},r=async(e,t,n)=>{n&&n(!0);try{let n=await e();l(n,t)}catch(e){console.error("Error downloading ".concat(t,":"),e),alert("Failed to download data. Please try again.")}finally{n&&n(!1)}}},9331:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>ee});var l=n(95155),r=n(12115),a=n(21903),o=n(96565),i=n(79111),s=n(45191),c=n(4904),u=n(71734),d=n(41995),h=n(72630),m=n(58888),f=n(50109),g=n(51078),p=n(7545),v=n(81838),x=n(52594),b=n(42028);let j={Raydium:"#f97316",Orca:"#60a5fa",Axiom:"#a78bfa",Lifinity:"#34d399",default:"#6b7280"},w=e=>j[e]||j.default,y=e=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",notation:"compact",compactDisplay:"short",maximumFractionDigits:1}).format(e);async function S(){try{var e,t;console.log("Fetching DEX revenue data from API...");let n=await fetch("https://analytics.topledger.xyz/solana/api/queries/13171/results.json?api_key=rEzuwlk0RAE0NejUfX3vVcKmiO6ocehFgsBjq5qK",{method:"GET",headers:{"Content-Type":"application/json"},cache:"no-store"});if(!n.ok)throw Error("API request failed with status ".concat(n.status));console.log("API response received, processing data...");let l=await n.json();if(!(null==l||null==(t=l.query_result)||null==(e=t.data)?void 0:e.rows))throw Error("Invalid data structure received from API");let r=l.query_result.data.rows.map(e=>({month:e.month,platform:e.platform,protocol_revenue:parseFloat(e.protocol_revenue)||0}));console.log("Received ".concat(r.length," data points from API"));let a=r.sort((e,t)=>new Date(e.month).getTime()-new Date(t.month).getTime());console.log("Returning ".concat(a.length," data points"));let o=a.filter(e=>{let t=new Date(e.month).getFullYear();return 2024===t||2025===t});return console.log("Filtered to ".concat(o.length," data points from Jan 2024 to May 2025")),o.length>0?o:a}catch(e){throw console.error("Error fetching DEX revenue data:",e),Error("Failed to fetch DEX revenue data")}}async function k(){try{let e=await S();if(!e||0===e.length)return console.error("No DEX revenue data available for CSV export"),"";let t=[...e].sort((e,t)=>e.platform<t.platform?-1:e.platform>t.platform?1:new Date(e.month).getTime()-new Date(t.month).getTime()).map(e=>[e.month,e.platform,e.protocol_revenue.toFixed(2)].join(","));return["block_date,Platform,protocol_revenue_usd",...t].join("\n")}catch(e){return console.error("Error preparing DEX revenue CSV data:",e),""}}let A=e=>{let{className:t="w-4 h-4"}=e;return(0,l.jsx)("svg",{className:t,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,l.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})})},D=e=>Object.entries(e.reduce((e,t)=>(e[t.month]||(e[t.month]=0),e[t.month]+=t.protocol_revenue,e),{})).map(e=>{let[t,n]=e;return{month:t,date:new Date(t),value:n}}),N=e=>{let{isModalOpen:t=!1,onModalClose:n=()=>{},legendsChanged:a}=e,[j,k]=(0,r.useState)([]),[N,L]=(0,r.useState)([]),[C,M]=(0,r.useState)([]),[_,P]=(0,r.useState)(!0),[E,T]=(0,r.useState)(null),[O,F]=(0,r.useState)([]),R=(0,r.useRef)(null),I=(0,r.useRef)(null),[B,U]=(0,r.useState)(!1),[W,q]=(0,r.useState)(null),[z,V]=(0,r.useState)(!1),[X,H]=(0,r.useState)(null),[Y,G]=(0,r.useState)({visible:!1,month:"",items:[],left:0,top:0}),Q=(0,r.useCallback)(e=>Object.values(e.reduce((e,t)=>(e[t.month]||(e[t.month]={month:t.month,date:t.date||new Date(t.month)}),e[t.month][t.platform]=t.protocol_revenue,e),{})).sort((e,t)=>new Date(e.month).getTime()-new Date(t.month).getTime()),[]),Z=(0,r.useCallback)(async()=>{P(!0),T(null);try{console.log("Fetching DEX revenue data...");let e=await S();if(0===e.length)console.error("No data returned from API"),T("No data available for DEX revenue."),k([]),L([]),M([]),F([]);else{console.log("Successfully received ".concat(e.length," data points:"),e.slice(0,3));let t=e.map(e=>({...e,date:new Date(e.month)})),n={};t.forEach(e=>{n[e.platform]||(n[e.platform]=0),n[e.platform]+=e.protocol_revenue});let l=Object.entries(n).sort((e,t)=>t[1]-e[1]).map(e=>{let[t]=e;return t});console.log("Sorted platforms by revenue:",l),F(l),k(t);let r=Q(t);if(console.log("Prepared ".concat(r.length," stacked data points")),L(r),M(r),U(!0),q(null),a){let e=l.slice(0,5).map(e=>({label:e,color:w(e),value:n[e]}));a(e)}}}catch(e){console.error("Error loading chart data:",e),T(e instanceof Error?e.message:"Failed to load data."),k([]),L([]),M([]),F([])}finally{P(!1)}},[a,Q]);(0,r.useEffect)(()=>{Z()},[Z]);let $=(0,r.useCallback)(e=>{if(!e){B&&(q(null),U(!1));return}let{x0:t,x1:n}=e;q([new Date(t),new Date(n)]),B||U(!0)},[B]),K=(0,r.useCallback)(e=>{if(!e){z&&(H(null),V(!1));return}let{x0:t,x1:n}=e;H([new Date(t),new Date(n)]),z||V(!0)},[z]);(0,r.useEffect)(()=>{if(0===N.length){C.length>0&&M([]);return}if(!W&&B)return void M(N);if(!W||!B){C.length!==N.length&&M(N);return}let[e,t]=W,n=N.filter(n=>{let l=n.date instanceof Date?n.date:new Date(n.month);return l>=e&&l<=t});M(n.length>0?n:N)},[W,N,B,C.length]),(0,r.useEffect)(()=>{t&&(H(W),V(B))},[t,W,B]);let J=(0,r.useCallback)(e=>{if(!e||0===N.length)return N;let[t,n]=e,l=N.filter(e=>{let l=e.date instanceof Date?e.date:new Date(e.month);return l>=t&&l<=n});return l.length>0?l:N},[N]),ee=(0,r.useCallback)(function(e){var t;let n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],l=null==(t=(n?I:R).current)?void 0:t.getBoundingClientRect();if(!l)return;let r=e.clientX-l.left,a=n?z:B,o=n?X:W,i=a?n?J(o):C:N;if(0===i.length)return;let s={right:15,left:40},c=(l.width-s.left-s.right)/i.length,u=Math.floor((r-s.left)/c);if(u<0||u>=i.length){Y.visible&&G(e=>({...e,visible:!1}));return}let d=i[u];if(!Y.visible||Y.month!==d.month){let t=O.filter(e=>d[e]>0).map(e=>({platform:e,value:d[e],color:w(e)})).sort((e,t)=>t.value-e.value);G({visible:!0,month:d.month,items:t,left:r,top:e.clientY-l.top})}},[N,C,B,Y.visible,Y.month,O,z,X,W,J]),et=(0,r.useCallback)(()=>{Y.visible&&G(e=>({...e,visible:!1}))},[Y.visible]),en=e=>new Date(e).toLocaleDateString("en-US",{month:"short",year:"numeric"}),el=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(_)return(0,l.jsx)("div",{className:"flex justify-center items-center h-full",children:(0,l.jsx)(g.A,{size:"sm"})});if(E||0===N.length)return(0,l.jsxs)("div",{className:"flex flex-col justify-center items-center h-full",children:[(0,l.jsx)("div",{className:"text-gray-400/80 text-xs mb-2",children:E||"No data available"}),(0,l.jsx)(p.A,{onClick:Z,children:(0,l.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,l.jsx)(A,{className:"w-3.5 h-3.5"}),(0,l.jsx)("span",{children:"Refresh"})]})})]});let r=n?X:W,a=n?z:B,o={top:10,right:15,bottom:30,left:40},x={top:5,right:o.right,bottom:10,left:o.left},S=D(j);return(0,l.jsxs)("div",{className:"flex flex-col h-full",children:[Y.visible&&Y.items.length>0&&(0,l.jsx)(v.A,{title:en(Y.month),items:Y.items.map(e=>({color:e.color,label:e.platform,value:y(e.value),shape:"square"})),top:Y.top,left:Y.left,isModal:n}),(0,l.jsx)("div",{className:"h-[85%] w-full overflow-hidden relative",ref:n?I:R,onMouseMove:e=>ee(e,n),onMouseLeave:et,children:(0,l.jsx)(i.A,{children:e=>{let{width:t,height:i}=e;if(t<=0||i<=0)return null;let g=t-o.left-o.right,p=i-o.top-o.bottom;if(g<=0||p<=0)return null;let v=a?n?J(r):C:N,x=(0,s.A)({domain:v.map(e=>e.month),range:[0,g],padding:.2}),b=(()=>{let e=g<500?6:12;if(v.length<=e)return v.map(e=>e.month);{let t=Math.ceil(v.length/(e-1));return v.filter((e,n)=>n%t==0||n===v.length-1).map(e=>e.month)}})(),j=Math.max(...v.map(e=>O.reduce((t,n)=>t+(e[n]||0),0))),S=(0,c.A)({domain:[0,1.1*j],range:[p,0],nice:!0}),k=x.bandwidth();return(0,l.jsx)("svg",{width:t,height:i,children:(0,l.jsxs)(d.A,{left:o.left,top:o.top,children:[(0,l.jsx)(f.A,{scale:S,width:g,stroke:"#1f2937",strokeOpacity:.5,strokeDasharray:"2,3"}),v.map((e,t)=>{let n=x(e.month)||0,r=p,a=[];return O.filter(t=>e[t]>0).sort((t,n)=>e[t]-e[n]).forEach(o=>{let i=p-S(e[o]||0);r-=i,a.push((0,l.jsx)(u.A,{x:n,y:r,width:k,height:i,fill:w(o),opacity:Y.month===e.month?1:.8,rx:2},"bar-".concat(t,"-").concat(o)))}),(0,l.jsx)(d.A,{children:a},"month-".concat(t))}),(0,l.jsx)(h.A,{top:p,scale:x,stroke:"#374151",strokeWidth:.5,tickStroke:"transparent",hideAxisLine:!1,tickLength:0,tickValues:b,tickLabelProps:()=>({fill:"#6b7280",fontSize:11,fontWeight:300,textAnchor:"middle",dy:"0.5em"}),tickFormat:e=>new Date(e).toLocaleDateString("en-US",{month:"short",year:"numeric"})}),(0,l.jsx)(m.A,{scale:S,stroke:"#374151",strokeWidth:.5,tickStroke:"transparent",tickLength:0,hideZero:!0,numTicks:5,tickFormat:e=>y(e),tickLabelProps:()=>({fill:"#6b7280",fontSize:11,fontWeight:300,letterSpacing:"0.05em",textAnchor:"end",dy:"0.33em",dx:"-0.5em"})})]})})}})}),(0,l.jsx)("div",{className:"h-[15%] w-full mt-1",children:(0,l.jsx)(b.A,{data:S,isModal:n,activeBrushDomain:n?X:W,onBrushChange:n?K:$,onClearBrush:()=>{n?(H(null),V(!1)):(q(null),U(!1))},getDate:e=>e.date.toISOString(),getValue:e=>e.value,lineColor:"#60a5fa",margin:x})})]})};return(0,l.jsxs)("div",{className:"h-full w-full relative",children:[el(0,0),(0,l.jsx)(x.A,{isOpen:t,onClose:n,title:"DEX Protocol Revenue",subtitle:"Revenue generated by DEXs on Solana",children:(0,l.jsx)("div",{className:"h-[70vh]",children:(0,l.jsxs)("div",{className:"flex h-full",children:[(0,l.jsx)("div",{className:"w-[90%] h-full pr-3 border-r border-gray-900",children:el(0,0,!0)}),(0,l.jsx)("div",{className:"w-[10%] h-full pl-3 flex flex-col justify-start items-start",children:_?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(o.A,{label:"Loading...",color:"#60a5fa",isLoading:!0}),(0,l.jsx)(o.A,{label:"Loading...",color:"#a78bfa",isLoading:!0}),(0,l.jsx)(o.A,{label:"Loading...",color:"#34d399",isLoading:!0})]}):(0,l.jsx)(x.B,{items:O.map(e=>(j.filter(t=>t.platform===e).reduce((e,t)=>e+t.protocol_revenue,0),{id:e,label:e,color:w(e)})),maxHeight:600,maxItems:28})})]})})})]})},L={"Pump Fun":"#ff6b6b",Moonshot:"#6c5ce7","makenow.meme":"#00b894",default:"#6b7280"},C=e=>L[e]||L.default,M=e=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",notation:"compact",compactDisplay:"short",maximumFractionDigits:1}).format(e);async function _(){try{var e,t;console.log("Fetching Memecoin LaunchPad revenue data from API...");let n=await fetch("https://analytics.topledger.xyz/solana/api/queries/13169/results.json?api_key=5csRuDS90HOdVaNWFua3wRc8e5gYyePNuHGcshkv",{method:"GET",headers:{"Content-Type":"application/json"},cache:"no-store"});if(!n.ok)throw Error("API request failed with status ".concat(n.status));console.log("API response received, processing data...");let l=await n.json();if(!(null==l||null==(t=l.query_result)||null==(e=t.data)?void 0:e.rows))throw Error("Invalid data structure received from API");let r=l.query_result.data.rows.map(e=>({month:e.month,platform:e.platform,protocol_revenue:parseFloat(e.protocol_revenue)||0}));console.log("Received ".concat(r.length," data points from API"));let a=r.sort((e,t)=>new Date(e.month).getTime()-new Date(t.month).getTime());return console.log("Returning ".concat(a.length," data points")),a}catch(e){throw console.error("Error fetching Launchpad revenue data:",e),Error("Failed to fetch Launchpad revenue data")}}async function P(){try{let e=await _();if(!e||0===e.length)return console.error("No Launchpad revenue data available for CSV export"),"";let t=[...e].sort((e,t)=>e.platform<t.platform?-1:e.platform>t.platform?1:new Date(e.month).getTime()-new Date(t.month).getTime()).map(e=>[e.month,e.platform,e.protocol_revenue.toFixed(2)].join(","));return["block_date,Platform,protocol_revenue_usd",...t].join("\n")}catch(e){return console.error("Error preparing Launchpad revenue CSV data:",e),""}}let E=e=>{let{className:t="w-4 h-4"}=e;return(0,l.jsx)("svg",{className:t,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,l.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})})},T=e=>Object.entries(e.reduce((e,t)=>(e[t.month]||(e[t.month]=0),e[t.month]+=t.protocol_revenue,e),{})).map(e=>{let[t,n]=e;return{month:t,date:new Date(t),value:n}}),O=e=>{let{isModalOpen:t=!1,onModalClose:n=()=>{},legendsChanged:a}=e,[j,w]=(0,r.useState)([]),[y,S]=(0,r.useState)([]),[k,A]=(0,r.useState)([]),[D,N]=(0,r.useState)(!0),[L,P]=(0,r.useState)(null),[O,F]=(0,r.useState)([]),R=(0,r.useRef)(null),I=(0,r.useRef)(null),[B,U]=(0,r.useState)(!1),[W,q]=(0,r.useState)(null),[z,V]=(0,r.useState)(!1),[X,H]=(0,r.useState)(null),[Y,G]=(0,r.useState)({visible:!1,month:"",items:[],left:0,top:0}),Q=(0,r.useCallback)(e=>Object.values(e.reduce((e,t)=>(e[t.month]||(e[t.month]={month:t.month,date:t.date||new Date(t.month)}),e[t.month][t.platform]=t.protocol_revenue,e),{})).sort((e,t)=>new Date(e.month).getTime()-new Date(t.month).getTime()),[]),Z=(0,r.useCallback)(async()=>{N(!0),P(null);try{console.log("Fetching Launchpad revenue data...");let e=await _();if(0===e.length)console.error("No data returned from API"),P("No data available for Memecoin LaunchPad revenue."),w([]),S([]),A([]),F([]);else{console.log("Successfully received ".concat(e.length," data points:"),e.slice(0,3));let t=e.map(e=>({...e,date:new Date(e.month)})),n={};t.forEach(e=>{n[e.platform]||(n[e.platform]=0),n[e.platform]+=e.protocol_revenue});let l=Object.entries(n).sort((e,t)=>t[1]-e[1]).map(e=>{let[t]=e;return t});console.log("Sorted platforms by revenue:",l),F(l),w(t);let r=Q(t);if(console.log("Prepared ".concat(r.length," stacked data points")),S(r),A(r),U(!0),q(null),a){let e=l.slice(0,5).map(e=>({label:e,color:C(e),value:n[e]}));a(e)}}}catch(e){console.error("Error loading chart data:",e),P(e instanceof Error?e.message:"Failed to load data."),w([]),S([]),A([]),F([])}finally{N(!1)}},[a,Q]);(0,r.useEffect)(()=>{Z()},[Z]),(0,r.useEffect)(()=>{if(0===y.length){k.length>0&&A([]);return}if(!W&&B)return void A(y);if(!W||!B){k.length!==y.length&&A(y);return}let[e,t]=W,n=y.filter(n=>{let l=n.date instanceof Date?n.date:new Date(n.month);return l>=e&&l<=t});A(n.length>0?n:y)},[W,y,B,k.length]),(0,r.useEffect)(()=>{t&&(H(W),V(B))},[t,W,B]);let $=(0,r.useCallback)(e=>{if(!e||0===y.length)return y;let[t,n]=e,l=y.filter(e=>{let l=e.date instanceof Date?e.date:new Date(e.month);return l>=t&&l<=n});return l.length>0?l:y},[y]),K=(0,r.useCallback)(function(e){var t;let n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],l=null==(t=(n?I:R).current)?void 0:t.getBoundingClientRect();if(!l)return;let r=e.clientX-l.left,a=n?z:B,o=n?X:W,i=a?n?$(o):k:y;if(0===i.length)return;let s={right:15,left:45},c=(l.width-s.left-s.right)/i.length,u=Math.floor((r-s.left)/c);if(u<0||u>=i.length){Y.visible&&G(e=>({...e,visible:!1}));return}let d=i[u];if(!Y.visible||Y.month!==d.month){let t=O.filter(e=>d[e]>0).map(e=>({platform:e,value:d[e],color:C(e)})).sort((e,t)=>t.value-e.value);G({visible:!0,month:d.month,items:t,left:r,top:e.clientY-l.top})}},[y,k,B,Y.visible,Y.month,O,z,X,W,$]),J=(0,r.useCallback)(()=>{Y.visible&&G(e=>({...e,visible:!1}))},[Y.visible]),ee=e=>new Date(e).toLocaleDateString("en-US",{month:"short",year:"numeric"}),et=(0,r.useCallback)(e=>{if(!e){B&&(q(null),U(!1));return}let{x0:t,x1:n}=e;q([new Date(t),new Date(n)]),B||U(!0)},[B]),en=(0,r.useCallback)(e=>{if(!e){z&&(H(null),V(!1));return}let{x0:t,x1:n}=e;H([new Date(t),new Date(n)]),z||V(!0)},[z]),el=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(D)return(0,l.jsx)("div",{className:"flex justify-center items-center h-full",children:(0,l.jsx)(g.A,{size:"sm"})});if(L||0===y.length)return(0,l.jsxs)("div",{className:"flex flex-col justify-center items-center h-full",children:[(0,l.jsx)("div",{className:"text-gray-400/80 text-xs mb-2",children:L||"No data available"}),(0,l.jsx)(p.A,{onClick:Z,children:(0,l.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,l.jsx)(E,{className:"w-3.5 h-3.5"}),(0,l.jsx)("span",{children:"Refresh"})]})})]});let r=n?X:W,a=n?z:B,o={top:10,right:15,bottom:30,left:45},x={top:5,right:o.right,bottom:10,left:o.left},w=T(j);return(0,l.jsxs)("div",{className:"flex flex-col h-full",children:[Y.visible&&Y.items.length>0&&(0,l.jsx)(v.A,{title:ee(Y.month),items:Y.items.map(e=>({color:e.color,label:e.platform,value:M(e.value),shape:"square"})),top:Y.top,left:Y.left,isModal:n}),(0,l.jsx)("div",{className:"h-[85%] w-full overflow-hidden relative",ref:n?I:R,onMouseMove:e=>K(e,n),onMouseLeave:J,children:(0,l.jsx)(i.A,{children:e=>{let{width:t,height:i}=e;if(t<=0||i<=0)return null;let g=t-o.left-o.right,p=i-o.top-o.bottom;if(g<=0||p<=0)return null;let v=a?n?$(r):k:y,x=(0,s.A)({domain:v.map(e=>e.month),range:[0,g],padding:.2}),b=(()=>{let e=g<500?6:12;if(v.length<=e)return v.map(e=>e.month);{let t=Math.ceil(v.length/(e-1));return v.filter((e,n)=>n%t==0||n===v.length-1).map(e=>e.month)}})(),j=Math.max(...v.map(e=>O.reduce((t,n)=>t+(e[n]||0),0))),w=(0,c.A)({domain:[0,1.1*j],range:[p,0],nice:!0}),S=x.bandwidth();return(0,l.jsx)("svg",{width:t,height:i,children:(0,l.jsxs)(d.A,{left:o.left,top:o.top,children:[(0,l.jsx)(f.A,{scale:w,width:g,stroke:"#1f2937",strokeOpacity:.5,strokeDasharray:"2,3"}),v.map((e,t)=>{let n=x(e.month)||0,r=p,a=[];return O.filter(t=>e[t]>0).sort((t,n)=>e[t]-e[n]).forEach(o=>{let i=p-w(e[o]||0);r-=i,a.push((0,l.jsx)(u.A,{x:n,y:r,width:S,height:i,fill:C(o),opacity:Y.month===e.month?1:.8,rx:2},"bar-".concat(t,"-").concat(o)))}),(0,l.jsx)(d.A,{children:a},"month-".concat(t))}),(0,l.jsx)(h.A,{top:p,scale:x,stroke:"#374151",strokeWidth:.5,tickStroke:"transparent",hideAxisLine:!1,tickLength:0,tickValues:b,tickLabelProps:()=>({fill:"#6b7280",fontSize:11,fontWeight:300,textAnchor:"middle",dy:"0.5em"}),tickFormat:e=>new Date(e).toLocaleDateString("en-US",{month:"short",year:"numeric"})}),(0,l.jsx)(m.A,{scale:w,stroke:"#374151",strokeWidth:.5,tickStroke:"transparent",tickLength:0,hideZero:!0,numTicks:5,tickFormat:e=>M(e),tickLabelProps:()=>({fill:"#6b7280",fontSize:11,fontWeight:300,letterSpacing:"0.05em",textAnchor:"end",dy:"0.33em",dx:"-0.5em"})})]})})}})}),(0,l.jsx)("div",{className:"h-[15%] w-full mt-1",children:(0,l.jsx)(b.A,{data:w,isModal:n,activeBrushDomain:n?X:W,onBrushChange:n?en:et,onClearBrush:()=>{n?(H(null),V(!1)):(q(null),U(!1))},getDate:e=>e.date.toISOString(),getValue:e=>e.value,lineColor:"#ff6b6b",margin:x})})]})};return(0,l.jsxs)("div",{className:"h-full w-full relative",children:[el(0,0),(0,l.jsx)(x.A,{isOpen:t,onClose:n,title:"Memecoin LaunchPad Protocol Revenue",subtitle:"Revenue generated by Memecoin LaunchPads on Solana",children:(0,l.jsx)("div",{className:"h-[70vh]",children:(0,l.jsxs)("div",{className:"flex h-full",children:[(0,l.jsx)("div",{className:"w-[90%] h-full pr-3 border-r border-gray-900",children:el(0,0,!0)}),(0,l.jsx)("div",{className:"w-[10%] h-full pl-3 flex flex-col justify-start items-start",children:D?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(o.A,{label:"Loading...",color:"#ff6b6b",isLoading:!0}),(0,l.jsx)(o.A,{label:"Loading...",color:"#6c5ce7",isLoading:!0}),(0,l.jsx)(o.A,{label:"Loading...",color:"#00b894",isLoading:!0})]}):(0,l.jsx)(x.B,{items:O.map(e=>(j.filter(t=>t.platform===e).reduce((e,t)=>e+t.protocol_revenue,0),{id:e,label:e,color:C(e)})),maxHeight:600,maxItems:28})})]})})})]})},F={Photon:"#38bdf8",GMGN:"#a855f7",DexScreener:"#f97316","Moonshot.money":"#10b981",default:"#6b7280"},R=e=>F[e]||F.default,I=e=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",notation:"compact",compactDisplay:"short",maximumFractionDigits:1}).format(e);async function B(){try{var e,t;console.log("Fetching Memecoin Trading App revenue data from API...");let n=await fetch("https://analytics.topledger.xyz/solana/api/queries/13182/results.json?api_key=TKHcPPIIfclxuUcvLvQ43vVAw6OKglHDf469m5py",{method:"GET",headers:{"Content-Type":"application/json"},cache:"no-store"});if(!n.ok)throw Error("API request failed with status ".concat(n.status));console.log("API response received, processing data...");let l=await n.json();if(!(null==l||null==(t=l.query_result)||null==(e=t.data)?void 0:e.rows))throw Error("Invalid data structure received from API");let r=l.query_result.data.rows.map(e=>({month:e.month,platform:e.platform,protocol_revenue:parseFloat(e.protocol_revenue)||0}));console.log("Received ".concat(r.length," data points from API"));let a=r.sort((e,t)=>new Date(e.month).getTime()-new Date(t.month).getTime());return console.log("Returning ".concat(a.length," data points")),a}catch(e){throw console.error("Error fetching Trading App revenue data:",e),Error("Failed to fetch Trading App revenue data")}}async function U(){try{let e=await B();if(!e||0===e.length)return console.error("No Trading App revenue data available for CSV export"),"";let t=[...e].sort((e,t)=>e.platform<t.platform?-1:e.platform>t.platform?1:new Date(e.month).getTime()-new Date(t.month).getTime()).map(e=>[e.month,e.platform,e.protocol_revenue.toFixed(2)].join(","));return["block_date,Platform,protocol_revenue_usd",...t].join("\n")}catch(e){return console.error("Error preparing Trading App revenue CSV data:",e),""}}let W=e=>{let{className:t="w-4 h-4"}=e;return(0,l.jsx)("svg",{className:t,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,l.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})})},q=e=>Object.entries(e.reduce((e,t)=>(e[t.month]||(e[t.month]=0),e[t.month]+=t.protocol_revenue,e),{})).map(e=>{let[t,n]=e;return{month:t,date:new Date(t),value:n}}),z=e=>{let{isModalOpen:t=!1,onModalClose:n=()=>{},legendsChanged:a}=e,[j,w]=(0,r.useState)([]),[y,S]=(0,r.useState)([]),[k,A]=(0,r.useState)([]),[D,N]=(0,r.useState)(!0),[L,C]=(0,r.useState)(null),[M,_]=(0,r.useState)([]),P=(0,r.useRef)(null),E=(0,r.useRef)(null),[T,O]=(0,r.useState)(!1),[F,U]=(0,r.useState)(null),[z,V]=(0,r.useState)(!1),[X,H]=(0,r.useState)(null),[Y,G]=(0,r.useState)({visible:!1,month:"",items:[],left:0,top:0}),Q=(0,r.useCallback)(e=>Object.values(e.reduce((e,t)=>(e[t.month]||(e[t.month]={month:t.month,date:t.date||new Date(t.month)}),e[t.month][t.platform]=t.protocol_revenue,e),{})).sort((e,t)=>new Date(e.month).getTime()-new Date(t.month).getTime()),[]),Z=(0,r.useCallback)(async()=>{N(!0),C(null);try{console.log("Fetching Trading App revenue data...");let e=await B();if(0===e.length)console.error("No data returned from API"),C("No data available for Memecoin Trading App revenue."),w([]),S([]),A([]),_([]);else{console.log("Successfully received ".concat(e.length," data points:"),e.slice(0,3));let t=e.map(e=>({...e,date:new Date(e.month)})),n={};t.forEach(e=>{n[e.platform]||(n[e.platform]=0),n[e.platform]+=e.protocol_revenue});let l=Object.entries(n).sort((e,t)=>t[1]-e[1]).map(e=>{let[t]=e;return t});console.log("Sorted platforms by revenue:",l),_(l),w(t);let r=Q(t);if(console.log("Prepared ".concat(r.length," stacked data points")),S(r),A(r),O(!0),U(null),a){let e=l.slice(0,5).map(e=>({label:e,color:R(e),value:n[e]}));a(e)}}}catch(e){console.error("Error loading chart data:",e),C(e instanceof Error?e.message:"Failed to load data."),w([]),S([]),A([]),_([])}finally{N(!1)}},[a,Q]);(0,r.useEffect)(()=>{Z()},[Z]),(0,r.useEffect)(()=>{if(0===y.length){k.length>0&&A([]);return}if(!F&&T)return void A(y);if(!F||!T){k.length!==y.length&&A(y);return}let[e,t]=F,n=y.filter(n=>{let l=n.date instanceof Date?n.date:new Date(n.month);return l>=e&&l<=t});A(n.length>0?n:y)},[F,y,T,k.length]),(0,r.useEffect)(()=>{t&&(H(F),V(T))},[t,F,T]);let $=(0,r.useCallback)(e=>{if(!e||0===y.length)return y;let[t,n]=e,l=y.filter(e=>{let l=e.date instanceof Date?e.date:new Date(e.month);return l>=t&&l<=n});return l.length>0?l:y},[y]),K=(0,r.useCallback)(function(e){var t;let n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],l=null==(t=(n?E:P).current)?void 0:t.getBoundingClientRect();if(!l)return;let r=e.clientX-l.left,a=n?z:T,o=n?X:F,i=a?n?$(o):k:y;if(0===i.length)return;let s={right:15,left:45},c=(l.width-s.left-s.right)/i.length,u=Math.floor((r-s.left)/c);if(u<0||u>=i.length){Y.visible&&G(e=>({...e,visible:!1}));return}let d=i[u];if(!Y.visible||Y.month!==d.month){let t=M.filter(e=>d[e]>0).map(e=>({platform:e,value:d[e],color:R(e)})).sort((e,t)=>t.value-e.value);G({visible:!0,month:d.month,items:t,left:r,top:e.clientY-l.top})}},[y,k,T,Y.visible,Y.month,M,z,X,F,$]),J=(0,r.useCallback)(()=>{Y.visible&&G(e=>({...e,visible:!1}))},[Y.visible]),ee=e=>new Date(e).toLocaleDateString("en-US",{month:"short",year:"numeric"}),et=(0,r.useCallback)(e=>{if(!e){T&&(U(null),O(!1));return}let{x0:t,x1:n}=e;U([new Date(t),new Date(n)]),T||O(!0)},[T]),en=(0,r.useCallback)(e=>{if(!e){z&&(H(null),V(!1));return}let{x0:t,x1:n}=e;H([new Date(t),new Date(n)]),z||V(!0)},[z]),el=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(D)return(0,l.jsx)("div",{className:"flex justify-center items-center h-full",children:(0,l.jsx)(g.A,{size:"sm"})});if(L||0===y.length)return(0,l.jsxs)("div",{className:"flex flex-col justify-center items-center h-full",children:[(0,l.jsx)("div",{className:"text-gray-400/80 text-xs mb-2",children:L||"No data available"}),(0,l.jsx)(p.A,{onClick:Z,children:(0,l.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,l.jsx)(W,{className:"w-3.5 h-3.5"}),(0,l.jsx)("span",{children:"Refresh"})]})})]});let r=n?X:F,a=n?z:T,o={top:10,right:15,bottom:30,left:45},x={top:5,right:o.right,bottom:10,left:o.left},w=q(j);return(0,l.jsxs)("div",{className:"flex flex-col h-full",children:[Y.visible&&Y.items.length>0&&(0,l.jsx)(v.A,{title:ee(Y.month),items:Y.items.map(e=>({color:e.color,label:e.platform,value:I(e.value),shape:"square"})),top:Y.top,left:Y.left,isModal:n}),(0,l.jsx)("div",{className:"h-[85%] w-full overflow-hidden relative",ref:n?E:P,onMouseMove:e=>K(e,n),onMouseLeave:J,children:(0,l.jsx)(i.A,{children:e=>{let{width:t,height:i}=e;if(t<=0||i<=0)return null;let g=t-o.left-o.right,p=i-o.top-o.bottom;if(g<=0||p<=0)return null;let v=a?n?$(r):k:y,x=(0,s.A)({domain:v.map(e=>e.month),range:[0,g],padding:.2}),b=(()=>{let e=g<500?6:12;if(v.length<=e)return v.map(e=>e.month);{let t=Math.ceil(v.length/(e-1));return v.filter((e,n)=>n%t==0||n===v.length-1).map(e=>e.month)}})(),j=Math.max(...v.map(e=>M.reduce((t,n)=>t+(e[n]||0),0))),w=(0,c.A)({domain:[0,1.1*j],range:[p,0],nice:!0}),S=x.bandwidth();return(0,l.jsx)("svg",{width:t,height:i,children:(0,l.jsxs)(d.A,{left:o.left,top:o.top,children:[(0,l.jsx)(f.A,{scale:w,width:g,stroke:"#1f2937",strokeOpacity:.5,strokeDasharray:"2,3"}),v.map((e,t)=>{let n=x(e.month)||0,r=p,a=[];return M.filter(t=>e[t]>0).sort((t,n)=>e[t]-e[n]).forEach(o=>{let i=p-w(e[o]||0);r-=i,a.push((0,l.jsx)(u.A,{x:n,y:r,width:S,height:i,fill:R(o),opacity:Y.month===e.month?1:.8,rx:2},"bar-".concat(t,"-").concat(o)))}),(0,l.jsx)(d.A,{children:a},"month-".concat(t))}),(0,l.jsx)(h.A,{top:p,scale:x,stroke:"#374151",strokeWidth:.5,tickStroke:"transparent",hideAxisLine:!1,tickLength:0,tickValues:b,tickLabelProps:()=>({fill:"#6b7280",fontSize:11,fontWeight:300,textAnchor:"middle",dy:"0.5em"}),tickFormat:e=>new Date(e).toLocaleDateString("en-US",{month:"short",year:"numeric"})}),(0,l.jsx)(m.A,{scale:w,stroke:"#374151",strokeWidth:.5,tickStroke:"transparent",tickLength:0,hideZero:!0,numTicks:5,tickFormat:e=>I(e),tickLabelProps:()=>({fill:"#6b7280",fontSize:11,fontWeight:300,letterSpacing:"0.05em",textAnchor:"end",dy:"0.33em",dx:"-0.5em"})})]})})}})}),(0,l.jsx)("div",{className:"h-[15%] w-full mt-1",children:(0,l.jsx)(b.A,{data:w,isModal:n,activeBrushDomain:n?X:F,onBrushChange:n?en:et,onClearBrush:()=>{n?(H(null),V(!1)):(U(null),O(!1))},getDate:e=>e.date.toISOString(),getValue:e=>e.value,lineColor:"#38bdf8",margin:x})})]})};return(0,l.jsxs)("div",{className:"h-full w-full relative",children:[el(0,0),(0,l.jsx)(x.A,{isOpen:t,onClose:n,title:"Memecoin Trading App Protocol Revenue",subtitle:"Revenue generated by Memecoin Trading Apps on Solana",children:(0,l.jsx)("div",{className:"h-[70vh]",children:(0,l.jsxs)("div",{className:"flex h-full",children:[(0,l.jsx)("div",{className:"w-[90%] h-full pr-3 border-r border-gray-900",children:el(0,0,!0)}),(0,l.jsx)("div",{className:"w-[10%] h-full pl-3 flex flex-col justify-start items-start",children:D?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(o.A,{label:"Loading...",color:"#38bdf8",isLoading:!0}),(0,l.jsx)(o.A,{label:"Loading...",color:"#a855f7",isLoading:!0}),(0,l.jsx)(o.A,{label:"Loading...",color:"#f97316",isLoading:!0})]}):(0,l.jsx)(x.B,{items:M.map(e=>(j.filter(t=>t.platform===e).reduce((e,t)=>e+t.protocol_revenue,0),{id:e,label:e,color:R(e)})),maxHeight:600,maxItems:28})})]})})})]})},V={BullX:"#38bdf8",Trojan:"#a855f7","bloom trading bot":"#f97316",Maestro:"#10b981","Sol Trading Bot":"#eab308","Banana Gun":"#ec4899",Raybot:"#6366f1",Bonkbot:"#f43f5e",Tradewiz:"#8b5cf6","blazing bot":"#14b8a6","finder bot":"#ef4444","falcon bot":"#a78bfa",default:"#6b7280"},X=e=>V[e]||V.default,H=e=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",notation:"compact",compactDisplay:"short",maximumFractionDigits:1}).format(e);async function Y(){try{var e,t;console.log("Fetching Telegram Bot revenue data from API...");let n=await fetch("https://analytics.topledger.xyz/solana/api/queries/13170/results.json?api_key=oL930Rxt1WLfufIUXUyz6QRfjXTUInkqS5foPV0j",{method:"GET",headers:{"Content-Type":"application/json"},cache:"no-store"});if(!n.ok)throw Error("API request failed with status ".concat(n.status));console.log("API response received, processing data...");let l=await n.json();if(!(null==l||null==(t=l.query_result)||null==(e=t.data)?void 0:e.rows))throw Error("Invalid data structure received from API");let r=l.query_result.data.rows.map(e=>({month:e.month,platform:e.platform,protocol_revenue:parseFloat(e.protocol_revenue)||0}));console.log("Received ".concat(r.length," data points from API"));let a=r.sort((e,t)=>new Date(e.month).getTime()-new Date(t.month).getTime());return console.log("Returning ".concat(a.length," data points")),a}catch(e){throw console.error("Error fetching Telegram Bot revenue data:",e),Error("Failed to fetch Telegram Bot revenue data")}}async function G(){try{let e=await Y();if(!e||0===e.length)return console.error("No Telegram Bot revenue data available for CSV export"),"";let t=[...e].sort((e,t)=>e.platform<t.platform?-1:e.platform>t.platform?1:new Date(e.month).getTime()-new Date(t.month).getTime()).map(e=>[e.month,e.platform,e.protocol_revenue.toFixed(2)].join(","));return["block_date,Platform,protocol_revenue_usd",...t].join("\n")}catch(e){return console.error("Error preparing Telegram Bot revenue CSV data:",e),""}}let Q=e=>{let{className:t="w-4 h-4"}=e;return(0,l.jsx)("svg",{className:t,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,l.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})})},Z=e=>Object.entries(e.reduce((e,t)=>(e[t.month]||(e[t.month]=0),e[t.month]+=t.protocol_revenue,e),{})).map(e=>{let[t,n]=e;return{month:t,date:new Date(t),value:n}}),$=e=>{let{isModalOpen:t=!1,onModalClose:n=()=>{},legendsChanged:a}=e,[j,w]=(0,r.useState)([]),[y,S]=(0,r.useState)([]),[k,A]=(0,r.useState)([]),[D,N]=(0,r.useState)(!0),[L,C]=(0,r.useState)(null),[M,_]=(0,r.useState)([]),P=(0,r.useRef)(null),E=(0,r.useRef)(null),[T,O]=(0,r.useState)(!1),[F,R]=(0,r.useState)(null),[I,B]=(0,r.useState)(!1),[U,W]=(0,r.useState)(null),[q,z]=(0,r.useState)({visible:!1,month:"",items:[],left:0,top:0}),V=(0,r.useCallback)(e=>Object.values(e.reduce((e,t)=>(e[t.month]||(e[t.month]={month:t.month,date:t.date||new Date(t.month)}),e[t.month][t.platform]=t.protocol_revenue,e),{})).sort((e,t)=>new Date(e.month).getTime()-new Date(t.month).getTime()),[]),G=(0,r.useCallback)(async()=>{N(!0),C(null);try{console.log("Fetching Telegram Bot revenue data...");let e=await Y();if(0===e.length)console.error("No data returned from API"),C("No data available for Telegram Bot revenue."),w([]),S([]),A([]),_([]);else{console.log("Successfully received ".concat(e.length," data points:"),e.slice(0,3));let t=e.map(e=>({...e,date:new Date(e.month)})),n={};t.forEach(e=>{n[e.platform]||(n[e.platform]=0),n[e.platform]+=e.protocol_revenue});let l=Object.entries(n).sort((e,t)=>t[1]-e[1]).map(e=>{let[t]=e;return t});console.log("Sorted platforms by revenue:",l),_(l),w(t);let r=V(t);if(console.log("Prepared ".concat(r.length," stacked data points")),S(r),A(r),O(!0),R(null),a){let e=l.slice(0,5).map(e=>({label:e,color:X(e),value:n[e]}));a(e)}}}catch(e){console.error("Error loading chart data:",e),C(e instanceof Error?e.message:"Failed to load data."),w([]),S([]),A([]),_([])}finally{N(!1)}},[a,V]);(0,r.useEffect)(()=>{G()},[G]),(0,r.useEffect)(()=>{if(0===y.length){k.length>0&&A([]);return}if(!F&&T)return void A(y);if(!F||!T){k.length!==y.length&&A(y);return}let[e,t]=F,n=y.filter(n=>{let l=n.date instanceof Date?n.date:new Date(n.month);return l>=e&&l<=t});A(n.length>0?n:y)},[F,y,T,k.length]),(0,r.useEffect)(()=>{t&&(W(F),B(T))},[t,F,T]);let $=(0,r.useCallback)(e=>{if(!e||0===y.length)return y;let[t,n]=e,l=y.filter(e=>{let l=e.date instanceof Date?e.date:new Date(e.month);return l>=t&&l<=n});return l.length>0?l:y},[y]),K=(0,r.useCallback)(function(e){var t;let n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],l=null==(t=(n?E:P).current)?void 0:t.getBoundingClientRect();if(!l)return;let r=e.clientX-l.left,a=n?I:T,o=n?U:F,i=a?n?$(o):k:y;if(0===i.length)return;let s={right:15,left:45},c=(l.width-s.left-s.right)/i.length,u=Math.floor((r-s.left)/c);if(u<0||u>=i.length){q.visible&&z(e=>({...e,visible:!1}));return}let d=i[u];if(!q.visible||q.month!==d.month){let t=M.filter(e=>d[e]>0).map(e=>({platform:e,value:d[e],color:X(e)})).sort((e,t)=>t.value-e.value);z({visible:!0,month:d.month,items:t,left:r,top:e.clientY-l.top})}},[y,k,T,q.visible,q.month,M,I,U,F,$]),J=(0,r.useCallback)(()=>{q.visible&&z(e=>({...e,visible:!1}))},[q.visible]),ee=e=>new Date(e).toLocaleDateString("en-US",{month:"short",year:"numeric"}),et=(0,r.useCallback)(e=>{if(!e){T&&(R(null),O(!1));return}let{x0:t,x1:n}=e;R([new Date(t),new Date(n)]),T||O(!0)},[T]),en=(0,r.useCallback)(e=>{if(!e){I&&(W(null),B(!1));return}let{x0:t,x1:n}=e;W([new Date(t),new Date(n)]),I||B(!0)},[I]),el=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(D)return(0,l.jsx)("div",{className:"flex justify-center items-center h-full",children:(0,l.jsx)(g.A,{size:"sm"})});if(L||0===y.length)return(0,l.jsxs)("div",{className:"flex flex-col justify-center items-center h-full",children:[(0,l.jsx)("div",{className:"text-gray-400/80 text-xs mb-2",children:L||"No data available"}),(0,l.jsx)(p.A,{onClick:G,children:(0,l.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,l.jsx)(Q,{className:"w-3.5 h-3.5"}),(0,l.jsx)("span",{children:"Refresh"})]})})]});let r=n?U:F,a=n?I:T,o={top:10,right:15,bottom:30,left:45},x={top:5,right:o.right,bottom:10,left:o.left},w=Z(j);return(0,l.jsxs)("div",{className:"flex flex-col h-full",children:[q.visible&&q.items.length>0&&(0,l.jsx)(v.A,{title:ee(q.month),items:q.items.map(e=>({color:e.color,label:e.platform,value:H(e.value),shape:"square"})),top:q.top,left:q.left,isModal:n}),(0,l.jsx)("div",{className:"h-[85%] w-full overflow-hidden relative",ref:n?E:P,onMouseMove:e=>K(e,n),onMouseLeave:J,children:(0,l.jsx)(i.A,{children:e=>{let{width:t,height:i}=e;if(t<=0||i<=0)return null;let g=t-o.left-o.right,p=i-o.top-o.bottom;if(g<=0||p<=0)return null;let v=a?n?$(r):k:y,x=(0,s.A)({domain:v.map(e=>e.month),range:[0,g],padding:.2}),b=(()=>{let e=g<500?6:12;if(v.length<=e)return v.map(e=>e.month);{let t=Math.ceil(v.length/(e-1));return v.filter((e,n)=>n%t==0||n===v.length-1).map(e=>e.month)}})(),j=Math.max(...v.map(e=>M.reduce((t,n)=>t+(e[n]||0),0))),w=(0,c.A)({domain:[0,1.1*j],range:[p,0],nice:!0}),S=x.bandwidth();return(0,l.jsx)("svg",{width:t,height:i,children:(0,l.jsxs)(d.A,{left:o.left,top:o.top,children:[(0,l.jsx)(f.A,{scale:w,width:g,stroke:"#1f2937",strokeOpacity:.5,strokeDasharray:"2,3"}),v.map((e,t)=>{let n=x(e.month)||0,r=p,a=[];return M.filter(t=>e[t]>0).sort((t,n)=>e[t]-e[n]).forEach(o=>{let i=p-w(e[o]||0);r-=i,a.push((0,l.jsx)(u.A,{x:n,y:r,width:S,height:i,fill:X(o),opacity:q.month===e.month?1:.8,rx:2},"bar-".concat(t,"-").concat(o)))}),(0,l.jsx)(d.A,{children:a},"month-".concat(t))}),(0,l.jsx)(h.A,{top:p,scale:x,stroke:"#374151",strokeWidth:.5,tickStroke:"transparent",hideAxisLine:!1,tickLength:0,tickValues:b,tickLabelProps:()=>({fill:"#6b7280",fontSize:11,fontWeight:300,textAnchor:"middle",dy:"0.5em"}),tickFormat:e=>new Date(e).toLocaleDateString("en-US",{month:"short",year:"numeric"})}),(0,l.jsx)(m.A,{scale:w,stroke:"#374151",strokeWidth:.5,tickStroke:"transparent",tickLength:0,hideZero:!0,numTicks:5,tickFormat:e=>H(e),tickLabelProps:()=>({fill:"#6b7280",fontSize:11,fontWeight:300,letterSpacing:"0.05em",textAnchor:"end",dy:"0.33em",dx:"-0.5em"})})]})})}})}),(0,l.jsx)("div",{className:"h-[15%] w-full mt-1",children:(0,l.jsx)(b.A,{data:w,isModal:n,activeBrushDomain:n?U:F,onBrushChange:n?en:et,onClearBrush:()=>{n?(W(null),B(!1)):(R(null),O(!1))},getDate:e=>e.date.toISOString(),getValue:e=>e.value,lineColor:"#8b5cf6",margin:x})})]})};return(0,l.jsxs)("div",{className:"h-full w-full relative",children:[el(0,0),(0,l.jsx)(x.A,{isOpen:t,onClose:n,title:"Telegram Bot Protocol Revenue",subtitle:"Revenue generated by Telegram Bots on Solana",children:(0,l.jsx)("div",{className:"h-[70vh]",children:(0,l.jsxs)("div",{className:"flex h-full",children:[(0,l.jsx)("div",{className:"w-[90%] h-full pr-3 border-r border-gray-900",children:el(0,0,!0)}),(0,l.jsx)("div",{className:"w-[10%] h-full pl-3 flex flex-col justify-start items-start",children:D?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(o.A,{label:"Loading...",color:"#38bdf8",isLoading:!0}),(0,l.jsx)(o.A,{label:"Loading...",color:"#a855f7",isLoading:!0}),(0,l.jsx)(o.A,{label:"Loading...",color:"#f97316",isLoading:!0})]}):(0,l.jsx)(x.B,{items:M.map(e=>(j.filter(t=>t.platform===e).reduce((e,t)=>e+t.protocol_revenue,0),{id:e,label:e,color:X(e)})),maxHeight:600,maxItems:28})})]})})})]})};var K=n(1136),J=n(82229);function ee(){let[e,t]=(0,r.useState)("absolute"),[n,i]=(0,r.useState)([]),[s,c]=(0,r.useState)([]),[u,d]=(0,r.useState)([]),[h,m]=(0,r.useState)([]),[f,g]=(0,r.useState)(!1),[p,v]=(0,r.useState)(!1),[x,b]=(0,r.useState)(!1),[j,w]=(0,r.useState)(!1),[y,S]=(0,r.useState)(!1),[A,D]=(0,r.useState)(!1),[L,C]=(0,r.useState)(!1),[M,_]=(0,r.useState)(!1),E=async()=>{y||await (0,K.f)(k,"dex-revenue.csv",S)},T=async()=>{A||await (0,K.f)(P,"launchpad-revenue.csv",D)},F=async()=>{L||await (0,K.f)(U,"trading-app-revenue.csv",C)},R=async()=>{M||await (0,K.f)(G,"telegram-bot-revenue.csv",_)},I=e=>void 0===e?"":new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",notation:"compact",compactDisplay:"short",maximumFractionDigits:1}).format(e);return(0,l.jsxs)("div",{className:"space-y-6",children:[(0,l.jsxs)("section",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:[(0,l.jsx)(a.A,{title:"DEX Protocol Revenue",description:"Revenue generated by DEXs on Solana",accentColor:"blue",onExpandClick:()=>g(!0),onDownloadClick:E,isDownloading:y,legendWidth:"1/5",className:"h-[500px]",legend:(0,l.jsx)(l.Fragment,{children:n.map(e=>(0,l.jsx)(o.A,{label:e.label,color:e.color,shape:"square",tooltipText:e.value?I(e.value):void 0},e.label))}),children:(0,l.jsx)(N,{isModalOpen:f,onModalClose:()=>g(!1),legendsChanged:i})}),(0,l.jsx)(a.A,{title:"Memecoin LaunchPad Revenue",description:"Revenue generated by Memecoin LaunchPads on Solana",accentColor:"purple",onExpandClick:()=>v(!0),onDownloadClick:T,isDownloading:A,legendWidth:"1/5",className:"h-[500px]",legend:(0,l.jsx)(l.Fragment,{children:s.map(e=>(0,l.jsx)(o.A,{label:e.label,color:e.color,shape:"square",tooltipText:e.value?I(e.value):void 0},e.label))}),children:(0,l.jsx)(O,{isModalOpen:p,onModalClose:()=>v(!1),legendsChanged:c})})]}),(0,l.jsxs)("section",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:[(0,l.jsx)(a.A,{title:"Memecoin Trading App Revenue",description:"Revenue generated by Memecoin Trading Apps on Solana",accentColor:"green",onExpandClick:()=>b(!0),onDownloadClick:F,isDownloading:L,legendWidth:"1/5",className:"h-[500px]",legend:(0,l.jsx)(l.Fragment,{children:u.map(e=>(0,l.jsx)(o.A,{label:e.label,color:e.color,shape:"square",tooltipText:e.value?I(e.value):void 0},e.label))}),children:(0,l.jsx)(z,{isModalOpen:x,onModalClose:()=>b(!1),legendsChanged:d})}),(0,l.jsx)(a.A,{title:"Telegram Bot Revenue",description:"Revenue generated by Telegram Bots on Solana",accentColor:"orange",onExpandClick:()=>w(!0),onDownloadClick:R,isDownloading:M,legendWidth:"1/5",className:"h-[500px]",legend:(0,l.jsx)(l.Fragment,{children:h.map(e=>(0,l.jsx)(o.A,{label:e.label,color:e.color,shape:"square",tooltipText:e.value?I(e.value):void 0},e.label))}),children:(0,l.jsx)($,{isModalOpen:j,onModalClose:()=>w(!1),legendsChanged:m})})]}),(0,l.jsx)(J.default,{pageId:"dex-ecosystem"})]})}},10255:(e,t,n)=>{"use strict";function l(e){let{moduleIds:t}=e;return null}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"PreloadChunks",{enumerable:!0,get:function(){return l}}),n(95155),n(47650),n(85744),n(20589)},17828:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"workAsyncStorageInstance",{enumerable:!0,get:function(){return l}});let l=(0,n(64054).createAsyncLocalStorage)()},34944:(e,t,n)=>{Promise.resolve().then(n.bind(n,9331))},36645:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return r}});let l=n(88229)._(n(67357));function r(e,t){var n;let r={};"function"==typeof e&&(r.loader=e);let a={...r,...t};return(0,l.default)({...a,modules:null==(n=a.loadableGenerated)?void 0:n.modules})}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},45191:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});var l=n(28749),r=n(95442),a=(0,n(70222).A)("domain","range","reverse","align","padding","round");function o(e){return a(function e(){var t,n,a=(0,r.A)().unknown(void 0),o=a.domain,i=a.range,s=0,c=1,u=!1,d=0,h=0,m=.5;function f(){var e=o().length,l=c<s,r=l?c:s,a=l?s:c;t=(a-r)/Math.max(1,e-d+2*h),u&&(t=Math.floor(t)),r+=(a-r-t*(e-d))*m,n=t*(1-d),u&&(r=Math.round(r),n=Math.round(n));var f=(function(e,t,n){e*=1,t*=1,n=(r=arguments.length)<2?(t=e,e=0,1):r<3?1:+n;for(var l=-1,r=0|Math.max(0,Math.ceil((t-e)/n)),a=Array(r);++l<r;)a[l]=e+l*n;return a})(e).map(function(e){return r+t*e});return i(l?f.reverse():f)}return delete a.unknown,a.domain=function(e){return arguments.length?(o(e),f()):o()},a.range=function(e){return arguments.length?([s,c]=e,s*=1,c*=1,f()):[s,c]},a.rangeRound=function(e){return[s,c]=e,s*=1,c*=1,u=!0,f()},a.bandwidth=function(){return n},a.step=function(){return t},a.round=function(e){return arguments.length?(u=!!e,f()):u},a.padding=function(e){return arguments.length?(d=Math.min(1,h=+e),f()):d},a.paddingInner=function(e){return arguments.length?(d=Math.min(1,e),f()):d},a.paddingOuter=function(e){return arguments.length?(h=+e,f()):h},a.align=function(e){return arguments.length?(m=Math.max(0,Math.min(1,e)),f()):m},a.copy=function(){return e(o(),[s,c]).round(u).paddingInner(d).paddingOuter(h).align(m)},l.C.apply(f(),arguments)}(),e)}},55028:(e,t,n)=>{"use strict";n.d(t,{default:()=>r.a});var l=n(36645),r=n.n(l)},62146:(e,t,n)=>{"use strict";function l(e){let{reason:t,children:n}=e;return n}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"BailoutToCSR",{enumerable:!0,get:function(){return l}}),n(45262)},64054:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),!function(e,t){for(var n in t)Object.defineProperty(e,n,{enumerable:!0,get:t[n]})}(t,{bindSnapshot:function(){return o},createAsyncLocalStorage:function(){return a},createSnapshot:function(){return i}});let n=Object.defineProperty(Error("Invariant: AsyncLocalStorage accessed in runtime where it is not available"),"__NEXT_ERROR_CODE",{value:"E504",enumerable:!1,configurable:!0});class l{disable(){throw n}getStore(){}run(){throw n}exit(){throw n}enterWith(){throw n}static bind(e){return e}}let r="undefined"!=typeof globalThis&&globalThis.AsyncLocalStorage;function a(){return r?new r:new l}function o(e){return r?r.bind(e):l.bind(e)}function i(){return r?r.snapshot():function(e,...t){return e(...t)}}},67357:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return s}});let l=n(95155),r=n(12115),a=n(62146);function o(e){return{default:e&&"default"in e?e.default:e}}n(10255);let i={loader:()=>Promise.resolve(o(()=>null)),loading:null,ssr:!0},s=function(e){let t={...i,...e},n=(0,r.lazy)(()=>t.loader().then(o)),s=t.loading;function c(e){let o=s?(0,l.jsx)(s,{isLoading:!0,pastDelay:!0,error:null}):null,i=!t.ssr||!!t.loading,c=i?r.Suspense:r.Fragment,u=t.ssr?(0,l.jsxs)(l.Fragment,{children:[null,(0,l.jsx)(n,{...e})]}):(0,l.jsx)(a.BailoutToCSR,{reason:"next/dynamic",children:(0,l.jsx)(n,{...e})});return(0,l.jsx)(c,{...i?{fallback:o}:{},children:u})}return c.displayName="LoadableComponent",c}},81838:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});var l=n(95155);n(12115);let r=e=>{let{type:t,color:n}=e;return"circle"===t?(0,l.jsx)("div",{className:"h-2 w-2 rounded-full mr-1.5",style:{backgroundColor:n}}):(0,l.jsx)("div",{className:"h-2 w-2 rounded-sm mr-1.5",style:{backgroundColor:n}})},a=(e,t)=>{if(/^\d{4}-\d{2}-\d{2}/.test(e)||/^\d{2}\/\d{2}\/\d{4}/.test(e)){let n=new Date(e);if(!isNaN(n.getTime())){if("W"===t)return"Week of ".concat(n.toLocaleDateString("en-US",{month:"short",day:"2-digit",year:"numeric"}));if("M"===t)return n.toLocaleDateString("en-US",{month:"short",year:"numeric"});if("Q"===t){let e=Math.floor(n.getMonth()/3)+1;return"Q".concat(e,", ").concat(n.getFullYear())}else if("Y"===t)return n.getFullYear().toString();return n.toLocaleDateString("en-US",{month:"short",day:"2-digit",year:"numeric"})}}return/^[A-Za-z]{3}\s\d{4}$/.test(e)||/^Q[1-4]\s\d{4}$/.test(e)||/^\d{4}$/.test(e),e},o=(e,t)=>{if("string"==typeof e){if(t){let n={USD:"$",EUR:"€",GBP:"\xa3",JPY:"\xa5",CNY:"\xa5",SOL:"SOL"},l=n[t]||t;if("SOL"===t){if(e.includes("SOL"))return e;for(let[t,l]of Object.entries(n))if("SOL"!==t&&e.startsWith(l))return"".concat(e.substring(l.length)," SOL");return"".concat(e," SOL")}for(let[r,a]of Object.entries(n))if(e.startsWith(a)&&r!==t)return e.replace(a,l)}return e}if("number"==typeof e){if(t)switch(t){case"USD":return"$".concat(e.toLocaleString());case"EUR":return"€".concat(e.toLocaleString());case"GBP":return"\xa3".concat(e.toLocaleString());case"JPY":case"CNY":return"\xa5".concat(e.toLocaleString());case"SOL":return"".concat(e.toLocaleString()," SOL");default:return"".concat(t).concat(e.toLocaleString())}return e.toLocaleString()}return String(e)},i=e=>{let{title:t,items:n,top:i,left:s,isModal:c=!1,timeFilter:u,currencyFilter:d}=e,h=n.some(e=>e.axis),m=a(t,u);return(0,l.jsxs)("div",{className:"absolute z-10 pointer-events-none bg-gray-900/95 shadow-lg border border-gray-800 rounded-md p-2 text-xs min-w-[120px]",style:{top:"".concat(i,"px"),left:s>(c?500:250)?"".concat(s-160,"px"):"".concat(s+10,"px"),transform:"translateY(-100%)"},children:[(0,l.jsx)("div",{className:"text-gray-400 text-[10px] font-normal pb-1 mb-1 border-b border-gray-800",children:m}),(0,l.jsx)("div",{className:"space-y-1",children:n.map((e,t)=>(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsxs)("div",{className:"flex items-center text-gray-400",children:[(0,l.jsx)(r,{type:e.shape||"circle",color:e.color}),(0,l.jsx)("span",{className:"text-gray-400 font-normal ml-2",children:e.label}),h&&e.axis&&(0,l.jsxs)("span",{className:"ml-1 text-[9px] text-gray-500",children:["(",e.axis," axis)"]})]}),(0,l.jsx)("span",{className:"text-gray-300 font-normal ml-4",children:o(e.value,d)})]},"tooltip-item-".concat(t)))})]})}},85744:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"workAsyncStorage",{enumerable:!0,get:function(){return l.workAsyncStorageInstance}});let l=n(17828)},95442:(e,t,n)=>{"use strict";n.d(t,{A:()=>function e(){var t=new l,n=[],r=[],a=i;function s(e){let l=t.get(e);if(void 0===l){if(a!==i)return a;t.set(e,l=n.push(e)-1)}return r[l%r.length]}return s.domain=function(e){if(!arguments.length)return n.slice();for(let r of(n=[],t=new l,e))t.has(r)||t.set(r,n.push(r)-1);return s},s.range=function(e){return arguments.length?(r=Array.from(e),s):r.slice()},s.unknown=function(e){return arguments.length?(a=e,s):a},s.copy=function(){return e(n,r).unknown(a)},o.C.apply(s,arguments),s}});class l extends Map{constructor(e,t=a){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:t}}),null!=e)for(let[t,n]of e)this.set(t,n)}get(e){return super.get(r(this,e))}has(e){return super.has(r(this,e))}set(e,t){return super.set(function({_intern:e,_key:t},n){let l=t(n);return e.has(l)?e.get(l):(e.set(l,n),n)}(this,e),t)}delete(e){return super.delete(function({_intern:e,_key:t},n){let l=t(n);return e.has(l)&&(n=e.get(l),e.delete(l)),n}(this,e))}}function r({_intern:e,_key:t},n){let l=t(n);return e.has(l)?e.get(l):n}function a(e){return null!==e&&"object"==typeof e?e.valueOf():e}var o=n(28749);let i=Symbol("implicit")}},e=>{var t=t=>e(e.s=t);e.O(0,[4410,5083,166,1182,5955,4685,3414,2207,2229,8441,1684,7358],()=>t(34944)),_N_E=e.O()}]);