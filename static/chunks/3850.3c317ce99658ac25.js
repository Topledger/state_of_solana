"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3850,4705],{45191:(e,t,n)=>{n.d(t,{A:()=>i});var r=n(28749),a=n(95442),l=(0,n(70222).A)("domain","range","reverse","align","padding","round");function i(e){return l(function e(){var t,n,l=(0,a.A)().unknown(void 0),i=l.domain,o=l.range,s=0,c=1,u=!1,d=0,h=0,f=.5;function m(){var e=i().length,r=c<s,a=r?c:s,l=r?s:c;t=(l-a)/Math.max(1,e-d+2*h),u&&(t=Math.floor(t)),a+=(l-a-t*(e-d))*f,n=t*(1-d),u&&(a=Math.round(a),n=Math.round(n));var m=(function(e,t,n){e*=1,t*=1,n=(a=arguments.length)<2?(t=e,e=0,1):a<3?1:+n;for(var r=-1,a=0|Math.max(0,Math.ceil((t-e)/n)),l=Array(a);++r<a;)l[r]=e+r*n;return l})(e).map(function(e){return a+t*e});return o(r?m.reverse():m)}return delete l.unknown,l.domain=function(e){return arguments.length?(i(e),m()):i()},l.range=function(e){return arguments.length?([s,c]=e,s*=1,c*=1,m()):[s,c]},l.rangeRound=function(e){return[s,c]=e,s*=1,c*=1,u=!0,m()},l.bandwidth=function(){return n},l.step=function(){return t},l.round=function(e){return arguments.length?(u=!!e,m()):u},l.padding=function(e){return arguments.length?(d=Math.min(1,h=+e),m()):d},l.paddingInner=function(e){return arguments.length?(d=Math.min(1,e),m()):d},l.paddingOuter=function(e){return arguments.length?(h=+e,m()):h},l.align=function(e){return arguments.length?(f=Math.max(0,Math.min(1,e)),m()):f},l.copy=function(){return e(i(),[s,c]).round(u).paddingInner(d).paddingOuter(h).align(f)},r.C.apply(m(),arguments)}(),e)}},63850:(e,t,n)=>{n.r(t),n.d(t,{default:()=>y});var r=n(95155),a=n(12115),l=n(79111),i=n(41995),o=n(50109),s=n(45191),c=n(4904),u=n(72630),d=n(58888),h=n(71734),f=n(64705),m=n(51078),g=n(81838),x=n(7545),p=n(52594),v=n(42028);let b=e=>{let{className:t="w-4 h-4"}=e;return(0,r.jsx)("svg",{className:t,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})})},y=e=>{let{isModalOpen:t=!1,onModalClose:n=()=>{},onUpdateLegends:y}=e,[S,j]=(0,a.useState)([]),[w,M]=(0,a.useState)(!0),[N,k]=(0,a.useState)(null),[A,D]=(0,a.useState)([]),[L,C]=(0,a.useState)([]),[U,O]=(0,a.useState)(null),[E,T]=(0,a.useState)(!1),[_,Y]=(0,a.useState)([]),[B,F]=(0,a.useState)(null),[P,R]=(0,a.useState)(!1),[W,q]=(0,a.useState)([]),G=(0,a.useRef)(null),$=(0,a.useRef)(null),[z,I]=(0,a.useState)({visible:!1,month:"",left:0,top:0,data:{}}),Q=(0,a.useCallback)(async()=>{M(!0),k(null);try{let e=await (0,f.fetchMintBurnData)();if(0===e.length){k("No data available."),j([]);return}j(e);let t=[...new Set(e.map(e=>e.mint))];C(t);let n=H(e,"Mint_Amount");if(D(n),Y(n),y){let n=t.map(t=>{let n=e.filter(e=>e.mint===t).reduce((e,t)=>e+t.Mint_Amount,0);return{label:t,color:(0,f.Gy)(t),value:n}}).sort((e,t)=>(t.value||0)-(e.value||0));y(n)}T(!0),O(null)}catch(t){console.error("[MintChart] Error loading chart data:",t);let e="Failed to load data.";t instanceof Error&&(e=t.message||e),k(e),j([]),D([]),Y([])}finally{M(!1)}},[y]),H=(e,t)=>Object.values(e.reduce((e,n)=>(e[n.Month]||(e[n.Month]={month:n.Month,date:new Date(n.Month),total:0},L.forEach(t=>{e[n.Month][t]=0})),e[n.Month][n.mint]=(e[n.Month][n.mint]||0)+n[t],e[n.Month].total+=n[t],e),{})).sort((e,t)=>e.date.getTime()-t.date.getTime());(0,a.useEffect)(()=>{Q()},[Q]),(0,a.useEffect)(()=>{if(0===A.length)return void Y([]);if(!U&&E||!U||!E)return void Y(A);let[e,t]=U,n=e.getTime(),r=t.getTime(),a=A.filter(e=>{let t=e.date.getTime();return t>=n&&t<=r});Y(a.length>0?a:A)},[U,A,E]),(0,a.useEffect)(()=>{if(0===A.length)return void q([]);if(!B&&P||!B||!P)return void q(A);let[e,t]=B,n=e.getTime(),r=t.getTime(),a=A.filter(e=>{let t=e.date.getTime();return t>=n&&t<=r});q(a.length>0?a:A)},[B,A,P]),(0,a.useEffect)(()=>{t&&(q(_),R(E),F(U))},[t,_,E,U]);let J=(0,a.useCallback)(e=>{if(!e){E&&(O(null),T(!1));return}let{x0:t,x1:n}=e,r=new Date(t),a=new Date(n);!(isNaN(r.getTime())||isNaN(a.getTime()))&&(O([r,a]),E||T(!0))},[E]),X=(0,a.useCallback)(e=>{if(!e){P&&(F(null),R(!1));return}let{x0:t,x1:n}=e,r=new Date(t),a=new Date(n);!(isNaN(r.getTime())||isNaN(a.getTime()))&&(F([r,a]),P||R(!0))},[P]),K=(0,a.useCallback)(function(e){var t;let n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=null==(t=(n?$:G).current)?void 0:t.getBoundingClientRect();if(!r)return;let a=e.clientX-r.left,l=e.clientY-r.top,i={left:45},o=r.width-i.left-20,s=n?P?W:A:E?_:A;if(a<i.left||a>o+i.left||0===s.length){z.visible&&I(e=>({...e,visible:!1}));return}let c=o/s.length,u=Math.floor((a-i.left)/c);if(u>=0&&u<s.length){let e=s[u];z.visible&&z.month===e.month||I({visible:!0,month:e.month,left:a,top:l,data:e})}},[_,W,A,E,P,z.visible,z.month]),V=(0,a.useCallback)(()=>{z.visible&&I(e=>({...e,visible:!1}))},[z.visible]),Z=(0,a.useCallback)(e=>(0,f.vv)(e),[]),ee=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=n?P?W:A:E?_:A;return w?(0,r.jsx)("div",{className:"flex justify-center items-center h-full",children:(0,r.jsx)(m.A,{size:"sm"})}):N||0===a.length?(0,r.jsxs)("div",{className:"flex flex-col justify-center items-center h-full",children:[(0,r.jsx)("div",{className:"text-gray-400/80 text-xs mb-2",children:N||"No data available"}),(0,r.jsx)(x.A,{onClick:Q,children:(0,r.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,r.jsx)(b,{className:"w-3.5 h-3.5"}),(0,r.jsx)("span",{children:"Refresh"})]})})]}):(0,r.jsxs)("div",{className:"flex flex-col h-full",children:[z.visible&&z.data&&(0,r.jsx)(g.A,{title:(0,f.Yq)(z.month),items:L.filter(e=>z.data[e]>0).sort((e,t)=>z.data[t]-z.data[e]).map(e=>({color:(0,f.Gy)(e),label:e,value:(0,f.vv)(z.data[e]),shape:"square"})),top:z.top,left:z.left}),(0,r.jsx)("div",{className:"h-[85%] w-full overflow-hidden relative",ref:n?$:G,onMouseMove:e=>K(e,n),onMouseLeave:V,children:(0,r.jsx)(l.A,{children:e=>{let{width:t,height:n}=e;if(t<=0||n<=0)return null;let l={top:5,right:25,bottom:30,left:45},m=t-l.left-l.right,g=n-l.top-l.bottom;if(m<=0||g<=0)return null;let x=(0,s.A)({domain:a.map(e=>e.month),range:[0,m],padding:.3}),p=Math.max(...a.map(e=>e.total)),v=(0,c.A)({domain:[0,1.1*p],range:[g,0],nice:!0}),b=x.bandwidth();return(0,r.jsx)("svg",{width:t,height:n,children:(0,r.jsxs)(i.A,{left:l.left,top:l.top,children:[(0,r.jsx)(o.A,{scale:v,width:m,stroke:"#1f2937",strokeOpacity:.5,strokeDasharray:"2,3"}),a.map((e,t)=>{let n=x(e.month)||0,a=g,l=[];return L.filter(t=>e[t]>0).sort((t,n)=>e[t]-e[n]).forEach(i=>{let o=g-v(e[i]||0);a-=o,l.push((0,r.jsx)(h.A,{x:n,y:a,width:b,height:o,fill:(0,f.Gy)(i),opacity:z.month===e.month?1:.8,rx:2},"bar-".concat(t,"-").concat(i)))}),(0,r.jsx)(i.A,{children:l},"month-".concat(t))}),(0,r.jsx)(u.A,{top:g,scale:x,tickFormat:f.Yq,stroke:"#374151",strokeWidth:.5,tickStroke:"transparent",tickLength:0,hideAxisLine:!1,numTicks:t>500?12:6,tickLabelProps:()=>({fill:"#6b7280",fontSize:11,fontWeight:300,textAnchor:"middle",dy:"0.5em"})}),(0,r.jsx)(d.A,{scale:v,stroke:"#374151",strokeWidth:.5,tickStroke:"transparent",tickLength:0,tickFormat:Z,tickLabelProps:()=>({fill:"#6b7280",fontSize:11,fontWeight:300,textAnchor:"end",dx:"-0.5em",dy:"0.25em"})})]})})}})}),(0,r.jsx)("div",{className:"h-[15%] w-full mt-1",children:(0,r.jsx)(v.A,{data:A,isModal:n,activeBrushDomain:n?B:U,onBrushChange:n?X:J,onClearBrush:n?()=>{F(null),R(!1)}:()=>{O(null),T(!1)},getDate:e=>e.date,getValue:e=>e.total,lineColor:"#60a5fa",margin:{top:5,right:25,bottom:10,left:45}})})]})};return(0,r.jsxs)("div",{className:"h-full w-full relative",children:[ee(0,0),(0,r.jsx)(p.A,{isOpen:t,onClose:n,title:"Stablecoin Mint Amount",subtitle:"Monthly mint amounts by stablecoin",children:(0,r.jsx)("div",{className:"h-[60vh]",children:(0,r.jsxs)("div",{className:"flex h-full",children:[(0,r.jsx)("div",{className:"w-[90%] h-full pr-3 border-r border-gray-900",children:ee(0,0,!0)}),(0,r.jsx)("div",{className:"w-[10%] h-full pl-3",children:(0,r.jsxs)("div",{className:"flex flex-col gap-1 text-[11px] text-gray-300",children:[(0,r.jsx)("div",{className:"mb-2 text-gray-400 font-medium",children:"STABLECOINS"}),L.sort((e,t)=>{let n=S.filter(t=>t.mint===e).reduce((e,t)=>e+t.Mint_Amount,0);return S.filter(e=>e.mint===t).reduce((e,t)=>e+t.Mint_Amount,0)-n}).map(e=>(0,r.jsxs)("div",{className:"flex items-center mb-1",children:[(0,r.jsx)("div",{className:"w-2.5 h-2.5 rounded-sm mr-1.5",style:{backgroundColor:(0,f.Gy)(e)}}),(0,r.jsx)("span",{children:e})]},e))]})})]})})})]})}},64705:(e,t,n)=>{n.d(t,{Gy:()=>a,Yq:()=>l,fetchMintBurnData:()=>o,vv:()=>i});let r={USDC:"#2775ca",USDT:"#26a17b",PYUSD:"#8a2be2",USDe:"#ffa500",EURC:"#4169e1",EUROe:"#007bff",USDY:"#20b2aa",FDUSD:"#ff6347",sUSD:"#ff69b4",USDS:"#4b0082",AUSD:"#8b4513",USDG:"#708090"};function a(e){return r[e]||"#999999"}let l=e=>new Date(e).toLocaleDateString("en-US",{month:"short",year:"numeric"}),i=e=>e>=1e6?"$".concat((e/1e6).toFixed(2),"M"):e>=1e3?"$".concat((e/1e3).toFixed(2),"K"):"$".concat(e.toFixed(2));async function o(){try{let e=await fetch("https://analytics.topledger.xyz/tl/api/queries/12796/results.json?api_key=FsMRolQsXioS23lMYqhIqoD98nrm2EjkxgeqyPuW");if(!e.ok)throw Error("API responded with status: ".concat(e.status));return(await e.json()).query_result.data.rows.map(e=>({Month:e.Month,mint:e.mint||"Unknown",Mint_Amount:Number(e.Mint_Amount)||0,Burn_Amount:Number(e.Burn_Amount)||0,date:new Date(e.Month)})).sort((e,t)=>{let n=new Date(e.Month).getTime()-new Date(t.Month).getTime();return 0!==n?n:e.mint.localeCompare(t.mint)})}catch(e){throw console.error("Error fetching mint-burn data:",e),Error("Failed to fetch stablecoin mint-burn data")}}},81838:(e,t,n)=>{n.d(t,{A:()=>o});var r=n(95155);n(12115);let a=e=>{let{type:t,color:n}=e;return"circle"===t?(0,r.jsx)("div",{className:"h-2 w-2 rounded-full mr-1.5",style:{backgroundColor:n}}):(0,r.jsx)("div",{className:"h-2 w-2 rounded-sm mr-1.5",style:{backgroundColor:n}})},l=(e,t)=>{if(/^\d{4}-\d{2}-\d{2}/.test(e)||/^\d{2}\/\d{2}\/\d{4}/.test(e)){let n=new Date(e);if(!isNaN(n.getTime())){if("W"===t)return"Week of ".concat(n.toLocaleDateString("en-US",{month:"short",day:"2-digit",year:"numeric"}));if("M"===t)return n.toLocaleDateString("en-US",{month:"short",year:"numeric"});if("Q"===t){let e=Math.floor(n.getMonth()/3)+1;return"Q".concat(e,", ").concat(n.getFullYear())}else if("Y"===t)return n.getFullYear().toString();return n.toLocaleDateString("en-US",{month:"short",day:"2-digit",year:"numeric"})}}return/^[A-Za-z]{3}\s\d{4}$/.test(e)||/^Q[1-4]\s\d{4}$/.test(e)||/^\d{4}$/.test(e),e},i=(e,t)=>{if("string"==typeof e){if(t){let n={USD:"$",EUR:"€",GBP:"\xa3",JPY:"\xa5",CNY:"\xa5",SOL:"SOL"},r=n[t]||t;if("SOL"===t){if(e.includes("SOL"))return e;for(let[t,r]of Object.entries(n))if("SOL"!==t&&e.startsWith(r))return"".concat(e.substring(r.length)," SOL");return"".concat(e," SOL")}for(let[a,l]of Object.entries(n))if(e.startsWith(l)&&a!==t)return e.replace(l,r)}return e}if("number"==typeof e){if(t)switch(t){case"USD":return"$".concat(e.toLocaleString());case"EUR":return"€".concat(e.toLocaleString());case"GBP":return"\xa3".concat(e.toLocaleString());case"JPY":case"CNY":return"\xa5".concat(e.toLocaleString());case"SOL":return"".concat(e.toLocaleString()," SOL");default:return"".concat(t).concat(e.toLocaleString())}return e.toLocaleString()}return String(e)},o=e=>{let{title:t,items:n,top:o,left:s,isModal:c=!1,timeFilter:u,currencyFilter:d}=e,h=n.some(e=>e.axis),f=l(t,u);return(0,r.jsxs)("div",{className:"absolute z-10 pointer-events-none bg-gray-900/95 shadow-lg border border-gray-800 rounded-md p-2 text-xs min-w-[120px]",style:{top:"".concat(o,"px"),left:s>(c?500:250)?"".concat(s-160,"px"):"".concat(s+10,"px"),transform:"translateY(-100%)"},children:[(0,r.jsx)("div",{className:"text-gray-400 text-[10px] font-normal pb-1 mb-1 border-b border-gray-800",children:f}),(0,r.jsx)("div",{className:"space-y-1",children:n.map((e,t)=>(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center text-gray-400",children:[(0,r.jsx)(a,{type:e.shape||"circle",color:e.color}),(0,r.jsx)("span",{className:"text-gray-400 font-normal ml-2",children:e.label}),h&&e.axis&&(0,r.jsxs)("span",{className:"ml-1 text-[9px] text-gray-500",children:["(",e.axis," axis)"]})]}),(0,r.jsx)("span",{className:"text-gray-300 font-normal ml-4",children:i(e.value,d)})]},"tooltip-item-".concat(t)))})]})}},95442:(e,t,n)=>{n.d(t,{A:()=>function e(){var t=new r,n=[],a=[],l=o;function s(e){let r=t.get(e);if(void 0===r){if(l!==o)return l;t.set(e,r=n.push(e)-1)}return a[r%a.length]}return s.domain=function(e){if(!arguments.length)return n.slice();for(let a of(n=[],t=new r,e))t.has(a)||t.set(a,n.push(a)-1);return s},s.range=function(e){return arguments.length?(a=Array.from(e),s):a.slice()},s.unknown=function(e){return arguments.length?(l=e,s):l},s.copy=function(){return e(n,a).unknown(l)},i.C.apply(s,arguments),s}});class r extends Map{constructor(e,t=l){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:t}}),null!=e)for(let[t,n]of e)this.set(t,n)}get(e){return super.get(a(this,e))}has(e){return super.has(a(this,e))}set(e,t){return super.set(function({_intern:e,_key:t},n){let r=t(n);return e.has(r)?e.get(r):(e.set(r,n),n)}(this,e),t)}delete(e){return super.delete(function({_intern:e,_key:t},n){let r=t(n);return e.has(r)&&(n=e.get(r),e.delete(r)),n}(this,e))}}function a({_intern:e,_key:t},n){let r=t(n);return e.has(r)?e.get(r):n}function l(e){return null!==e&&"object"==typeof e?e.valueOf():e}var i=n(28749);let o=Symbol("implicit")}}]);