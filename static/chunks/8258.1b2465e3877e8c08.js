"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8258,8364],{45191:(e,t,n)=>{n.d(t,{A:()=>i});var r=n(28749),a=n(95442),l=(0,n(70222).A)("domain","range","reverse","align","padding","round");function i(e){return l(function e(){var t,n,l=(0,a.A)().unknown(void 0),i=l.domain,o=l.range,s=0,c=1,u=!1,h=0,d=0,f=.5;function m(){var e=i().length,r=c<s,a=r?c:s,l=r?s:c;t=(l-a)/Math.max(1,e-h+2*d),u&&(t=Math.floor(t)),a+=(l-a-t*(e-h))*f,n=t*(1-h),u&&(a=Math.round(a),n=Math.round(n));var m=(function(e,t,n){e*=1,t*=1,n=(a=arguments.length)<2?(t=e,e=0,1):a<3?1:+n;for(var r=-1,a=0|Math.max(0,Math.ceil((t-e)/n)),l=Array(a);++r<a;)l[r]=e+r*n;return l})(e).map(function(e){return a+t*e});return o(r?m.reverse():m)}return delete l.unknown,l.domain=function(e){return arguments.length?(i(e),m()):i()},l.range=function(e){return arguments.length?([s,c]=e,s*=1,c*=1,m()):[s,c]},l.rangeRound=function(e){return[s,c]=e,s*=1,c*=1,u=!0,m()},l.bandwidth=function(){return n},l.step=function(){return t},l.round=function(e){return arguments.length?(u=!!e,m()):u},l.padding=function(e){return arguments.length?(h=Math.min(1,d=+e),m()):h},l.paddingInner=function(e){return arguments.length?(h=Math.min(1,e),m()):h},l.paddingOuter=function(e){return arguments.length?(d=+e,m()):d},l.align=function(e){return arguments.length?(f=Math.max(0,Math.min(1,e)),m()):f},l.copy=function(){return e(i(),[s,c]).round(u).paddingInner(h).paddingOuter(d).align(f)},r.C.apply(m(),arguments)}(),e)}},48364:(e,t,n)=>{n.d(t,{Gy:()=>a,fetchStablecoinVolumeData:()=>i,vv:()=>l});let r={USDC:"#2775ca",USDT:"#26a17b",PYUSD:"#8a2be2",USDe:"#ffa500",EURC:"#4169e1",EUROe:"#007bff",USDY:"#20b2aa",FDUSD:"#ff6347",sUSD:"#ff69b4",USDS:"#4b0082",AUSD:"#8b4513",USDG:"#708090"};function a(e){return r[e]||"#999999"}function l(e){return new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",notation:"compact",compactDisplay:"short",maximumFractionDigits:1}).format(e)}async function i(){try{let e=await fetch("https://analytics.topledger.xyz/tl/api/queries/12785/results.json?api_key=LmCj8CVbDKQPkGLgFNknX5H3pRXFndinpctmzMRQ");if(!e.ok)throw Error("API responded with status: ".concat(e.status));return(await e.json()).query_result.data.rows.map(e=>({Month:e.Month,mint:e.mint||"Unknown",amount:e.amount,date:new Date(e.Month)})).sort((e,t)=>{let n=new Date(e.Month).getTime()-new Date(t.Month).getTime();return 0!==n?n:e.mint.localeCompare(t.mint)})}catch(e){throw console.error("Error fetching stablecoin volume data:",e),Error("Failed to fetch stablecoin volume data")}}},78258:(e,t,n)=>{n.r(t),n.d(t,{default:()=>y});var r=n(95155),a=n(12115),l=n(79111),i=n(45191),o=n(4904),s=n(71734),c=n(41995),u=n(72630),h=n(58888),d=n(50109),f=n(51078),m=n(7545),g=n(81838),p=n(52594),x=n(96565),v=n(42028),b=n(48364);let S=e=>{let{className:t="w-4 h-4"}=e;return(0,r.jsx)("svg",{className:t,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})})},y=e=>{let{isModalOpen:t=!1,onModalClose:n=()=>{},legendsChanged:y}=e,[j,w]=(0,a.useState)([]),[k,D]=(0,a.useState)([]),[L,M]=(0,a.useState)([]),[N,A]=(0,a.useState)(!0),[C,U]=(0,a.useState)(null),[O,E]=(0,a.useState)([]),F=(0,a.useRef)(null),R=(0,a.useRef)(null),[Y,P]=(0,a.useState)(!1),[T,G]=(0,a.useState)(null),[W,B]=(0,a.useState)(!1),[_,z]=(0,a.useState)(null),[I,V]=(0,a.useState)({visible:!1,month:"",items:[],left:0,top:0}),Q=(0,a.useCallback)(e=>Object.values(e.reduce((e,t)=>(e[t.Month]||(e[t.Month]={month:t.Month,date:t.date||new Date(t.Month)}),e[t.Month][t.mint]=t.amount,e),{})).sort((e,t)=>e.date.getTime()-t.date.getTime()),[]),$=(0,a.useCallback)(async()=>{A(!0),U(null);try{let e=await (0,b.fetchStablecoinVolumeData)();if(0===e.length)U("No data available for stablecoin volume."),w([]),D([]),M([]),E([]);else{let t=e.map(e=>({...e,date:new Date(e.Month)})),n={};t.forEach(e=>{n[e.mint]||(n[e.mint]=0),n[e.mint]+=e.amount});let r=Object.entries(n).sort((e,t)=>t[1]-e[1]).map(e=>{let[t]=e;return t});E(r),w(t);let a=Q(t);if(D(a),M(a),P(!1),G(null),y){let e=r.map(e=>({label:e,color:(0,b.Gy)(e),value:n[e]}));y(e)}}}catch(e){U(e instanceof Error?e.message:"Failed to load data."),w([]),D([]),M([]),E([])}finally{A(!1)}},[y,Q]);(0,a.useEffect)(()=>{$()},[$]),(0,a.useEffect)(()=>{if(0===k.length){L.length>0&&M([]);return}if(!T&&Y)return void M(k);if(!T||!Y){L.length!==k.length&&M(k);return}let[e,t]=T,n=k.filter(n=>{let r=n.date instanceof Date?n.date:new Date(n.month);return r>=e&&r<=t});M(n.length>0?n:k)},[T,k,Y,L.length]),(0,a.useEffect)(()=>{t&&(z(T),B(Y))},[t,T,Y]);let q=(0,a.useCallback)(e=>{if(!e||0===k.length)return k;let[t,n]=e,r=k.filter(e=>{let r=e.date instanceof Date?e.date:new Date(e.month);return r>=t&&r<=n});return r.length>0?r:k},[k]),H=(0,a.useCallback)(function(e){var t;let n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=null==(t=(n?R:F).current)?void 0:t.getBoundingClientRect();if(!r)return;let a=e.clientX-r.left,l=n?W:Y,i=n?_:T,o=l?n?q(i):L:k;if(0===o.length)return;let s={right:20,left:90},c=(r.width-s.left-s.right)/o.length,u=Math.floor((a-s.left)/c);if(u<0||u>=o.length){I.visible&&V(e=>({...e,visible:!1}));return}let h=o[u];if(!I.visible||I.month!==h.month){let t=O.filter(e=>h[e]>0).map(e=>({mint:e,value:h[e],color:(0,b.Gy)(e)})).sort((e,t)=>t.value-e.value);V({visible:!0,month:h.month,items:t,left:a,top:e.clientY-r.top})}},[k,L,Y,I.visible,I.month,O,W,_,T,q]),X=(0,a.useCallback)(()=>{I.visible&&V(e=>({...e,visible:!1}))},[I.visible]),J=e=>new Date(e).toLocaleDateString("en-US",{month:"short",year:"numeric"}),Z=(0,a.useCallback)(e=>{if(!e){Y&&(G(null),P(!1));return}let{x0:t,x1:n}=e;G([new Date(t),new Date(n)]),Y||P(!0)},[Y]),K=(0,a.useCallback)(e=>{if(!e){W&&(z(null),B(!1));return}let{x0:t,x1:n}=e;z([new Date(t),new Date(n)]),W||B(!0)},[W]),ee=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(N)return(0,r.jsx)("div",{className:"flex justify-center items-center h-full",children:(0,r.jsx)(f.A,{size:"sm"})});if(C||0===k.length)return(0,r.jsxs)("div",{className:"flex flex-col justify-center items-center h-full",children:[(0,r.jsx)("div",{className:"text-gray-400/80 text-xs mb-2",children:C||"No data available"}),(0,r.jsx)(m.A,{onClick:$,children:(0,r.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,r.jsx)(S,{className:"w-3.5 h-3.5"}),(0,r.jsx)("span",{children:"Refresh"})]})})]});let a=n?_:T,p=n?W:Y;return(0,r.jsxs)("div",{className:"flex flex-col h-full",children:[I.visible&&I.items.length>0&&(0,r.jsx)(g.A,{title:J(I.month),items:I.items.map(e=>({color:e.color,label:e.mint,value:(0,b.vv)(e.value),shape:"square"})),top:I.top,left:I.left,isModal:n}),(0,r.jsx)("div",{className:"h-[85%] w-full overflow-hidden relative",ref:n?R:F,onMouseMove:e=>H(e,n),onMouseLeave:X,children:(0,r.jsx)(l.A,{children:e=>{let{width:t,height:l}=e;if(t<=0||l<=0)return null;let f={top:10,right:20,bottom:50,left:90},m=t-f.left-f.right,g=l-f.top-f.bottom;if(m<=0||g<=0)return null;let x=p?n?q(a):L:k,v=(0,i.A)({domain:x.map(e=>e.month),range:[0,m],padding:.2}),S=(()=>{let e=m<500?5:10;if(x.length<=e)return x.map(e=>e.month);{let t=Math.ceil(x.length/(e-1));return x.filter((e,n)=>n%t==0||n===x.length-1).map(e=>e.month)}})(),y=Math.max(...x.map(e=>O.reduce((t,n)=>t+(e[n]||0),0))),j=(0,o.A)({domain:[0,1.1*y],range:[g,0],nice:!0}),w=v.bandwidth();return(0,r.jsx)("svg",{width:t,height:l,children:(0,r.jsxs)(c.A,{left:f.left,top:f.top,children:[(0,r.jsx)(d.A,{scale:j,width:m,stroke:"#1f2937",strokeOpacity:.5,strokeDasharray:"2,3"}),x.map((e,t)=>{let n=v(e.month)||0,a=g,l=[];return O.filter(t=>e[t]>0).sort((t,n)=>e[t]-e[n]).forEach(i=>{let o=g-j(e[i]||0);a-=o,l.push((0,r.jsx)(s.A,{x:n,y:a,width:w,height:o,fill:(0,b.Gy)(i),opacity:I.month===e.month?1:.8,rx:2},"bar-".concat(t,"-").concat(i)))}),(0,r.jsx)(c.A,{children:l},"month-".concat(t))}),(0,r.jsx)(u.A,{top:g,scale:v,stroke:"#374151",strokeWidth:.5,tickStroke:"transparent",hideAxisLine:!1,tickLength:0,tickValues:S,tickLabelProps:()=>({fill:"#6b7280",fontSize:11,fontWeight:300,textAnchor:"middle",dy:"0.5em"}),tickFormat:e=>new Date(e).toLocaleDateString("en-US",{month:"numeric",year:"2-digit"})}),(0,r.jsx)(h.A,{scale:j,stroke:"#374151",strokeWidth:.5,tickStroke:"transparent",tickLength:0,hideZero:!0,numTicks:5,tickFormat:e=>(0,b.vv)(e),tickLabelProps:()=>({fill:"#6b7280",fontSize:11,fontWeight:300,letterSpacing:"0.05em",textAnchor:"end",dy:"0.33em",dx:"-0.5em"})})]})})}})}),(0,r.jsx)("div",{className:"h-[15%] w-full mt-1",children:(0,r.jsx)(l.A,{children:e=>{let{width:t,height:a}=e;return t<=0||a<=0?null:(0,r.jsx)(v.A,{data:j,isModal:n,activeBrushDomain:n?_:T,onBrushChange:n?K:Z,onClearBrush:()=>{n?(z(null),B(!1)):(G(null),P(!1))},getDate:e=>e.date?e.date.toISOString():e.Month,getValue:e=>e.amount,lineColor:"#2775ca",margin:{top:5,right:20,bottom:10,left:90}})}})})]})};return(0,r.jsxs)("div",{className:"h-full w-full relative",children:[ee(0,0),(0,r.jsx)(p.A,{isOpen:t,onClose:n,title:"Stablecoin Volume",subtitle:"Transaction volume of stablecoins on Solana over time",children:(0,r.jsx)("div",{className:"h-[70vh]",children:(0,r.jsxs)("div",{className:"flex h-full",children:[(0,r.jsx)("div",{className:"w-[90%] h-full pr-3 border-r border-gray-900",children:ee(0,0,!0)}),(0,r.jsxs)("div",{className:"w-[10%] h-full pl-3 flex flex-col justify-start items-start",children:[(0,r.jsx)("div",{className:"text-[10px] text-gray-400 mb-2",children:"STABLECOINS"}),N?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(x.A,{label:"Loading...",color:"#2775ca",isLoading:!0}),(0,r.jsx)(x.A,{label:"Loading...",color:"#26a17b",isLoading:!0}),(0,r.jsx)(x.A,{label:"Loading...",color:"#fa7a35",isLoading:!0})]}):(0,r.jsx)("div",{className:"flex flex-col gap-1 overflow-y-auto max-h-[500px] pr-1",children:O.map(e=>{let t=j.filter(t=>t.mint===e).reduce((e,t)=>e+t.amount,0);return(0,r.jsx)(x.A,{label:e,color:(0,b.Gy)(e),shape:"square",tooltipText:(0,b.vv)(t)},e)})})]})]})})})]})}},81838:(e,t,n)=>{n.d(t,{A:()=>o});var r=n(95155);n(12115);let a=e=>{let{type:t,color:n}=e;return"circle"===t?(0,r.jsx)("div",{className:"h-2 w-2 rounded-full mr-1.5",style:{backgroundColor:n}}):(0,r.jsx)("div",{className:"h-2 w-2 rounded-sm mr-1.5",style:{backgroundColor:n}})},l=(e,t)=>{if(/^\d{4}-\d{2}-\d{2}/.test(e)||/^\d{2}\/\d{2}\/\d{4}/.test(e)){let n=new Date(e);if(!isNaN(n.getTime())){if("W"===t)return"Week of ".concat(n.toLocaleDateString("en-US",{month:"short",day:"2-digit",year:"numeric"}));if("M"===t)return n.toLocaleDateString("en-US",{month:"short",year:"numeric"});if("Q"===t){let e=Math.floor(n.getMonth()/3)+1;return"Q".concat(e,", ").concat(n.getFullYear())}else if("Y"===t)return n.getFullYear().toString();return n.toLocaleDateString("en-US",{month:"short",day:"2-digit",year:"numeric"})}}return/^[A-Za-z]{3}\s\d{4}$/.test(e)||/^Q[1-4]\s\d{4}$/.test(e)||/^\d{4}$/.test(e),e},i=(e,t)=>{if("string"==typeof e){if(t){let n={USD:"$",EUR:"€",GBP:"\xa3",JPY:"\xa5",CNY:"\xa5",SOL:"SOL"},r=n[t]||t;if("SOL"===t){if(e.includes("SOL"))return e;for(let[t,r]of Object.entries(n))if("SOL"!==t&&e.startsWith(r))return"".concat(e.substring(r.length)," SOL");return"".concat(e," SOL")}for(let[a,l]of Object.entries(n))if(e.startsWith(l)&&a!==t)return e.replace(l,r)}return e}if("number"==typeof e){if(t)switch(t){case"USD":return"$".concat(e.toLocaleString());case"EUR":return"€".concat(e.toLocaleString());case"GBP":return"\xa3".concat(e.toLocaleString());case"JPY":case"CNY":return"\xa5".concat(e.toLocaleString());case"SOL":return"".concat(e.toLocaleString()," SOL");default:return"".concat(t).concat(e.toLocaleString())}return e.toLocaleString()}return String(e)},o=e=>{let{title:t,items:n,top:o,left:s,isModal:c=!1,timeFilter:u,currencyFilter:h}=e,d=n.some(e=>e.axis),f=l(t,u);return(0,r.jsxs)("div",{className:"absolute z-10 pointer-events-none bg-gray-900/95 shadow-lg border border-gray-800 rounded-md p-2 text-xs min-w-[120px]",style:{top:"".concat(o,"px"),left:s>(c?500:250)?"".concat(s-160,"px"):"".concat(s+10,"px"),transform:"translateY(-100%)"},children:[(0,r.jsx)("div",{className:"text-gray-400 text-[10px] font-normal pb-1 mb-1 border-b border-gray-800",children:f}),(0,r.jsx)("div",{className:"space-y-1",children:n.map((e,t)=>(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center text-gray-400",children:[(0,r.jsx)(a,{type:e.shape||"circle",color:e.color}),(0,r.jsx)("span",{className:"text-gray-400 font-normal ml-2",children:e.label}),d&&e.axis&&(0,r.jsxs)("span",{className:"ml-1 text-[9px] text-gray-500",children:["(",e.axis," axis)"]})]}),(0,r.jsx)("span",{className:"text-gray-300 font-normal ml-4",children:i(e.value,h)})]},"tooltip-item-".concat(t)))})]})}},95442:(e,t,n)=>{n.d(t,{A:()=>function e(){var t=new r,n=[],a=[],l=o;function s(e){let r=t.get(e);if(void 0===r){if(l!==o)return l;t.set(e,r=n.push(e)-1)}return a[r%a.length]}return s.domain=function(e){if(!arguments.length)return n.slice();for(let a of(n=[],t=new r,e))t.has(a)||t.set(a,n.push(a)-1);return s},s.range=function(e){return arguments.length?(a=Array.from(e),s):a.slice()},s.unknown=function(e){return arguments.length?(l=e,s):l},s.copy=function(){return e(n,a).unknown(l)},i.C.apply(s,arguments),s}});class r extends Map{constructor(e,t=l){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:t}}),null!=e)for(let[t,n]of e)this.set(t,n)}get(e){return super.get(a(this,e))}has(e){return super.has(a(this,e))}set(e,t){return super.set(function({_intern:e,_key:t},n){let r=t(n);return e.has(r)?e.get(r):(e.set(r,n),n)}(this,e),t)}delete(e){return super.delete(function({_intern:e,_key:t},n){let r=t(n);return e.has(r)&&(n=e.get(r),e.delete(r)),n}(this,e))}}function a({_intern:e,_key:t},n){let r=t(n);return e.has(r)?e.get(r):n}function l(e){return null!==e&&"object"==typeof e?e.valueOf():e}var i=n(28749);let o=Symbol("implicit")}}]);