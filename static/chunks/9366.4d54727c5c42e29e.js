"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9366],{45191:(e,t,n)=>{n.d(t,{A:()=>i});var r=n(28749),l=n(95442),a=(0,n(70222).A)("domain","range","reverse","align","padding","round");function i(e){return a(function e(){var t,n,a=(0,l.A)().unknown(void 0),i=a.domain,s=a.range,o=0,c=1,u=!1,h=0,d=0,f=.5;function m(){var e=i().length,r=c<o,l=r?c:o,a=r?o:c;t=(a-l)/Math.max(1,e-h+2*d),u&&(t=Math.floor(t)),l+=(a-l-t*(e-h))*f,n=t*(1-h),u&&(l=Math.round(l),n=Math.round(n));var m=(function(e,t,n){e*=1,t*=1,n=(l=arguments.length)<2?(t=e,e=0,1):l<3?1:+n;for(var r=-1,l=0|Math.max(0,Math.ceil((t-e)/n)),a=Array(l);++r<l;)a[r]=e+r*n;return a})(e).map(function(e){return l+t*e});return s(r?m.reverse():m)}return delete a.unknown,a.domain=function(e){return arguments.length?(i(e),m()):i()},a.range=function(e){return arguments.length?([o,c]=e,o*=1,c*=1,m()):[o,c]},a.rangeRound=function(e){return[o,c]=e,o*=1,c*=1,u=!0,m()},a.bandwidth=function(){return n},a.step=function(){return t},a.round=function(e){return arguments.length?(u=!!e,m()):u},a.padding=function(e){return arguments.length?(h=Math.min(1,d=+e),m()):h},a.paddingInner=function(e){return arguments.length?(h=Math.min(1,e),m()):h},a.paddingOuter=function(e){return arguments.length?(d=+e,m()):d},a.align=function(e){return arguments.length?(f=Math.max(0,Math.min(1,e)),m()):f},a.copy=function(){return e(i(),[o,c]).round(u).paddingInner(h).paddingOuter(d).align(f)},r.C.apply(m(),arguments)}(),e)}},59366:(e,t,n)=>{n.r(t),n.d(t,{default:()=>y});var r=n(95155),l=n(12115),a=n(79111),i=n(41995),s=n(50109),o=n(45191),c=n(4904),u=n(72630),h=n(58888),d=n(71734),f=n(49837),m=n(51078),g=n(81838),x=n(7545),p=n(52594),v=n(42028),b=n(96565);let j=e=>{let{className:t="w-4 h-4"}=e;return(0,r.jsx)("svg",{className:t,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})})},y=e=>{let{isModalOpen:t=!1,onModalClose:n=()=>{},onUpdateLegends:y}=e,[S,N]=(0,l.useState)([]),[w,k]=(0,l.useState)(!0),[A,L]=(0,l.useState)(null),[C,M]=(0,l.useState)([]),[T,O]=(0,l.useState)([]),[E,D]=(0,l.useState)(null),[Y,W]=(0,l.useState)(!1),[P,B]=(0,l.useState)([]),[H,R]=(0,l.useState)(null),[U,_]=(0,l.useState)(!1),[z,F]=(0,l.useState)([]),$=(0,l.useRef)(null),q=(0,l.useRef)(null),[G,Q]=(0,l.useState)({visible:!1,month:"",left:0,top:0,data:{}}),V=(0,l.useCallback)(async()=>{k(!0),L(null);try{let e=await (0,f.fetchPlatformExchangeData)();if(0===e.length){L("No data available."),N([]);return}N(e);let t=[...new Set(e.map(e=>e.name))];O(t);let n=I(e,t);if(M(n),B(n),y){let n=t.map(t=>{let n=e.filter(e=>e.name===t).reduce((e,t)=>e+t.volume,0);return{label:t,color:(0,f.TH)(t),value:n}}).sort((e,t)=>(t.value||0)-(e.value||0));y(n)}W(!0),D(null)}catch(t){console.error("[ExchangeVolumeChart] Error loading chart data:",t);let e="Failed to load data.";t instanceof Error&&(e=t.message||e),L(e),N([]),M([]),B([])}finally{k(!1)}},[y]),I=(e,t)=>Object.values(e.reduce((e,n)=>(e[n.month]||(e[n.month]={month:n.month,date:n.date||new Date(n.month),total:0},t.forEach(t=>{e[n.month][t]=0})),e[n.month][n.name]=(e[n.month][n.name]||0)+n.volume,e[n.month].total+=n.volume,e),{})).sort((e,t)=>e.date.getTime()-t.date.getTime());(0,l.useEffect)(()=>{V()},[V]),(0,l.useEffect)(()=>{if(0===C.length)return void B([]);if(!E&&Y||!E||!Y)return void B(C);let[e,t]=E,n=e.getTime(),r=t.getTime(),l=C.filter(e=>{let t=e.date.getTime();return t>=n&&t<=r});B(l.length>0?l:C)},[E,C,Y]),(0,l.useEffect)(()=>{if(0===C.length)return void F([]);if(!H&&U||!H||!U)return void F(C);let[e,t]=H,n=e.getTime(),r=t.getTime(),l=C.filter(e=>{let t=e.date.getTime();return t>=n&&t<=r});F(l.length>0?l:C)},[H,C,U]),(0,l.useEffect)(()=>{t&&(F(P),_(Y),R(E))},[t,P,Y,E]);let J=(0,l.useCallback)(e=>{if(!e){Y&&(D(null),W(!1));return}let{x0:t,x1:n}=e,r=new Date(t),l=new Date(n);!(isNaN(r.getTime())||isNaN(l.getTime()))&&(D([r,l]),Y||W(!0))},[Y]),X=(0,l.useCallback)(e=>{if(!e){U&&(R(null),_(!1));return}let{x0:t,x1:n}=e,r=new Date(t),l=new Date(n);!(isNaN(r.getTime())||isNaN(l.getTime()))&&(R([r,l]),U||_(!0))},[U]),Z=(0,l.useCallback)(function(e){var t;let n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=null==(t=(n?q:$).current)?void 0:t.getBoundingClientRect();if(!r)return;let l=e.clientX-r.left,a=e.clientY-r.top,i={left:60},s=r.width-i.left-20,o=n?U?z:C:Y?P:C;if(l<i.left||l>s+i.left||0===o.length){G.visible&&Q(e=>({...e,visible:!1}));return}let c=s/o.length,u=Math.floor((l-i.left)/c);if(u>=0&&u<o.length){let e=o[u];G.visible&&G.month===e.month||Q({visible:!0,month:e.month,left:l,top:a,data:e})}},[P,z,C,Y,U,G.visible,G.month]),K=(0,l.useCallback)(()=>{G.visible&&Q(e=>({...e,visible:!1}))},[G.visible]),ee=(0,l.useCallback)(e=>(0,f.vv)(e),[]),et=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],l=n?U?z:C:Y?P:C;return w?(0,r.jsx)("div",{className:"flex justify-center items-center h-full",children:(0,r.jsx)(m.A,{size:"sm"})}):A||0===l.length?(0,r.jsxs)("div",{className:"flex flex-col justify-center items-center h-full",children:[(0,r.jsx)("div",{className:"text-gray-400/80 text-xs mb-2",children:A||"No data available"}),(0,r.jsx)(x.A,{onClick:V,children:(0,r.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,r.jsx)(j,{className:"w-3.5 h-3.5"}),(0,r.jsx)("span",{children:"Refresh"})]})})]}):(0,r.jsxs)("div",{className:"flex flex-col h-full",children:[G.visible&&G.data&&(0,r.jsx)(g.A,{title:(0,f.Yq)(G.month),items:T.filter(e=>G.data[e]>0).sort((e,t)=>G.data[t]-G.data[e]).map(e=>({color:(0,f.TH)(e),label:e,value:(0,f.vv)(G.data[e]),shape:"square"})),top:G.top,left:G.left}),(0,r.jsx)("div",{className:"h-[85%] w-full overflow-hidden relative",ref:n?q:$,onMouseMove:e=>Z(e,n),onMouseLeave:K,children:(0,r.jsx)(a.A,{children:e=>{let{width:t,height:n}=e;if(t<=0||n<=0)return null;let a={top:5,right:25,bottom:30,left:60},m=t-a.left-a.right,g=n-a.top-a.bottom;if(m<=0||g<=0)return null;let x=(0,o.A)({domain:l.map(e=>e.month),range:[0,m],padding:.3}),p=Math.max(...l.map(e=>e.total)),v=(0,c.A)({domain:[0,1.1*p],range:[g,0],nice:!0}),b=x.bandwidth();return(0,r.jsx)("svg",{width:t,height:n,children:(0,r.jsxs)(i.A,{left:a.left,top:a.top,children:[(0,r.jsx)(s.A,{scale:v,width:m,stroke:"#1f2937",strokeOpacity:.5,strokeDasharray:"2,3"}),l.map((e,t)=>{let n=x(e.month)||0,l=g,a=[];return T.filter(t=>e[t]>0).sort((t,n)=>e[t]-e[n]).forEach(i=>{let s=g-v(e[i]||0);l-=s,a.push((0,r.jsx)(d.A,{x:n,y:l,width:b,height:s,fill:(0,f.TH)(i),opacity:G.month===e.month?1:.8,rx:2},"bar-".concat(t,"-").concat(i)))}),(0,r.jsx)(i.A,{children:a},"month-".concat(t))}),(0,r.jsx)(u.A,{top:g,scale:x,tickFormat:f.Yq,stroke:"#374151",strokeWidth:.5,tickStroke:"transparent",tickLength:0,hideAxisLine:!1,numTicks:t>500?12:6,tickLabelProps:()=>({fill:"#6b7280",fontSize:11,fontWeight:300,textAnchor:"middle",dy:"0.5em"})}),(0,r.jsx)(h.A,{scale:v,stroke:"#374151",strokeWidth:.5,tickStroke:"transparent",tickLength:0,tickFormat:ee,tickLabelProps:()=>({fill:"#6b7280",fontSize:11,fontWeight:300,textAnchor:"end",dx:"-0.5em",dy:"0.25em"})})]})})}})}),(0,r.jsx)("div",{className:"h-[15%] w-full mt-1",children:(0,r.jsx)(v.A,{data:C,isModal:n,activeBrushDomain:n?H:E,onBrushChange:n?X:J,onClearBrush:n?()=>{R(null),_(!1)}:()=>{D(null),W(!1)},getDate:e=>e.date,getValue:e=>e.total,lineColor:"#3b82f6",margin:{top:5,right:25,bottom:10,left:60}})})]})};return(0,r.jsxs)("div",{className:"h-full w-full relative",children:[et(0,0),(0,r.jsx)(p.A,{isOpen:t,onClose:n,title:"Exchange Volume",subtitle:"Monthly volume by exchange platform",children:(0,r.jsx)("div",{className:"h-[60vh]",children:(0,r.jsxs)("div",{className:"flex h-full",children:[(0,r.jsx)("div",{className:"w-[85%] h-full pr-3 border-r border-gray-900",children:et(0,0,!0)}),(0,r.jsx)("div",{className:"w-[15%] h-full pl-3",children:(0,r.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,r.jsx)("div",{className:"text-[10px] text-gray-400 mb-2",children:"EXCHANGES"}),(0,r.jsx)("div",{className:"flex flex-col gap-1 overflow-y-auto max-h-[500px] pr-1",children:T.sort((e,t)=>{let n=S.filter(t=>t.name===e).reduce((e,t)=>e+t.volume,0);return S.filter(e=>e.name===t).reduce((e,t)=>e+t.volume,0)-n}).map(e=>{let t=S.filter(t=>t.name===e).reduce((e,t)=>e+t.volume,0);return(0,r.jsx)(b.A,{color:(0,f.TH)(e),label:e,shape:"square",tooltipText:(0,f.vv)(t)},e)})})]})})]})})})]})}},81838:(e,t,n)=>{n.d(t,{A:()=>s});var r=n(95155);n(12115);let l=e=>{let{type:t,color:n}=e;return"circle"===t?(0,r.jsx)("div",{className:"h-2 w-2 rounded-full mr-1.5",style:{backgroundColor:n}}):(0,r.jsx)("div",{className:"h-2 w-2 rounded-sm mr-1.5",style:{backgroundColor:n}})},a=(e,t)=>{if(/^\d{4}-\d{2}-\d{2}/.test(e)||/^\d{2}\/\d{2}\/\d{4}/.test(e)){let n=new Date(e);if(!isNaN(n.getTime())){if("W"===t)return"Week of ".concat(n.toLocaleDateString("en-US",{month:"short",day:"2-digit",year:"numeric"}));if("M"===t)return n.toLocaleDateString("en-US",{month:"short",year:"numeric"});if("Q"===t){let e=Math.floor(n.getMonth()/3)+1;return"Q".concat(e,", ").concat(n.getFullYear())}else if("Y"===t)return n.getFullYear().toString();return n.toLocaleDateString("en-US",{month:"short",day:"2-digit",year:"numeric"})}}return/^[A-Za-z]{3}\s\d{4}$/.test(e)||/^Q[1-4]\s\d{4}$/.test(e)||/^\d{4}$/.test(e),e},i=(e,t)=>{if("string"==typeof e){if(t){let n={USD:"$",EUR:"€",GBP:"\xa3",JPY:"\xa5",CNY:"\xa5",SOL:"SOL"},r=n[t]||t;if("SOL"===t){if(e.includes("SOL"))return e;for(let[t,r]of Object.entries(n))if("SOL"!==t&&e.startsWith(r))return"".concat(e.substring(r.length)," SOL");return"".concat(e," SOL")}for(let[l,a]of Object.entries(n))if(e.startsWith(a)&&l!==t)return e.replace(a,r)}return e}if("number"==typeof e){if(t)switch(t){case"USD":return"$".concat(e.toLocaleString());case"EUR":return"€".concat(e.toLocaleString());case"GBP":return"\xa3".concat(e.toLocaleString());case"JPY":case"CNY":return"\xa5".concat(e.toLocaleString());case"SOL":return"".concat(e.toLocaleString()," SOL");default:return"".concat(t).concat(e.toLocaleString())}return e.toLocaleString()}return String(e)},s=e=>{let{title:t,items:n,top:s,left:o,isModal:c=!1,timeFilter:u,currencyFilter:h}=e,d=n.some(e=>e.axis),f=a(t,u);return(0,r.jsxs)("div",{className:"absolute z-10 pointer-events-none bg-gray-900/95 shadow-lg border border-gray-800 rounded-md p-2 text-xs min-w-[120px]",style:{top:"".concat(s,"px"),left:o>(c?500:250)?"".concat(o-160,"px"):"".concat(o+10,"px"),transform:"translateY(-100%)"},children:[(0,r.jsx)("div",{className:"text-gray-400 text-[10px] font-normal pb-1 mb-1 border-b border-gray-800",children:f}),(0,r.jsx)("div",{className:"space-y-1",children:n.map((e,t)=>(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center text-gray-400",children:[(0,r.jsx)(l,{type:e.shape||"circle",color:e.color}),(0,r.jsx)("span",{className:"text-gray-400 font-normal ml-2",children:e.label}),d&&e.axis&&(0,r.jsxs)("span",{className:"ml-1 text-[9px] text-gray-500",children:["(",e.axis," axis)"]})]}),(0,r.jsx)("span",{className:"text-gray-300 font-normal ml-4",children:i(e.value,h)})]},"tooltip-item-".concat(t)))})]})}},95442:(e,t,n)=>{n.d(t,{A:()=>function e(){var t=new r,n=[],l=[],a=s;function o(e){let r=t.get(e);if(void 0===r){if(a!==s)return a;t.set(e,r=n.push(e)-1)}return l[r%l.length]}return o.domain=function(e){if(!arguments.length)return n.slice();for(let l of(n=[],t=new r,e))t.has(l)||t.set(l,n.push(l)-1);return o},o.range=function(e){return arguments.length?(l=Array.from(e),o):l.slice()},o.unknown=function(e){return arguments.length?(a=e,o):a},o.copy=function(){return e(n,l).unknown(a)},i.C.apply(o,arguments),o}});class r extends Map{constructor(e,t=a){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:t}}),null!=e)for(let[t,n]of e)this.set(t,n)}get(e){return super.get(l(this,e))}has(e){return super.has(l(this,e))}set(e,t){return super.set(function({_intern:e,_key:t},n){let r=t(n);return e.has(r)?e.get(r):(e.set(r,n),n)}(this,e),t)}delete(e){return super.delete(function({_intern:e,_key:t},n){let r=t(n);return e.has(r)&&(n=e.get(r),e.delete(r)),n}(this,e))}}function l({_intern:e,_key:t},n){let r=t(n);return e.has(r)?e.get(r):n}function a(e){return null!==e&&"object"==typeof e?e.valueOf():e}var i=n(28749);let s=Symbol("implicit")}}]);