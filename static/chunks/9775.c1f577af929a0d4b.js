"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7953,9775],{59775:(e,t,a)=>{a.r(t),a.d(t,{default:()=>F});var l=a(95155),s=a(12115),c=a(13600),o=a(76167),r=a(30832),n=a(4904),i=a(41995),d=a(72630),S=a(58888),T=a(50109),h=a(79111),x=a(67953),u=a(51078),m=a(7545),_=a(52594),P=a(79701),f=a(2365),k=a(59722),b=a(73879),p=a(43356),j=a(57815),g=a(78398);let w=e=>{let{className:t="w-4 h-4"}=e;return(0,l.jsx)("svg",{className:t,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,l.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})})},v={Total_TPS:"#4682b4",Success_TPS:"#2ecc71",Failed_TPS:"#e74c3c",Real_TPS:"#9b59b6"},y={Total_TPS:"Total TPS",Success_TPS:"Success TPS",Failed_TPS:"Failed TPS",Real_TPS:"Real TPS"},N="#9CA3AF",F=e=>{let{isModalOpen:t=!1,onModalClose:a=()=>{}}=e,[F,A]=(0,s.useState)([]),[R,D]=(0,s.useState)(!0),[C,E]=(0,s.useState)(null),[L,M]=(0,s.useState)({Total_TPS:!0,Success_TPS:!0,Failed_TPS:!0,Real_TPS:!0}),[W,O]=(0,s.useState)([]),[G,z]=(0,s.useState)(!0),Q=(0,s.useRef)(null),U=(0,s.useRef)(null),{tooltipData:q,tooltipLeft:B,tooltipTop:H,tooltipOpen:I,showTooltip:J,hideTooltip:K}=(0,b.A)();(0,g.A)({domain:Object.keys(v),range:Object.values(v)});let V=(0,s.useCallback)(async()=>{D(!0),E(null);try{let e=await (0,x.fetchTPSData)();0===e.length?(E("No data available for TPS."),A([])):A(e)}catch(e){E(e instanceof Error?e.message:"Failed to load data."),A([])}finally{D(!1)}},[]);(0,s.useEffect)(()=>{V()},[V]),(0,s.useEffect)(()=>{t&&(z(!0),F.length>0?(O(F),z(!1)):(0,x.fetchTPSData)().then(e=>{O(e)}).catch(e=>{console.error("Error loading modal chart data:",e)}).finally(()=>{z(!1)}))},[t,F]);let X=(0,s.useCallback)(e=>new Date(e).toLocaleDateString("en-US",{day:"numeric",month:"short"}),[]),Y=(0,s.useCallback)((e,t,a,l,s,c,o)=>{let r=((0,k.A)(e)||{x:0,y:0}).x-o.left;if(l.length>0){let e=l.map(e=>new Date(e.block_date).getTime()),s=t.invert(r).getTime(),c=0,n=Math.abs(e[0]-s);for(let t=1;t<e.length;t++){let a=Math.abs(e[t]-s);a<n&&(n=a,c=t)}let i=l[c],d=a(Math.max(L.Total_TPS?i.Total_TPS:0,L.Success_TPS?i.Success_TPS:0,L.Failed_TPS?i.Failed_TPS:0,L.Real_TPS?i.Real_TPS:0)),S=t(new Date(i.block_date));J({tooltipData:i,tooltipLeft:S+o.left,tooltipTop:d+o.top})}},[J,L]),Z=e=>{M(t=>({...t,[e]:!t[e]}))},$=function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=e?W:F,a=e?G:R,s={top:20,right:30,bottom:50,left:e?80:60};return a?(0,l.jsx)("div",{className:"flex justify-center items-center h-full",children:(0,l.jsx)(u.A,{size:"sm"})}):C||0===t.length?(0,l.jsxs)("div",{className:"flex flex-col justify-center items-center h-full",children:[(0,l.jsx)("p",{className:"text-red-400 mb-3 text-sm",children:C||"No data available"}),(0,l.jsx)(m.A,{onClick:e?()=>{z(!0),(0,x.fetchTPSData)().then(e=>{O(e)}).catch(e=>{console.error("Error loading modal chart data:",e)}).finally(()=>{z(!1)})}:V,children:(0,l.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,l.jsx)(w,{className:"w-3.5 h-3.5"}),(0,l.jsx)("span",{children:"Retry"})]})})]}):(0,l.jsxs)("div",{className:"relative h-full w-full",ref:e?U:Q,children:[(0,l.jsx)(h.A,{children:a=>{let{width:h,height:u}=a,m=h-s.left-s.right,_=u-s.top-s.bottom,k=(0,r.A)({domain:(0,P.A)(t,e=>new Date(e.block_date)),range:[0,m]}),b=(0,n.A)({domain:[0,1.1*(0,f.A)(t,e=>Math.max(L.Total_TPS?e.Total_TPS:0,L.Success_TPS?e.Success_TPS:0,L.Failed_TPS?e.Failed_TPS:0,L.Real_TPS?e.Real_TPS:0))],range:[_,0],nice:!0});return(0,l.jsxs)("div",{children:[(0,l.jsx)("svg",{width:h,height:u,children:(0,l.jsxs)(i.A,{left:s.left,top:s.top,children:[(0,l.jsx)(T.A,{scale:b,width:m,height:_,stroke:"rgba(156, 163, 175, 0.1)",numTicks:5}),L.Total_TPS&&(0,l.jsx)(c.A,{data:t,x:e=>k(new Date(e.block_date)),y:e=>b(e.Total_TPS),stroke:v.Total_TPS,strokeWidth:2.5,curve:o.G}),L.Success_TPS&&(0,l.jsx)(c.A,{data:t,x:e=>k(new Date(e.block_date)),y:e=>b(e.Success_TPS),stroke:v.Success_TPS,strokeWidth:2.5,curve:o.G}),L.Failed_TPS&&(0,l.jsx)(c.A,{data:t,x:e=>k(new Date(e.block_date)),y:e=>b(e.Failed_TPS),stroke:v.Failed_TPS,strokeWidth:2.5,curve:o.G}),L.Real_TPS&&(0,l.jsx)(c.A,{data:t,x:e=>k(new Date(e.block_date)),y:e=>b(e.Real_TPS),stroke:v.Real_TPS,strokeWidth:2.5,curve:o.G}),(0,l.jsx)(d.A,{top:_,scale:k,numTicks:e?10:5,stroke:N,tickStroke:N,tickLabelProps:()=>({fill:N,fontSize:10,textAnchor:"middle",dy:"0.5em"}),tickFormat:e=>e instanceof Date?X(e.toISOString()):""}),(0,l.jsx)(S.A,{scale:b,numTicks:5,stroke:N,tickStroke:N,tickLabelProps:()=>({fill:N,fontSize:10,textAnchor:"end",dx:"-0.5em",dy:"0.3em"}),tickFormat:e=>(0,x.l)("number"==typeof e?e:Number(e))}),(0,l.jsx)("rect",{x:0,y:0,width:m,height:_,fill:"transparent",onMouseMove:e=>Y(e,k,b,t,h,u,s),onMouseLeave:()=>K()}),I&&q&&(0,l.jsxs)(l.Fragment,{children:[L.Total_TPS&&(0,l.jsx)("circle",{cx:k(new Date(q.block_date)),cy:b(q.Total_TPS),r:4,fill:v.Total_TPS,stroke:"white",strokeWidth:2,pointerEvents:"none"}),L.Success_TPS&&(0,l.jsx)("circle",{cx:k(new Date(q.block_date)),cy:b(q.Success_TPS),r:4,fill:v.Success_TPS,stroke:"white",strokeWidth:2,pointerEvents:"none"}),L.Failed_TPS&&(0,l.jsx)("circle",{cx:k(new Date(q.block_date)),cy:b(q.Failed_TPS),r:4,fill:v.Failed_TPS,stroke:"white",strokeWidth:2,pointerEvents:"none"}),L.Real_TPS&&(0,l.jsx)("circle",{cx:k(new Date(q.block_date)),cy:b(q.Real_TPS),r:4,fill:v.Real_TPS,stroke:"white",strokeWidth:2,pointerEvents:"none"})]})]})}),(0,l.jsx)("div",{className:"text-center text-gray-400 text-xs mt-2",children:"Date"}),(0,l.jsx)("div",{className:"absolute text-gray-400 text-xs",style:{left:0,top:"50%",transform:"rotate(-90deg) translateX(50%)",transformOrigin:"left center"},children:"Transactions Per Second (TPS)"}),I&&q&&(0,l.jsxs)(j.A,{top:H,left:B,style:{...p.k,background:"#1F2937",border:"none",borderRadius:"0.5rem",color:"white",padding:"0.75rem",boxShadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06)"},children:[(0,l.jsx)("div",{className:"text-sm font-medium mb-2",children:X(q.block_date)}),L.Total_TPS&&(0,l.jsxs)("div",{className:"flex items-center gap-1 mb-1",children:[(0,l.jsx)("div",{className:"w-2 h-2 rounded-full",style:{backgroundColor:v.Total_TPS}}),(0,l.jsxs)("span",{className:"text-xs",children:["Total: ",(0,x.l)(q.Total_TPS)]})]}),L.Success_TPS&&(0,l.jsxs)("div",{className:"flex items-center gap-1 mb-1",children:[(0,l.jsx)("div",{className:"w-2 h-2 rounded-full",style:{backgroundColor:v.Success_TPS}}),(0,l.jsxs)("span",{className:"text-xs",children:["Success: ",(0,x.l)(q.Success_TPS)]})]}),L.Failed_TPS&&(0,l.jsxs)("div",{className:"flex items-center gap-1 mb-1",children:[(0,l.jsx)("div",{className:"w-2 h-2 rounded-full",style:{backgroundColor:v.Failed_TPS}}),(0,l.jsxs)("span",{className:"text-xs",children:["Failed: ",(0,x.l)(q.Failed_TPS)]})]}),L.Real_TPS&&(0,l.jsxs)("div",{className:"flex items-center gap-1",children:[(0,l.jsx)("div",{className:"w-2 h-2 rounded-full",style:{backgroundColor:v.Real_TPS}}),(0,l.jsxs)("span",{className:"text-xs",children:["Real: ",(0,x.l)(q.Real_TPS)]})]})]},Math.random())]})}}),e&&(0,l.jsx)("div",{className:"flex flex-wrap gap-4 mt-4 justify-center",children:Object.entries(y).map(e=>{let[t,a]=e;return(0,l.jsxs)("button",{className:"flex items-center gap-1 px-2 py-1 rounded-md text-xs transition ".concat(L[t]?"bg-gray-800":"bg-gray-900 opacity-50"),onClick:()=>Z(t),children:[(0,l.jsx)("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:v[t]}}),(0,l.jsx)("span",{children:a})]},t)})})]})};return(0,l.jsxs)("div",{className:"h-full w-full relative",ref:Q,children:[$(!1),t&&(0,l.jsx)(_.A,{isOpen:t,onClose:a,title:"Transactions Per Second (TPS)",subtitle:"Shows the rate of transactions processed by the Solana network",children:(0,l.jsxs)("div",{className:"h-[70vh]",children:[(0,l.jsx)("div",{className:"flex justify-end mb-4",children:(0,l.jsx)("button",{onClick:()=>{let e=new Blob([["Date,Total TPS,Success TPS,Failed TPS,Real TPS",...(t?W:F).map(e=>[e.block_date,e.Total_TPS,e.Success_TPS,e.Failed_TPS,e.Real_TPS].join(","))].join("\n")],{type:"text/csv;charset=utf-8;"}),a=URL.createObjectURL(e),l=document.createElement("a");l.setAttribute("href",a),l.setAttribute("download","solana_tps_data_".concat(new Date().toISOString().split("T")[0],".csv")),document.body.appendChild(l),l.click(),document.body.removeChild(l)},className:"px-4 py-2 bg-gray-800 hover:bg-gray-700 text-xs rounded-md text-blue-400 hover:text-blue-300 transition-colors",children:"Download CSV"})}),(0,l.jsx)("div",{className:"h-[calc(100%-3rem)]",children:$(!0)})]})})]})}},67953:(e,t,a)=>{async function l(){try{let e=await fetch("https://analytics.topledger.xyz/tl/api/queries/13335/results.json?api_key=VlQLi6PlkEzNQragwg2wSJ1Pm5fQGn4bKQjxTJ3e",{method:"GET",headers:{"Content-Type":"application/json"},cache:"no-store"});if(!e.ok)throw Error("Failed to fetch TPS data: ".concat(e.status));return(await e.json()).query_result.data.rows.map(e=>({block_date:e.block_date,Total_TPS:e.Total_TPS,Success_TPS:e.Success_TPS,Failed_TPS:e.Failed_TPS,Real_TPS:e.Real_TPS})).sort((e,t)=>new Date(e.block_date).getTime()-new Date(t.block_date).getTime())}catch(e){throw console.error("Error fetching TPS data:",e),e}}function s(e){return e>=1e6?"".concat((e/1e6).toFixed(2),"M"):e>=1e3?"".concat((e/1e3).toFixed(2),"K"):e.toFixed(0)}a.d(t,{fetchTPSData:()=>l,l:()=>s})},78398:(e,t,a)=>{a.d(t,{A:()=>c});var l=a(95442),s=(0,a(70222).A)("domain","range","reverse","unknown");function c(e){return s((0,l.A)(),e)}}}]);