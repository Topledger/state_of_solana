(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[987],{4335:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>ee});var r=a(5155),l=a(2115),n=a(6009),s=a(963),i=a(9111),o=a(1995),c=a(109),u=a(5191),d=a(4904),h=a(2630),m=a(8888),g=a(4537),f=a(6167),x=a(1734),v=a(614);async function p(e){try{var t,a;let r=await fetch("".concat("https://analytics.topledger.xyz/tl/api","/queries/12459/results?api_key=").concat("MwgPFDxoN9SCpEC6I6nhBH85dtNkXndNYcRtHLYA"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({parameters:{"Date Part":e}})});if(!r.ok)throw Error("API request failed: ".concat(r.status));return((null==(a=(await r.json()).query_result)||null==(t=a.data)?void 0:t.rows)||[]).map(e=>({date:e.block_date||"",tvl:parseFloat(e.TVL||0),velocity:parseFloat(e.Velocity||0)})).filter(e=>e.date)}catch(e){return console.error("Error fetching chart data:",e),[]}}var y=a(1078),b=a(1838),w=a(7545),j=a(2594),N=a(7918),k=a(2028);let T=e=>{let{className:t="w-4 h-4"}=e;return(0,r.jsx)("svg",{className:t,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})})},S=e=>"$".concat((e/1e9).toFixed(1),"B"),L=e=>Number.isInteger(e)?e.toString():e.toFixed(1),A=(e,t)=>{try{let a=new Date(e);if(isNaN(a.getTime()))return e;switch(t){case"Y":return a.getFullYear().toString();case"Q":return"Q".concat(Math.floor(a.getMonth()/3)+1," ").concat(a.getFullYear());case"M":return a.toLocaleDateString("en-US",{month:"short",year:"numeric"});default:return a.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})}}catch(t){return e}},C={axisLines:"#374151",tickLabels:"#6b7280",tvlBar:"#60a5fa",velocityLine:"#a78bfa",grid:"#1f2937"},E=(e,t)=>e&&0!==e.length?Object.keys(e[0]).filter(e=>"date"!==e).map(e=>{let a={tvl:"TVL",velocity:"Velocity"}[e]||e.charAt(0).toUpperCase()+e.slice(1),r="velocity"===e;return{key:e,displayName:a,shape:r?"circle":"square",color:r?t.velocity:t.tvl}}):[],M=e=>{var t;let{timeFilter:a,isModalOpen:n=!1,onModalClose:s=()=>{}}=e,[M,D]=(0,l.useState)([]),[F,_]=(0,l.useState)(!0),[P,V]=(0,l.useState)(null),[B,O]=(0,l.useState)([]),[X,Y]=(0,l.useState)(null),[z,R]=(0,l.useState)(!1),[q,I]=(0,l.useState)([]),[W,U]=(0,l.useState)(!0),[Q,H]=(0,l.useState)(null),[$,J]=(0,l.useState)(a),[K,Z]=(0,l.useState)(null),[G,ee]=(0,l.useState)(!1),[et,ea]=(0,l.useState)([]),[er,el]=(0,l.useState)({visible:!1,dataPoint:null,left:0,top:0}),en=(0,l.useRef)(null),es=(0,l.useRef)(!0),ei=(0,l.useRef)(null),eo=(0,l.useRef)(!0),ec=(0,l.useCallback)(async()=>{_(!0),V(null);try{let e=await p(a);0===e.length?(V("No data available for this period."),D([])):(D(e),O(e),R(!0),Y(null))}catch(t){console.error("[Chart] Error loading chart data:",t);let e="Failed to load data.";t instanceof Error&&(e=t.message||e),V(e),D([]),O([])}finally{_(!1)}},[a]),eu=(0,l.useCallback)(async()=>{U(!0),H(null);try{let e=await p($);0===e.length?(H("No data available for this period."),I([]),ea([])):(I(e),ea(e),ee(!0),Z(null))}catch(t){console.error("[Chart] Error loading modal chart data:",t);let e="Failed to load data.";t instanceof Error&&(e=t.message||e),H(e),I([]),ea([])}finally{U(!1)}},[$]);(0,l.useEffect)(()=>{ec()},[ec]);let ed=(0,l.useCallback)(e=>{if(!e){z&&(Y(null),R(!1)),en.current&&(clearTimeout(en.current),en.current=null,es.current=!0);return}let{x0:t,x1:a}=e,r=new Date(t),l=new Date(a);!(isNaN(r.getTime())||isNaN(l.getTime()))&&(Y([r,l]),z||R(!0))},[z]),eh=(0,l.useCallback)(e=>{if(!e){G&&(Z(null),ee(!1)),ei.current&&(clearTimeout(ei.current),ei.current=null,eo.current=!0);return}let{x0:t,x1:a}=e,r=new Date(t),l=new Date(a);!(isNaN(r.getTime())||isNaN(l.getTime()))&&(Z([r,l]),G||ee(!0))},[G]);(0,l.useEffect)(()=>{if(0===M.length){B.length>0&&O([]);return}if(!X&&z)return void O(M);if(!X||!z){B.length!==M.length&&O(M);return}if(!es.current)return;let[e,t]=X,a=e.getTime(),r=t.getTime(),l=M.filter(e=>{let t=new Date(e.date).getTime();return t>=a&&t<=r});O(l.length>0?l:M),es.current=!1,en.current&&clearTimeout(en.current),en.current=setTimeout(()=>{es.current=!0},100)},[X,M,z]),(0,l.useEffect)(()=>{if(0===q.length){et.length>0&&ea([]);return}if(!K&&G)return void ea(q);if(!K||!G){et.length!==q.length&&ea(q);return}if(!eo.current)return;let[e,t]=K,a=e.getTime(),r=t.getTime(),l=q.filter(e=>{let t=new Date(e.date).getTime();return t>=a&&t<=r});ea(l.length>0?l:q),eo.current=!1,ei.current&&clearTimeout(ei.current),ei.current=setTimeout(()=>{eo.current=!0},100)},[K,q,G]);let em=(0,l.useCallback)(function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];console.log("TvlVelocity - Mouse move event",{isModal:t,clientX:e.clientX,clientY:e.clientY});let a=e.currentTarget.getBoundingClientRect(),r=e.clientX-a.left,l={left:45},n=a.width-l.left-20;if(r<l.left||r>n+l.left){er.visible&&(console.log("TvlVelocity - Mouse outside chart area, hiding tooltip"),el(e=>({...e,visible:!1})));return}let s=t?G?et:q:z?B:M,i=Math.floor((r-l.left)/(n/s.length));if(i>=0&&i<s.length){var o;let t=s[i];er.visible&&(null==(o=er.dataPoint)?void 0:o.date)===t.date||(console.log("TvlVelocity - Setting tooltip data",{dataPoint:t,left:e.clientX,top:e.clientY,offsetLeft:e.clientX-50,offsetTop:e.clientY-50}),el({visible:!0,dataPoint:t,left:e.clientX,top:e.clientY}))}},[M,B,q,et,z,G,er.visible,null==(t=er.dataPoint)?void 0:t.date]),eg=(0,l.useCallback)(()=>{er.visible&&(console.log("TvlVelocity - Mouse leave, hiding tooltip"),el(e=>({...e,visible:!1})))},[er.visible]);(0,l.useEffect)(()=>()=>{en.current&&clearTimeout(en.current),ei.current&&clearTimeout(ei.current)},[]),(0,l.useEffect)(()=>{n||J(a)},[a,n]),(0,l.useEffect)(()=>{n&&(J(a),M.length>0?(I(M),ea(M),U(!1),H(null),ee(!0),Z(null)):eu())},[n,a,M]),(0,l.useEffect)(()=>{n&&eu()},[$,n,eu]);let ef=(0,l.useCallback)(e=>{console.log("Time filter changed to:",e),J(e)},[]),ex=function(e,t){let l=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=l?$:a,s=l?q:M,p=l?G?et:q:z?B:M,j=l?W:F,N=l?Q:P,E=l?G:z;return j?(0,r.jsx)("div",{className:"flex justify-center items-center h-full",children:(0,r.jsx)(y.A,{size:"sm"})}):N||0===s.length?(0,r.jsxs)("div",{className:"flex flex-col justify-center items-center h-full",children:[(0,r.jsx)("div",{className:"text-gray-400/80 text-xs mb-2",children:N||"No data available"}),(0,r.jsx)(w.A,{onClick:l?eu:()=>ec(),children:(0,r.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,r.jsx)(T,{className:"w-3.5 h-3.5"}),(0,r.jsx)("span",{children:"Refresh"})]})})]}):(0,r.jsxs)("div",{className:"flex flex-col h-full",children:[er.visible&&er.dataPoint&&(0,r.jsx)(b.A,{title:A(er.dataPoint.date,n),items:[{color:C.tvlBar,label:"TVL",value:S(er.dataPoint.tvl),shape:"square"},{color:C.velocityLine,label:"Velocity",value:L(er.dataPoint.velocity),shape:"circle"}],top:er.top-(l?50:400),left:er.left-(l?50:240)}),(0,r.jsx)("div",{className:"h-[85%] w-full overflow-hidden",onMouseMove:e=>em(e,l),onMouseLeave:eg,children:(0,r.jsx)(i.A,{children:e=>{let{width:t,height:a}=e;if(t<=0||a<=0)return null;let l={top:5,right:25,bottom:30,left:45},s=t-l.left-l.right,i=a-l.top-l.bottom;if(s<=0||i<=0)return null;let y=p.map(e=>new Date(e.date)),b=(0,u.A)({domain:y,range:[0,s],padding:.3}),w=(0,d.A)({domain:[0,1.1*Math.max(...p.map(e=>e.tvl))],range:[i,0],nice:!0}),j=(0,d.A)({domain:[0,1.1*Math.max(...p.map(e=>e.velocity))],range:[i,0],nice:!0});return(0,r.jsx)("svg",{width:t,height:a,className:"overflow-visible",children:(0,r.jsxs)(o.A,{left:l.left,top:l.top,children:[(0,r.jsx)(c.A,{scale:w,width:s,stroke:C.grid,strokeDasharray:"2,3",strokeOpacity:.5,numTicks:5}),E&&(0,r.jsx)("text",{x:0,y:-8,fontSize:8,fill:C.velocityLine,textAnchor:"start",children:"Filtered: ".concat(p.length," item").concat(1!==p.length?"s":"")}),p.map(e=>{var t;let a=b(new Date(e.date)),l=b.bandwidth(),n=Math.max(0,i-w(e.tvl));return void 0===a||n<0?null:(0,r.jsx)(x.A,{x:a,y:i-n,width:l,height:n,fill:C.tvlBar,opacity:(null==(t=er.dataPoint)?void 0:t.date)===e.date?1:.7},"bar-".concat(e.date))}),(0,r.jsx)(v.A,{data:p,x:e=>{var t;return(null!=(t=b(new Date(e.date)))?t:0)+b.bandwidth()/2},y:e=>j(e.velocity),stroke:C.velocityLine,strokeWidth:1.5,curve:f.G}),(0,r.jsx)(h.A,{top:i,scale:b,tickFormat:e=>{switch(n){case"Y":return e.getFullYear().toString();case"Q":return"Q".concat(Math.floor(e.getMonth()/3)+1);case"M":return e.toLocaleDateString("en-US",{month:"short"});default:return e.toLocaleDateString("en-US",{month:"short",day:"numeric"})}},stroke:C.axisLines,strokeWidth:.5,tickStroke:"transparent",tickLength:0,hideZero:!0,tickLabelProps:(e,t)=>({fill:C.tickLabels,fontSize:11,fontWeight:300,letterSpacing:"0.05em",textAnchor:0===t?"start":"middle",dy:"0.5em",dx:0===t?"0.5em":0}),numTicks:"Y"===n?M.length:Math.min(5,M.length)}),(0,r.jsx)(m.A,{scale:w,stroke:C.axisLines,strokeWidth:.5,tickStroke:"transparent",tickLength:0,numTicks:5,tickFormat:e=>S(Number(e)),tickLabelProps:()=>({fill:C.tickLabels,fontSize:11,fontWeight:300,letterSpacing:"0.05em",textAnchor:"end",dx:"-0.6em",dy:"0.25em"})}),(0,r.jsx)(g.A,{left:s,scale:j,stroke:C.axisLines,strokeWidth:.5,tickStroke:"transparent",tickLength:0,numTicks:5,tickFormat:e=>L(Number(e)),tickLabelProps:()=>({fill:C.tickLabels,fontSize:11,fontWeight:300,letterSpacing:"0.05em",textAnchor:"start",dx:"0.5em",dy:"0.25em"})})]})})}})}),(0,r.jsx)("div",{className:"h-[15%] w-full mt-1",children:(0,r.jsx)(k.A,{data:l?q:M,isModal:l,activeBrushDomain:l?K:X,onBrushChange:l?eh:ed,onClearBrush:l?()=>{Z(null),ee(!1)}:()=>{Y(null),R(!1)},getDate:e=>e.date,getValue:e=>e.tvl,lineColor:C.tvlBar,margin:{top:5,right:25,bottom:10,left:45}})})]})};return(0,r.jsxs)("div",{className:"h-full w-full relative",children:[ex(0,0),(0,r.jsxs)(j.A,{isOpen:n,onClose:s,title:"TVL and Velocity Trends",subtitle:"Tracking value locked and market velocity across the ecosystem",children:[(0,r.jsx)("div",{className:"flex items-center justify-start pl-1 py-0 mb-3",children:(0,r.jsx)(N.A,{value:$,onChange:ef})}),(0,r.jsx)("div",{className:"h-px bg-gray-900 w-full mb-3"}),(0,r.jsx)("div",{className:"h-[60vh]",children:(0,r.jsxs)("div",{className:"flex h-full",children:[(0,r.jsx)("div",{className:"w-[90%] h-full pr-3 border-r border-gray-900",children:ex(0,0,!0)}),(0,r.jsx)("div",{className:"w-[10%] pl-3",children:(0,r.jsx)("div",{className:"flex flex-col gap-4 pt-4",children:!W&&q.length>0?(0,r.jsx)("div",{className:"flex flex-col gap-2",children:E(q,{tvl:C.tvlBar,velocity:C.velocityLine}).map(e=>(0,r.jsxs)("div",{className:"flex items-start",children:[(0,r.jsx)("div",{className:"w-2.5 h-2.5 mr-2 ".concat("circle"===e.shape?"rounded-full":"rounded-sm"," mt-0.5"),style:{background:e.color}}),(0,r.jsx)("span",{className:"text-[11px] text-gray-300",children:e.displayName})]},e.key))}):(0,r.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,r.jsxs)("div",{className:"flex items-start",children:[(0,r.jsx)("div",{className:"w-2.5 h-2.5 bg-blue-500 mr-2 rounded-sm mt-0.5 animate-pulse"}),(0,r.jsx)("span",{className:"text-[11px] text-gray-300",children:"Loading..."})]}),(0,r.jsxs)("div",{className:"flex items-start",children:[(0,r.jsx)("div",{className:"w-2.5 h-2.5 bg-purple-500 mr-2 rounded-full mt-0.5 animate-pulse"}),(0,r.jsx)("span",{className:"text-[11px] text-gray-300",children:"Loading..."})]})]})})})]})})]})]})};var D=a(5442),F=(0,a(222).A)("domain","range","reverse","unknown");async function _(e){try{var t,a;let r=await fetch("".concat("https://analytics.topledger.xyz/tl/api","/queries/12439/results?api_key=").concat("zFtRMSKAAC8nTdp6JX2NebxyP6YCct9poXLe5WfN"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({parameters:{"Date Part":e}})});if(!r.ok)throw Error("API request failed: ".concat(r.status));return((null==(a=(await r.json()).query_result)||null==(t=a.data)?void 0:t.rows)||[]).map(e=>({date:e.block_date||"",program_type:e.program_type||"",velocity:parseFloat(e.Velocity||0)})).filter(e=>e.date&&e.program_type)}catch(e){return console.error("Error fetching velocity by DEX data:",e),[]}}function P(e){let t=new Set;return e.forEach(e=>{e.program_type&&t.add(e.program_type)}),Array.from(t)}function V(e){let t=new Set;return e.forEach(e=>{e.date&&t.add(e.date)}),Array.from(t).sort()}let B=e=>{let{className:t="w-4 h-4"}=e;return(0,r.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[(0,r.jsx)("path",{d:"M21 2v6h-6"}),(0,r.jsx)("path",{d:"M3 12a9 9 0 0 1 15-6.7L21 8"}),(0,r.jsx)("path",{d:"M3 22v-6h6"}),(0,r.jsx)("path",{d:"M21 12a9 9 0 0 1-15 6.7L3 16"})]})},O=e=>Number.isInteger(e)?e.toString():e.toFixed(1),X=(e,t)=>{try{let a=new Date(e);if(isNaN(a.getTime()))return e;switch(t){case"Y":return a.getFullYear().toString();case"Q":return"Q".concat(Math.floor(a.getMonth()/3)+1," ").concat(a.getFullYear());case"M":return a.toLocaleDateString("en-US",{month:"short",year:"numeric"});default:return a.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})}}catch(t){return e}},Y=["#60a5fa","#a78bfa","#34d399","#f97316","#f43f5e","#facc15"],z=(e,t)=>{let a=t.indexOf(e)%Y.length;return Y[a]},R={axisLines:"#374151",tickLabels:"#6b7280",grid:"#1f2937"},q=e=>{let{timeFilter:t,isModalOpen:a=!1,onModalClose:n=()=>{}}=e,[s,g]=(0,l.useState)([]),[x,p]=(0,l.useState)([]),[T,S]=(0,l.useState)(!0),[L,A]=(0,l.useState)(null),[E,M]=(0,l.useState)([]),[q,I]=(0,l.useState)(null),[W,U]=(0,l.useState)(!1),[Q,H]=(0,l.useState)([]),[$,J]=(0,l.useState)([]),[K,Z]=(0,l.useState)(!0),[G,ee]=(0,l.useState)(null),[et,ea]=(0,l.useState)(t),[er,el]=(0,l.useState)(null),[en,es]=(0,l.useState)(!1),[ei,eo]=(0,l.useState)([]),[ec,eu]=(0,l.useState)({visible:!1,date:"",velocities:[],left:0,top:0}),ed=(0,l.useRef)(null),eh=(0,l.useRef)(!0),em=(0,l.useRef)(null),eg=(0,l.useRef)(!0),ef=(0,l.useCallback)(async()=>{S(!0),A(null);try{let e=await _(t);if(console.log("Fetched ".concat(e.length," data points for main chart with filter ").concat(t)),e.length>0){console.log("Sample data:",e.slice(0,2));let t=P(e);console.log("Program types: ".concat(t.join(", ")))}0===e.length?(A("No data available for this period."),g([]),p([])):(g(e),M(e),p(P(e)),U(!0),I(null))}catch(t){console.error("[Chart] Error loading chart data:",t);let e="Failed to load data.";t instanceof Error&&(e=t.message||e),A(e),g([]),M([]),p([])}finally{S(!1)}},[t]),ex=(0,l.useCallback)(async()=>{Z(!0),ee(null);try{let e=await _(et);0===e.length?(ee("No data available for this period."),H([]),eo([]),J([])):(H(e),eo(e),J(P(e)),es(!0),el(null))}catch(t){console.error("[Chart] Error loading modal chart data:",t);let e="Failed to load data.";t instanceof Error&&(e=t.message||e),ee(e),H([]),eo([]),J([])}finally{Z(!1)}},[et]);(0,l.useEffect)(()=>{ef()},[ef]),(0,l.useEffect)(()=>{a||ea(t)},[t,a]),(0,l.useEffect)(()=>{a&&(ea(t),s.length>0?(H(s),eo(s),J(x),Z(!1),ee(null),es(!0),el(null)):ex())},[a,t,s]),(0,l.useEffect)(()=>{a&&ex()},[et,a,ex]);let ev=(0,l.useCallback)(e=>{if(!e){W&&(I(null),U(!1)),ed.current&&(clearTimeout(ed.current),ed.current=null,eh.current=!0);return}let{x0:t,x1:a}=e,r=new Date(t),l=new Date(a);!(isNaN(r.getTime())||isNaN(l.getTime()))&&(I([r,l]),W||U(!0))},[W]),ep=(0,l.useCallback)(e=>{if(!e){en&&(el(null),es(!1)),em.current&&(clearTimeout(em.current),em.current=null,eg.current=!0);return}let{x0:t,x1:a}=e,r=new Date(t),l=new Date(a);!(isNaN(r.getTime())||isNaN(l.getTime()))&&(el([r,l]),en||es(!0))},[en]);(0,l.useEffect)(()=>{if(0===s.length){E.length>0&&M([]);return}if(!q&&W)return void M(s);if(!q||!W){E.length!==s.length&&M(s);return}if(!eh.current)return;let[e,t]=q,a=e.getTime(),r=t.getTime(),l=s.filter(e=>{let t=new Date(e.date).getTime();return t>=a&&t<=r});M(l.length>0?l:s),eh.current=!1,ed.current&&clearTimeout(ed.current),ed.current=setTimeout(()=>{eh.current=!0},100)},[q,s,W]),(0,l.useEffect)(()=>{if(0===Q.length){ei.length>0&&eo([]);return}if(!er&&en)return void eo(Q);if(!er||!en){ei.length!==Q.length&&eo(Q);return}if(!eg.current)return;let[e,t]=er,a=e.getTime(),r=t.getTime(),l=Q.filter(e=>{let t=new Date(e.date).getTime();return t>=a&&t<=r});eo(l.length>0?l:Q),eg.current=!1,em.current&&clearTimeout(em.current),em.current=setTimeout(()=>{eg.current=!0},100)},[er,Q,en]);let ey=(0,l.useCallback)(function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];console.log("VelocityByDex - Mouse move event",{isModal:t,clientX:e.clientX,clientY:e.clientY});let a=e.currentTarget.getBoundingClientRect(),r=e.clientX-a.left,l=e.clientY-a.top,n={left:45},s=a.width-n.left-20;if(r<n.left||r>s+n.left){ec.visible&&(console.log("VelocityByDex - Mouse outside chart area, hiding tooltip"),eu(e=>({...e,visible:!1})));return}let i=t?ei:E,o=t?$:x,c=V(i),u=Math.min(Math.floor((r-n.left)/(s/c.length)),c.length-1);if(u>=0&&u<c.length){let e=c[u],t=o.map(t=>{let a=i.find(a=>a.date===e&&a.program_type===t);return{programType:t,velocity:a?a.velocity:0}}).filter(e=>e.velocity>0);t.length>0&&(console.log("VelocityByDex - Setting tooltip data",{date:e,velocities:t,left:r,top:l}),eu({visible:!0,date:e,velocities:t,left:r,top:l}))}},[E,ei,x,$,ec.visible]),eb=(0,l.useCallback)(()=>{ec.visible&&(console.log("VelocityByDex - Mouse leave, hiding tooltip"),eu(e=>({...e,visible:!1})))},[ec.visible]),ew=(0,l.useCallback)(e=>{console.log("Time filter changed to:",e),ea(e)},[]);(0,l.useEffect)(()=>()=>{ed.current&&clearTimeout(ed.current),em.current&&clearTimeout(em.current)},[]);let ej=function(e,a){let l=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=l?et:t,g=l?Q:s,p=l?en?ei:Q:W?E:s,j=l?$:x,N=l?K:T,S=l?G:L;return N?(0,r.jsx)("div",{className:"flex justify-center items-center h-full",children:(0,r.jsx)(y.A,{size:"sm"})}):S||0===g.length?(0,r.jsxs)("div",{className:"flex flex-col justify-center items-center h-full",children:[(0,r.jsx)("div",{className:"text-gray-400/80 text-xs mb-2",children:S||"No data available"}),(0,r.jsx)(w.A,{onClick:l?ex:()=>ef(),children:(0,r.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,r.jsx)(B,{className:"w-3.5 h-3.5"}),(0,r.jsx)("span",{children:"Refresh"})]})})]}):(0,r.jsxs)("div",{className:"flex flex-col h-full",children:[ec.visible&&ec.date&&(0,r.jsx)(b.A,{title:X(ec.date,n),items:ec.velocities.map(e=>({color:z(e.programType,j),label:e.programType,value:O(e.velocity),shape:"circle"})),top:ec.top,left:ec.left,isModal:l}),(0,r.jsx)("div",{className:"h-[85%] w-full overflow-hidden",onMouseMove:e=>ey(e,l),onMouseLeave:eb,children:(0,r.jsx)(i.A,{children:e=>{var t;let{width:a,height:l}=e;if(a<=0||l<=0)return null;let s={top:10,right:25,bottom:30,left:45},i=a-s.left-s.right,g=l-s.top-s.bottom;if(i<=0||g<=0)return null;let x=V(p);if(0===x.length)return(0,r.jsx)("svg",{width:a,height:l,className:"overflow-visible",children:(0,r.jsx)("text",{x:a/2,y:l/2,textAnchor:"middle",fill:"#6b7280",fontSize:12,children:"No data available for selected time period"})});let y=x.map(e=>{try{return new Date(e)}catch(t){return console.error("Invalid date:",e),new Date}}),b=(0,u.A)({domain:y,range:[0,i],padding:.3}),w=Math.max(...p.map(e=>e.velocity),1),N=(0,d.A)({domain:[0,1.1*w],range:[g,0],nice:!0});return t={domain:j,range:Y},F((0,D.A)(),t),(0,r.jsx)("svg",{width:a,height:l,className:"overflow-visible",children:(0,r.jsxs)(o.A,{left:s.left,top:s.top,children:[(0,r.jsx)(c.A,{scale:N,width:i,stroke:R.grid,strokeDasharray:"2,3",strokeOpacity:.5,numTicks:5}),j.map(e=>{let t=p.filter(t=>t.program_type===e);if(0===t.length)return null;let a=x.map(e=>{let a=t.find(t=>t.date===e);return{date:e,velocity:a?a.velocity:0}});return(0,r.jsx)(v.A,{data:a,x:e=>{var t;return(null!=(t=b(new Date(e.date)))?t:0)+b.bandwidth()/2},y:e=>N(e.velocity),stroke:z(e,j),strokeWidth:1.5,curve:f.G},"line-".concat(e))}),(0,r.jsx)(h.A,{top:g,scale:b,tickFormat:e=>{switch(n){case"Y":return e.getFullYear().toString();case"Q":return"Q".concat(Math.floor(e.getMonth()/3)+1);case"M":return e.toLocaleDateString("en-US",{month:"short"});default:return e.toLocaleDateString("en-US",{month:"short",day:"numeric"})}},stroke:R.axisLines,strokeWidth:.5,tickStroke:"transparent",tickLength:0,hideZero:!0,tickLabelProps:(e,t)=>({fill:R.tickLabels,fontSize:11,fontWeight:300,letterSpacing:"0.05em",textAnchor:0===t?"start":"middle",dy:"0.5em",dx:0===t?"0.5em":0}),numTicks:Math.min(5,x.length)}),(0,r.jsx)(m.A,{scale:N,stroke:R.axisLines,strokeWidth:.5,tickStroke:"transparent",tickLength:0,numTicks:5,tickFormat:e=>O(Number(e)),tickLabelProps:()=>({fill:R.tickLabels,fontSize:11,fontWeight:300,letterSpacing:"0.05em",textAnchor:"end",dx:"-0.6em",dy:"0.25em"})})]})})}})}),(0,r.jsx)("div",{className:"h-[15%] w-full mt-1",children:(0,r.jsx)(k.A,{data:l?Q:s,isModal:l,activeBrushDomain:l?er:q,onBrushChange:l?ep:ev,onClearBrush:l?()=>{el(null),es(!1)}:()=>{I(null),U(!1)},getDate:e=>e.date,getValue:e=>e.velocity,getUniqueDates:V,lineColor:C.tvlBar,margin:{top:5,right:25,bottom:10,left:45}})})]})};return(0,r.jsxs)("div",{className:"h-full w-full relative",children:[ej(0,0),(0,r.jsxs)(j.A,{isOpen:a,onClose:n,title:"Velocity By DEX Program Category",subtitle:"Tracking velocity trends across different DEX program types",children:[(0,r.jsx)("div",{className:"flex items-center justify-start pl-1 py-0 mb-3",children:(0,r.jsx)(N.A,{value:et,onChange:ew})}),(0,r.jsx)("div",{className:"h-px bg-gray-900 w-full mb-3"}),(0,r.jsx)("div",{className:"h-[60vh]",children:(0,r.jsxs)("div",{className:"flex h-full",children:[(0,r.jsx)("div",{className:"w-[90%] h-full pr-3 border-r border-gray-900",children:ej(0,0,!0)}),(0,r.jsx)("div",{className:"w-[10%] pl-3",children:(0,r.jsx)("div",{className:"flex flex-col gap-5 pt-4",children:(0,r.jsx)("div",{className:"flex flex-col gap-2",children:$.length>0&&$.map((e,t)=>(0,r.jsxs)("div",{className:"flex items-start",children:[(0,r.jsx)("div",{className:"w-2.5 h-2.5 mr-2 rounded-sm mt-0.5",style:{background:z(e,$)}}),(0,r.jsx)("span",{className:"text-[11px] text-gray-300 truncate",title:e,children:e.length>10?"".concat(e.substring(0,10),"..."):e})]},e))})})})]})})]})]})},I=async()=>{try{var e,t;let a=await fetch("https://analytics.topledger.xyz/tl/api/queries/12253/results.json?api_key=AhAqEtjP6gKfND9TLKPRzSbB2IYdXlAFcBa2vSoQ");if(!a.ok)throw Error("Failed to fetch: ".concat(a.status," ").concat(a.statusText));return((null==(t=(await a.json()).query_result)||null==(e=t.data)?void 0:e.rows)||[]).map(e=>({year:e.year,volume:e.volume,cumulative_volume:e.cumulative_volume})).sort((e,t)=>new Date(t.year).getTime()-new Date(e.year).getTime())}catch(e){throw console.error("Error fetching volume data:",e),Error("Failed to fetch volume data")}},W=async()=>{try{let e=await I();if(e.length<2)return{cumulativeVolume:0,percentChange:0,isPositive:!1};let t=e[0],a=e[1],r=t.cumulative_volume,l=(t.cumulative_volume-a.cumulative_volume)/a.cumulative_volume*100;return{cumulativeVolume:r,percentChange:l,isPositive:l>0}}catch(e){return console.error("Error calculating volume stats:",e),{cumulativeVolume:0,percentChange:0,isPositive:!1}}},U=async()=>{try{var e,t;let a=await fetch("https://analytics.topledger.xyz/tl/api/queries/12435/results.json?api_key=QoHzXXunvuLg0rrTWyFTNzmIjIoqY5MJhHo3ltZg");if(!a.ok)throw Error("Failed to fetch: ".concat(a.status," ").concat(a.statusText));let r=(null==(t=(await a.json()).query_result)||null==(e=t.data)?void 0:e.rows)||[],l=new Map;return r.forEach(e=>{let t=e.block_date;l.has(t)||l.set(t,{date:t,totalTvl:e.daily_total_volume,programBreakdown:{}}),l.get(t).programBreakdown[e.program_type]=e.tvl}),Array.from(l.values()).sort((e,t)=>new Date(t.date).getTime()-new Date(e.date).getTime())}catch(e){throw console.error("Error fetching TVL data:",e),Error("Failed to fetch TVL data")}},Q=async()=>{try{let e=await U();if(e.length<2)return{currentTvl:0,percentChange:0,isPositive:!1};let t=e[0],a=e[1],r=t.totalTvl/1e9,l=(t.totalTvl-a.totalTvl)/a.totalTvl*100;return{currentTvl:r,percentChange:l,isPositive:l>0}}catch(e){return console.error("Error calculating TVL stats:",e),{currentTvl:0,percentChange:0,isPositive:!1}}},H=async()=>{try{var e,t;let a=await fetch("https://analytics.topledger.xyz/tl/api/queries/13181/results.json?api_key=fLzwXGF8j4St6XvrckEAe1gjQRHKveWvvCafx2Zz");if(!a.ok)throw Error("Failed to fetch: ".concat(a.status," ").concat(a.statusText));return((null==(t=(await a.json()).query_result)||null==(e=t.data)?void 0:e.rows)||[]).map(e=>({partition_0:e.partition_0,active_signer:parseInt(e.active_signer),new_signer:parseInt(e.new_signer),new_traders_activation_ratio:parseFloat(e.new_traders_activation_ratio),cumulative_signer:parseInt(e.cumulative_signer)})).sort((e,t)=>new Date(t.partition_0).getTime()-new Date(e.partition_0).getTime())}catch(e){throw console.error("Error fetching traders data:",e),Error("Failed to fetch traders data")}},$=async()=>{try{let e=await H();if(e.length<2)return{cumulativeTraders:0,percentChange:0,isPositive:!1};let t=e[0],a=e[1],r=t.cumulative_signer/1e6,l=(t.cumulative_signer-a.cumulative_signer)/a.cumulative_signer*100;return{cumulativeTraders:r,percentChange:l,isPositive:l>0}}catch(e){return console.error("Error calculating traders stats:",e),{cumulativeTraders:0,percentChange:0,isPositive:!1}}},J=["#60a5fa","#a78bfa","#34d399","#f97316","#f43f5e","#facc15"],K={tvl:C.tvlBar,velocity:C.velocityLine},Z=(e,t)=>{let a=t.indexOf(e)%J.length;return J[a]},G=e=>{if(!e||0===e.length)return[];let t=e[0],a={tvl:"TVL",velocity:"Velocity"};return Object.keys(t).filter(e=>"date"!==e).map(e=>{let t=a[e]||e.charAt(0).toUpperCase()+e.slice(1),r="velocity"===e;return{key:e,displayName:t,shape:r?"circle":"square",color:r?K.velocity:K.tvl}})};function ee(){var e;let t,a,[i,o]=(0,l.useState)("M"),[c,u]=(0,l.useState)("M"),[d,h]=(0,l.useState)(!1),[m,g]=(0,l.useState)(!1),[f,x]=(0,l.useState)([]),[v,y]=(0,l.useState)(!0),[b,w]=(0,l.useState)([]),[j,k]=(0,l.useState)([]),[T,S]=(0,l.useState)(!0),[L,A]=(0,l.useState)({cumulativeVolume:0,percentChange:0,isPositive:!0}),[C,E]=(0,l.useState)(!0),[D,F]=(0,l.useState)({currentTvl:0,percentChange:0,isPositive:!0}),[B,O]=(0,l.useState)(!0),[X,Y]=(0,l.useState)({cumulativeTraders:0,percentChange:0,isPositive:!0}),[z,R]=(0,l.useState)(!0),[I,U]=(0,l.useState)(!1),[H,J]=(0,l.useState)(!1);(0,l.useEffect)(()=>{(async()=>{S(!0);try{let e=await p(i);w(e)}catch(e){console.error("Error fetching TVL velocity data:",e)}finally{S(!1)}})()},[i]),(0,l.useEffect)(()=>{(async()=>{y(!0);try{let e=await _(c);x(P(e)),k(e)}catch(e){console.error("Error fetching DEX velocity data:",e)}finally{y(!1)}})()},[c]),(0,l.useEffect)(()=>{(async()=>{E(!0);try{let e=await W();A(e)}catch(e){console.error("Error fetching volume data:",e)}finally{E(!1)}})()},[]),(0,l.useEffect)(()=>{(async()=>{O(!0);try{let e=await Q();F(e)}catch(e){console.error("Error fetching TVL stats:",e)}finally{O(!1)}})()},[]),(0,l.useEffect)(()=>{(async()=>{R(!0);try{let e=await $();Y(e)}catch(e){console.error("Error fetching traders data:",e)}finally{R(!1)}})()},[]);let K=async()=>{if(!I){U(!0);try{if(0===b.length){console.error("No TVL velocity data available for download");let e=await p(i);if(0===e.length)return void console.error("Failed to fetch TVL velocity data for download");w(e)}let e=b.map(e=>"".concat(e.date,",").concat(e.tvl,",").concat(e.velocity)).join("\n"),t=encodeURI("data:text/csv;charset=utf-8,Date,TVL,Velocity\n"+e),a=document.createElement("a");a.setAttribute("href",t),a.setAttribute("download","tvl-velocity-".concat(i,"-").concat(new Date().toISOString().split("T")[0],".csv")),document.body.appendChild(a),a.click(),document.body.removeChild(a)}catch(e){console.error("Error downloading TVL velocity data:",e)}finally{U(!1)}}},ee=async()=>{if(!H){J(!0);try{if(0===j.length||0===f.length){console.error("No DEX velocity data available for download");let e=await _(c);if(0===e.length)return void console.error("Failed to fetch DEX velocity data for download");k(e),x(P(e))}let e=V(j),t="Date";f.forEach(e=>{t+=",".concat(e)});let a="data:text/csv;charset=utf-8,".concat(t,"\n"),r=e.map(e=>{let t=e;return f.forEach(a=>{let r=j.find(t=>t.date===e&&t.program_type===a);t+=",".concat(r?r.velocity:0)}),t}).join("\n"),l=encodeURI(a+r),n=document.createElement("a");n.setAttribute("href",l),n.setAttribute("download","dex-velocity-".concat(c,"-").concat(new Date().toISOString().split("T")[0],".csv")),document.body.appendChild(n),n.click(),document.body.removeChild(n)}catch(e){console.error("Error downloading DEX velocity data:",e)}finally{J(!1)}}};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[(0,r.jsx)(n.A,{title:"All-time Volume",value:C?"0":(e=L.cumulativeVolume)>=1?"$".concat(e.toFixed(2),"T"):"$".concat((1e3*e).toFixed(2),"B"),trend:C?void 0:{value:parseFloat(L.percentChange.toFixed(1)),label:"vs last year"},icon:(0,r.jsx)(s.it,{}),variant:"indigo",isLoading:C}),(0,r.jsx)(n.A,{title:"Current TVL",value:B?"0":(t=D.currentTvl,"$".concat(t.toFixed(2),"B")),trend:B?void 0:{value:parseFloat(D.percentChange.toFixed(1)),label:"vs last day"},icon:(0,r.jsx)(s.wH,{}),variant:"blue",isLoading:B}),(0,r.jsx)(n.A,{title:"All-time Traders",value:z?"0":(a=X.cumulativeTraders,"".concat(a.toFixed(1),"M")),trend:z?void 0:{value:parseFloat(X.percentChange.toFixed(1)),label:"vs last day"},icon:(0,r.jsx)(s.c2,{}),variant:"purple",isLoading:z})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4 mb-4",children:[(0,r.jsxs)("div",{className:"bg-black/80 backdrop-blur-sm p-4 rounded-xl border border-gray-900 shadow-lg hover:shadow-blue-900/20 transition-all duration-300",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-3",children:[(0,r.jsxs)("div",{className:"-mt-1",children:[(0,r.jsx)("h2",{className:"text-[12px] font-normal text-gray-300 leading-tight mb-0.5",children:"TVL and Velocity Trends"}),(0,r.jsx)("p",{className:"text-gray-500 text-[10px] tracking-wide",children:"Tracking value locked and market velocity across the ecosystem"})]}),(0,r.jsxs)("div",{className:"flex space-x-2",children:[(0,r.jsx)("button",{className:"p-1.5 bg-blue-500/10 rounded-md text-blue-400 hover:bg-blue-500/20 transition-colors ".concat(I?"opacity-50 cursor-not-allowed":""),onClick:K,title:"Download CSV",disabled:I,children:I?(0,r.jsx)("div",{className:"w-4 h-4 border-2 border-blue-400 border-t-transparent rounded-full animate-spin"}):(0,r.jsx)(s.s3,{className:"w-4 h-4"})}),(0,r.jsx)("button",{className:"p-1.5 bg-blue-500/10 rounded-md text-blue-400 hover:bg-blue-500/20 transition-colors",onClick:()=>h(!0),title:"Expand Chart",children:(0,r.jsx)(s.mS,{className:"w-4 h-4"})})]})]}),(0,r.jsx)("div",{className:"h-px bg-gray-900 w-full"}),(0,r.jsx)("div",{className:"flex items-center justify-start pl-1 py-2 overflow-x-auto",children:(0,r.jsx)(N.A,{value:i,onChange:o})}),(0,r.jsx)("div",{className:"h-px bg-gray-900 w-full mb-3"}),(0,r.jsxs)("div",{className:"flex flex-col lg:flex-row h-[360px] lg:h-80",children:[(0,r.jsx)("div",{className:"flex-grow lg:pr-3 lg:border-r lg:border-gray-900 h-80 lg:h-auto",children:(0,r.jsx)(M,{timeFilter:i,isModalOpen:d,onModalClose:()=>h(!1)})}),(0,r.jsx)("div",{className:"w-full lg:w-1/5 mt-2 lg:mt-0 lg:pl-3 flex flex-row lg:flex-col",children:(0,r.jsx)("div",{className:"flex flex-row lg:flex-col gap-4 lg:gap-3 pt-1 pb-2 lg:pb-0",children:(0,r.jsx)("div",{className:"flex flex-row lg:flex-col gap-4 lg:gap-3",children:!T&&b.length>0?(0,r.jsx)(r.Fragment,{children:G(b).map(e=>(0,r.jsxs)("div",{className:"flex items-start",children:[(0,r.jsx)("div",{className:"w-2 h-2 mr-2 ".concat("circle"===e.shape?"rounded-full":"rounded-sm"," mt-0.5"),style:{background:e.color}}),(0,r.jsx)("span",{className:"text-xs text-gray-300",children:e.displayName})]},e.key))}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"flex items-start",children:[(0,r.jsx)("div",{className:"w-2 h-2 bg-blue-500 mr-2 rounded-sm mt-0.5 animate-pulse"}),(0,r.jsx)("div",{className:"text-xs text-gray-300",children:"Loading..."})]}),(0,r.jsxs)("div",{className:"flex items-start",children:[(0,r.jsx)("div",{className:"w-2 h-2 bg-purple-500 mr-2 rounded-full mt-0.5 animate-pulse"}),(0,r.jsx)("div",{className:"text-xs text-gray-300",children:"Loading..."})]})]})})})})]})]}),(0,r.jsxs)("div",{className:"bg-black/80 backdrop-blur-sm p-4 rounded-xl border border-gray-900 shadow-lg hover:shadow-purple-900/20 transition-all duration-300",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-3",children:[(0,r.jsxs)("div",{className:"-mt-1",children:[(0,r.jsx)("h2",{className:"text-[12px] font-normal text-gray-300 leading-tight mb-0.5",children:"Velocity By DEX Program Category"}),(0,r.jsx)("p",{className:"text-gray-500 text-[10px] tracking-wide",children:"Tracking velocity trends across different DEX program types"})]}),(0,r.jsxs)("div",{className:"flex space-x-2",children:[(0,r.jsx)("button",{className:"p-1.5 bg-purple-500/10 rounded-md text-purple-400 hover:bg-purple-500/20 transition-colors ".concat(H?"opacity-50 cursor-not-allowed":""),onClick:ee,title:"Download CSV",disabled:H,children:H?(0,r.jsx)("div",{className:"w-4 h-4 border-2 border-purple-400 border-t-transparent rounded-full animate-spin"}):(0,r.jsx)(s.s3,{className:"w-4 h-4"})}),(0,r.jsx)("button",{className:"p-1.5 bg-purple-500/10 rounded-md text-purple-400 hover:bg-purple-500/20 transition-colors",onClick:()=>g(!0),title:"Expand Chart",children:(0,r.jsx)(s.mS,{className:"w-4 h-4"})})]})]}),(0,r.jsx)("div",{className:"h-px bg-gray-900 w-full"}),(0,r.jsx)("div",{className:"flex items-center justify-start pl-1 py-2 overflow-x-auto",children:(0,r.jsx)(N.A,{value:c,onChange:u})}),(0,r.jsx)("div",{className:"h-px bg-gray-900 w-full mb-3"}),(0,r.jsxs)("div",{className:"flex flex-col lg:flex-row h-[360px] lg:h-80",children:[(0,r.jsx)("div",{className:"flex-grow lg:pr-3 lg:border-r lg:border-gray-900 h-80 lg:h-auto",children:(0,r.jsx)(q,{timeFilter:c,isModalOpen:m,onModalClose:()=>g(!1)})}),(0,r.jsx)("div",{className:"w-full lg:w-1/5 mt-2 lg:mt-0 lg:pl-3 flex flex-row lg:flex-col overflow-x-auto lg:overflow-x-visible",children:(0,r.jsx)("div",{className:"flex flex-row lg:flex-col gap-4 lg:gap-3 pt-1 pb-2 lg:pb-0",children:(0,r.jsx)("div",{className:"flex flex-row lg:flex-col gap-4 lg:gap-3",children:!v&&f.length>0?f.map((e,t)=>(0,r.jsxs)("div",{className:"flex items-start whitespace-nowrap",children:[(0,r.jsx)("div",{className:"w-2 h-2 mr-2 rounded-sm mt-0.5",style:{background:Z(e,f)}}),(0,r.jsx)("span",{className:"text-xs text-gray-300 truncate",title:e,children:e.length>12?"".concat(e.substring(0,12),"..."):e})]},e)):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"flex items-start",children:[(0,r.jsx)("div",{className:"w-2 h-2 bg-blue-500 mr-2 rounded-sm mt-0.5 animate-pulse"}),(0,r.jsx)("div",{className:"text-xs text-gray-300",children:"Loading..."})]}),(0,r.jsxs)("div",{className:"flex items-start",children:[(0,r.jsx)("div",{className:"w-2 h-2 bg-purple-500 mr-2 rounded-sm mt-0.5 animate-pulse"}),(0,r.jsx)("div",{className:"text-xs text-gray-300",children:"Loading..."})]}),(0,r.jsxs)("div",{className:"flex items-start",children:[(0,r.jsx)("div",{className:"w-2 h-2 bg-green-500 mr-2 rounded-sm mt-0.5 animate-pulse"}),(0,r.jsx)("div",{className:"text-xs text-gray-300",children:"Loading..."})]})]})})})})]})]})]})]})}},4537:(e,t,a)=>{"use strict";a.d(t,{A:()=>d});var r=a(2115),l=a(9300),n=a.n(l),s=a(4945),i=a(2758),o=["axisClassName","labelOffset","tickLength","tickLabelProps"];function c(){return(c=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e}).apply(this,arguments)}var u={dx:"0.25em",dy:"0.25em",fill:"#222",fontFamily:"Arial",fontSize:10,textAnchor:"start"};function d(e){var t=e.axisClassName,a=e.labelOffset,l=e.tickLength,d=e.tickLabelProps,h=function(e,t){if(null==e)return{};var a,r,l={},n=Object.keys(e);for(r=0;r<n.length;r++)a=n[r],t.indexOf(a)>=0||(l[a]=e[a]);return l}(e,o),m="function"==typeof d?d:c({},u,d);return r.createElement(s.A,c({axisClassName:n()("visx-axis-right",t),labelOffset:void 0===a?36:a,orientation:i.A.right,tickLabelProps:m,tickLength:void 0===l?8:l},h))}},5191:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});var r=a(8749),l=a(5442),n=(0,a(222).A)("domain","range","reverse","align","padding","round");function s(e){return n(function e(){var t,a,n=(0,l.A)().unknown(void 0),s=n.domain,i=n.range,o=0,c=1,u=!1,d=0,h=0,m=.5;function g(){var e=s().length,r=c<o,l=r?c:o,n=r?o:c;t=(n-l)/Math.max(1,e-d+2*h),u&&(t=Math.floor(t)),l+=(n-l-t*(e-d))*m,a=t*(1-d),u&&(l=Math.round(l),a=Math.round(a));var g=(function(e,t,a){e*=1,t*=1,a=(l=arguments.length)<2?(t=e,e=0,1):l<3?1:+a;for(var r=-1,l=0|Math.max(0,Math.ceil((t-e)/a)),n=Array(l);++r<l;)n[r]=e+r*a;return n})(e).map(function(e){return l+t*e});return i(r?g.reverse():g)}return delete n.unknown,n.domain=function(e){return arguments.length?(s(e),g()):s()},n.range=function(e){return arguments.length?([o,c]=e,o*=1,c*=1,g()):[o,c]},n.rangeRound=function(e){return[o,c]=e,o*=1,c*=1,u=!0,g()},n.bandwidth=function(){return a},n.step=function(){return t},n.round=function(e){return arguments.length?(u=!!e,g()):u},n.padding=function(e){return arguments.length?(d=Math.min(1,h=+e),g()):d},n.paddingInner=function(e){return arguments.length?(d=Math.min(1,e),g()):d},n.paddingOuter=function(e){return arguments.length?(h=+e,g()):h},n.align=function(e){return arguments.length?(m=Math.max(0,Math.min(1,e)),g()):m},n.copy=function(){return e(s(),[o,c]).round(u).paddingInner(d).paddingOuter(h).align(m)},r.C.apply(g(),arguments)}(),e)}},5442:(e,t,a)=>{"use strict";a.d(t,{A:()=>function e(){var t=new r,a=[],l=[],n=i;function o(e){let r=t.get(e);if(void 0===r){if(n!==i)return n;t.set(e,r=a.push(e)-1)}return l[r%l.length]}return o.domain=function(e){if(!arguments.length)return a.slice();for(let l of(a=[],t=new r,e))t.has(l)||t.set(l,a.push(l)-1);return o},o.range=function(e){return arguments.length?(l=Array.from(e),o):l.slice()},o.unknown=function(e){return arguments.length?(n=e,o):n},o.copy=function(){return e(a,l).unknown(n)},s.C.apply(o,arguments),o}});class r extends Map{constructor(e,t=n){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:t}}),null!=e)for(let[t,a]of e)this.set(t,a)}get(e){return super.get(l(this,e))}has(e){return super.has(l(this,e))}set(e,t){return super.set(function({_intern:e,_key:t},a){let r=t(a);return e.has(r)?e.get(r):(e.set(r,a),a)}(this,e),t)}delete(e){return super.delete(function({_intern:e,_key:t},a){let r=t(a);return e.has(r)&&(a=e.get(r),e.delete(r)),a}(this,e))}}function l({_intern:e,_key:t},a){let r=t(a);return e.has(r)?e.get(r):a}function n(e){return null!==e&&"object"==typeof e?e.valueOf():e}var s=a(8749);let i=Symbol("implicit")},6009:(e,t,a)=>{"use strict";a.d(t,{A:()=>o});var r=a(5155),l=a(2115);let n={indigo:{bg:"bg-indigo-500/10",text:"text-indigo-400",shadow:"hover:shadow-indigo-900/20"},blue:{bg:"bg-blue-500/10",text:"text-blue-400",shadow:"hover:shadow-blue-900/20"},purple:{bg:"bg-purple-500/10",text:"text-purple-400",shadow:"hover:shadow-purple-900/20"},emerald:{bg:"bg-emerald-500/10",text:"text-emerald-400",shadow:"hover:shadow-emerald-900/20"},amber:{bg:"bg-amber-500/10",text:"text-amber-400",shadow:"hover:shadow-amber-900/20"},rose:{bg:"bg-rose-500/10",text:"text-rose-400",shadow:"hover:shadow-rose-900/20"}},s=e=>{if(!e)return 0;let t=e.match(/\$?([\d.]+)([BMT])?/);if(!t)return 0;let a=parseFloat(t[1]);switch(t[2]){case"T":return 1e6*a;case"B":return 1e3*a;default:return a}},i=(e,t)=>t.includes("T")?"$".concat((e/1e6).toFixed(2),"T"):t.includes("B")?"$".concat((e/1e3).toFixed(2),"B"):t.includes("M")?"".concat(e.toFixed(1),"M"):t.includes("%")?"".concat(e.toFixed(1),"%"):e.toString();function o(e){let{title:t,value:a,trend:o,icon:c,variant:u="indigo",isLoading:d=!1}=e,h=n[u],[m,g]=(0,l.useState)("0"),[f,x]=(0,l.useState)(!1),v=(0,l.useRef)(a),p=(0,l.useRef)(0);return(0,l.useEffect)(()=>{if("Loading..."===a||a===m)return;v.current=a;let e=s(m),t=s(a);if(e===t)return;p.current&&cancelAnimationFrame(p.current),x(!0);let r=performance.now(),l=n=>{let s=Math.min((n-r)/1500,1);g(i(e+s*(2-s)*(t-e),a)),s<1?p.current=requestAnimationFrame(l):(g(a),x(!1))};return p.current=requestAnimationFrame(l),()=>{p.current&&cancelAnimationFrame(p.current)}},[a,m]),(0,r.jsxs)("div",{className:"bg-black/80 backdrop-blur-sm p-4 md:p-5 rounded-xl border border-gray-900 shadow-lg ".concat(h.shadow," transition-all duration-300 min-h-[90px]"),children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,r.jsx)("h2",{className:"text-xs md:text-sm font-normal text-gray-500",children:t}),(0,r.jsx)("div",{className:"p-1 md:p-1.5 ".concat(h.bg," rounded-md"),children:(0,r.jsx)("div",{className:"".concat(h.text," w-4 h-4 md:w-5 md:h-5"),children:c})})]}),(0,r.jsxs)("div",{className:"mt-1",children:[(0,r.jsx)("div",{className:"text-xl md:text-2xl font-medium text-gray-300 leading-relaxed truncate",children:"Loading..."===a||f?m:a}),o&&(0,r.jsxs)("div",{className:"flex items-center mt-1 text-xs md:text-sm",children:[(0,r.jsxs)("span",{className:"".concat(o.value>=0?"text-green-400":"text-red-400"," flex items-center"),children:[(0,r.jsx)("svg",{className:"w-3 h-3 md:w-3.5 md:h-3.5 mr-0.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:o.value>=0?"M5 10l7-7m0 0l7 7m-7-7v18":"M19 14l-7 7m0 0l-7-7m7 7V3"})}),Math.abs(o.value),"%"]}),(0,r.jsx)("span",{className:"text-gray-500 ml-1 md:ml-1.5",children:o.label})]})]})]})}},9641:(e,t,a)=>{Promise.resolve().then(a.bind(a,4335))}},e=>{var t=t=>e(e.s=t);e.O(0,[659,948,441,684,358],()=>t(9641)),_N_E=e.O()}]);